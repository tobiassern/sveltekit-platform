var Ou=Object.defineProperty;var Cu=(e,t,r)=>t in e?Ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var c=(e,t,r)=>(Cu(e,typeof t!="symbol"?t+"":t,r),r);import{d as Ns,g as cr,w as ee,r as Kn}from"./index.DrUETBQY.js";import{p as dr,n as pi}from"./stores.BptmXAsR.js";import{a as Xr}from"./index-client.Vsfol0mn.js";import{U as la,N as Iu,P as Nu,a as Ru,b as ca,H as zu,p as Mu,i as da,c as en,d as Pu,g as ju}from"./entry.CFRP--2r.js";import{p as Et,ab as oe,ac as En,g as R,t as vr,a as At,n as Be,l as Ue,W as rt,a8 as ss,a9 as fa,az as ha,aa as pa,C as gt,a7 as ma}from"./runtime.Jf46wuGD.js";import"./disclose-version.Bg9kRutz.js";import{s as Je,e as Lu,a as ya}from"./render.Bv0yYwOM.js";import{c as le,a as W,t as Lr,f as ce,b as br}from"./template.Cy1XqOF_.js";import{u as Dr,i as Tt,s as ge,a as Jr}from"./store.4n1elMwH.js";import{d as Qe}from"./misc.heqD49q_.js";import{l as Ye,p as $e,i as ga,b as va,s as An}from"./props.P1SnnUBI.js";import{n as Du,J as qu,t as Bu,O as Ku,s as nn,a as Fu,f as _r,z as Vu,k as ba,l as _a,V as Uu,j as Zu}from"./input.C_q-rZkj.js";const Wu=!0;class Fn extends Error{constructor(t,r){super(t),this.name="DevalueError",this.path=r.join("")}}function mi(e){return Object(e)!==e}const Hu=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ju(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===Hu}function Qu(e){return Object.prototype.toString.call(e).slice(8,-1)}function Yu(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function Zt(e){let t="",r=0;const n=e.length;for(let s=0;s<n;s+=1){const i=e[s],a=Yu(i);a&&(t+=e.slice(r,s)+a,r=s+1)}return`"${r===0?e:t+e.slice(r)}"`}function Gu(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t).enumerable)}function Xu(e,t){const r=[],n=new Map,s=[];for(const l in t)s.push({key:l,fn:t[l]});const i=[];let a=0;function o(l){if(typeof l=="function")throw new Fn("Cannot stringify a function",i);if(n.has(l))return n.get(l);if(l===void 0)return la;if(Number.isNaN(l))return Iu;if(l===1/0)return Nu;if(l===-1/0)return Ru;if(l===0&&1/l<0)return ca;const d=a++;n.set(l,d);for(const{key:x,fn:g}of s){const b=g(l);if(b)return r[d]=`["${x}",${o(b)}]`,d}let h="";if(mi(l))h=Vn(l);else switch(Qu(l)){case"Number":case"String":case"Boolean":h=`["Object",${Vn(l)}]`;break;case"BigInt":h=`["BigInt",${l}]`;break;case"Date":h=`["Date","${!isNaN(l.getDate())?l.toISOString():""}"]`;break;case"RegExp":const{source:b,flags:y}=l;h=y?`["RegExp",${Zt(b)},"${y}"]`:`["RegExp",${Zt(b)}]`;break;case"Array":h="[";for(let m=0;m<l.length;m+=1)m>0&&(h+=","),m in l?(i.push(`[${m}]`),h+=o(l[m]),i.pop()):h+=zu;h+="]";break;case"Set":h='["Set"';for(const m of l)h+=`,${o(m)}`;h+="]";break;case"Map":h='["Map"';for(const[m,w]of l)i.push(`.get(${mi(m)?Vn(m):"..."})`),h+=`,${o(m)},${o(w)}`,i.pop();h+="]";break;default:if(!Ju(l))throw new Fn("Cannot stringify arbitrary non-POJOs",i);if(Gu(l).length>0)throw new Fn("Cannot stringify POJOs with symbolic keys",i);if(Object.getPrototypeOf(l)===null){h='["null"';for(const m in l)i.push(`.${m}`),h+=`,${Zt(m)},${o(l[m])}`,i.pop();h+="]"}else{h="{";let m=!1;for(const w in l)m&&(h+=","),m=!0,i.push(`.${w}`),h+=`${Zt(w)}:${o(l[w])}`,i.pop();h+="}"}}return r[d]=h,d}const u=o(e);return u<0?`${u}`:`[${r.join(",")}]`}function Vn(e){const t=typeof e;return t==="string"?Zt(e):e instanceof String?Zt(e.toString()):e===void 0?la.toString():e===0&&1/e<0?ca.toString():t==="bigint"?`["BigInt","${e}"]`:String(e)}const wa=Wu;function el(){return{elements:{root:Du("label",{action:t=>({destroy:qu(t,"mousedown",n=>{!n.defaultPrevented&&n.detail>1&&n.preventDefault()})})})}}}function tl(){const e="label",r=Bu(e,["root"]);return{NAME:e,getAttrs:r}}var rl=Lr("<label><!></label>");function nl(e,t){const r=Ye(t,["children","$$slots","$$events"]),n=Ye(r,["asChild","el"]);Et(t,!1);const s={};Dr(s);const i=()=>ge(l,"$root",s),a=Be();let o=$e(t,"asChild",0,!1),u=$e(t,"el",12,()=>{});const{elements:{root:l}}=el(),d=Ku(),{getAttrs:h}=tl(),x=h("root");oe(()=>i(),()=>{Ue(a,i())}),oe(()=>R(a),()=>{Object.assign(R(a),x)}),En(),Tt();var g=le(),b=ce(g);ga(b,o,y=>{var m=le(),w=ce(m);Je(w,Qe(t),{get builder(){return R(a)}},null),W(y,m)},y=>{var m=rl();va(m,B=>u(B),()=>u());let w;var A=br(m);Je(A,Qe(t),{get builder(){return R(a)}},null),vr(()=>w=nn(m,w,{...R(a),...n},!0,"")),Fu(m,B=>R(a).action(B)),Lu("m-mousedown",m,d,!1),W(y,m)}),W(e,g),At()}function sl(e,t){const r=Ye(t,["children","$$slots","$$events"]),n=Ye(r,["class"]);Et(t,!1);let s=$e(t,"class",8,()=>{});Tt();var i=le(),a=ce(i),o=rt(()=>_r("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s()));nl(a,An({get class(){return R(o)}},()=>n,{children:(u,l)=>{var d=le(),h=ce(d);Je(h,Qe(t),{},null),W(u,d)},$$slots:{default:!0}})),W(e,i),At()}function is(e,t,r){return e[t]=r,"skip"}function il(e,t){return t.value!==void 0&&typeof t.value!="object"&&t.path.length<e.length}function mt(e,t,r={}){r.modifier||(r.modifier=s=>il(t,s)?void 0:s.value);const n=it(e,t,r.modifier);if(n)return r.value===void 0||r.value(n.value)?n:void 0}function it(e,t,r){if(!t.length)return;const n=[t[0]];let s=e;for(;s&&n.length<t.length;){const a=n[n.length-1],o=r?r({parent:s,key:String(a),value:s[a],path:n.map(u=>String(u)),isLeaf:!1,set:u=>is(s,a,u)}):s[a];if(o===void 0)return;s=o,n.push(t[n.length])}if(!s)return;const i=t[t.length-1];return{parent:s,key:String(i),value:s[i],path:t.map(a=>String(a)),isLeaf:!0,set:a=>is(s,i,a)}}function ct(e,t,r=[]){for(const n in e){const s=e[n],i=s===null||typeof s!="object",a={parent:e,key:n,value:s,path:r.concat([n]),isLeaf:i,set:u=>is(e,n,u)},o=t(a);if(o==="abort")return o;if(o==="skip")continue;if(!i){const u=ct(s,t,a.path);if(u==="abort")return u}}}function al(e,t){return e===t||e.size===t.size&&[...e].every(r=>t.has(r))}function yi(e,t){const r=new Map;function n(a,o){return a instanceof Date&&o instanceof Date&&a.getTime()!==o.getTime()||a instanceof Set&&o instanceof Set&&!al(a,o)||a instanceof File&&o instanceof File&&a!==o}function s(a){return a instanceof Date||a instanceof Set||a instanceof File}function i(a,o){const u=o?it(o,a.path):void 0;function l(){return r.set(a.path.join(" "),a.path),"skip"}if(s(a.value)&&(!s(u==null?void 0:u.value)||n(a.value,u.value)))return l();a.isLeaf&&(!u||a.value!==u.value)&&l()}return ct(e,a=>i(a,t)),ct(t,a=>i(a,e)),Array.from(r.values())}function tt(e,t,r){const n=typeof r=="function";for(const s of t){const i=it(e,s,({parent:a,key:o,value:u})=>((u===void 0||typeof u!="object")&&(a[o]={}),a[o]));i&&(i.parent[i.key]=n?r(s,i):r)}}function Ht(e){return e.toString().split(/[[\].]+/).filter(t=>t)}function Kt(e){return e.reduce((t,r)=>{const n=String(r);return typeof r=="number"||/^\d+$/.test(n)?t+=`[${n}]`:t?t+=`.${n}`:t+=n,t},"")}var ol=fr;function fr(e){let t=e;var r={}.toString.call(e).slice(8,-1);if(r=="Set")return new Set([...e].map(s=>fr(s)));if(r=="Map")return new Map([...e].map(s=>[fr(s[0]),fr(s[1])]));if(r=="Date")return new Date(e.getTime());if(r=="RegExp")return RegExp(e.source,ul(e));if(r=="Array"||r=="Object"){t=Array.isArray(e)?[]:{};for(var n in e)t[n]=fr(e[n])}return t}function ul(e){if(typeof e.source.flags=="string")return e.source.flags;var t=[];return e.global&&t.push("g"),e.ignoreCase&&t.push("i"),e.multiline&&t.push("m"),e.sticky&&t.push("y"),e.unicode&&t.push("u"),t.join("")}function Ae(e){return e&&typeof e=="object"?ol(e):e}class ae extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ae.prototype)}}function ll(e,t){var s;const r={};function n(i){if("_errors"in r||(r._errors=[]),!Array.isArray(r._errors))if(typeof r._errors=="string")r._errors=[r._errors];else throw new ae("Form-level error was not an array.");r._errors.push(i.message)}for(const i of e){if(!i.path||i.path.length==1&&!i.path[0]){n(i);continue}const o=!/^\d$/.test(String(i.path[i.path.length-1]))&&((s=mt(t,i.path.filter(h=>/\D/.test(String(h)))))==null?void 0:s.value),u=it(r,i.path,({value:h,parent:x,key:g})=>(h===void 0&&(x[g]={}),x[g]));if(!u){n(i);continue}const{parent:l,key:d}=u;o?(d in l||(l[d]={}),"_errors"in l[d]?l[d]._errors.push(i.message):l[d]._errors=[i.message]):d in l?l[d].push(i.message):l[d]=[i.message]}return r}function gi(e,t,r){return r?e:(ct(t,n=>{Array.isArray(n.value)&&n.set(void 0)}),ct(e,n=>{!Array.isArray(n.value)&&n.value!==void 0||tt(t,[n.path],n.value)}),t)}function cl(e){return $a(e,[])}function $a(e,t){return Object.entries(e).filter(([,n])=>n!==void 0).flatMap(([n,s])=>{if(Array.isArray(s)&&s.length>0){const i=t.concat([n]);return{path:Kt(i),messages:s}}else return $a(e[n],t.concat([n]))})}function vi(e){!e.flashMessage||!wa||as(e)&&(document.cookie=`flash=; Max-Age=0; Path=${e.flashMessage.cookiePath??"/"};`)}function as(e){return!e.flashMessage||!wa?!1:e.syncFlashMessage}function dl(e){const t=JSON.parse(e);return t.data&&(t.data=Mu(t.data)),t}function bi(e){return HTMLElement.prototype.cloneNode.call(e)}function fl(e,t=()=>{}){const r=async({action:s,result:i,reset:a=!0,invalidateAll:o=!0})=>{i.type==="success"&&(a&&HTMLFormElement.prototype.reset.call(e),o&&await da()),(location.origin+location.pathname===s.origin+s.pathname||i.type==="redirect"||i.type==="error")&&en(i)};async function n(s){var b,y,m,w;if(((b=s.submitter)!=null&&b.hasAttribute("formmethod")?s.submitter.formMethod:bi(e).method)!=="post")return;s.preventDefault();const a=new URL((y=s.submitter)!=null&&y.hasAttribute("formaction")?s.submitter.formAction:bi(e).action),o=new FormData(e),u=(m=s.submitter)==null?void 0:m.getAttribute("name");u&&o.append(u,((w=s.submitter)==null?void 0:w.getAttribute("value"))??"");const l=new AbortController;let d=!1;const x=await t({action:a,cancel:()=>d=!0,controller:l,formData:o,formElement:e,submitter:s.submitter})??r;if(d)return;let g;try{const A=await fetch(a,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:o,signal:l.signal});g=dl(await A.text()),g.type==="error"&&(g.status=A.status)}catch(A){if((A==null?void 0:A.name)==="AbortError")return;g={type:"error",error:A}}x({action:a,formData:o,formElement:e,update:A=>r({action:a,result:g,reset:A==null?void 0:A.reset,invalidateAll:A==null?void 0:A.invalidateAll}),result:g})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",n)}}}const xa="noCustomValidity";async function _i(e,t){"setCustomValidity"in e&&e.setCustomValidity(""),!(xa in e.dataset)&&ka(e,t)}function hl(e,t){for(const r of e.querySelectorAll("input,select,textarea,button")){if(xa in r.dataset)continue;const n=it(t,Ht(r.name));if(ka(r,n==null?void 0:n.value),n!=null&&n.value)return}}function ka(e,t){const r=t&&t.length?t.join(`
`):"";e.setCustomValidity(r),r&&e.reportValidity()}const pl=(e,t=0)=>{const r=e.getBoundingClientRect();return r.top>=t&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},ml=(e,t=1.125,r="smooth")=>{const i=e.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*t);window.scrollTo({left:0,top:i,behavior:r})},yl=["checkbox","radio","range","file"];function wi(e){const t=!!e&&(e instanceof HTMLSelectElement||e instanceof HTMLInputElement&&yl.includes(e.type)),r=!!e&&e instanceof HTMLSelectElement&&e.multiple,n=!!e&&e instanceof HTMLInputElement&&e.type=="file";return{immediate:t,multiple:r,file:n}}var ye;(function(e){e[e.Idle=0]="Idle",e[e.Submitting=1]="Submitting",e[e.Delayed=2]="Delayed",e[e.Timeout=3]="Timeout"})(ye||(ye={}));const gl=new Set;function vl(e,t,r){let n=ye.Idle,s,i;const a=gl;function o(){u(),d(n!=ye.Delayed?ye.Submitting:ye.Delayed),s=window.setTimeout(()=>{s&&n==ye.Submitting&&d(ye.Delayed)},r.delayMs),i=window.setTimeout(()=>{i&&n==ye.Delayed&&d(ye.Timeout)},r.timeoutMs),a.add(u)}function u(){clearTimeout(s),clearTimeout(i),s=i=0,a.delete(u),d(ye.Idle)}function l(){a.forEach(m=>m()),a.clear()}function d(m){n=m,t.submitting.set(n>=ye.Submitting),t.delayed.set(n>=ye.Delayed),t.timeout.set(n>=ye.Timeout)}const h=e;function x(m){const w=m.target;r.selectErrorText&&w.select()}function g(){r.selectErrorText&&h.querySelectorAll("input").forEach(m=>{m.addEventListener("invalid",x)})}function b(){r.selectErrorText&&h.querySelectorAll("input").forEach(m=>m.removeEventListener("invalid",x))}const y=e;{g();const m=w=>{w.clearAll?l():u(),w.cancelled||setTimeout(()=>os(y,r),1)};return Xr(()=>{b(),m({cancelled:!0})}),{submitting(){o()},completed:m,scrollToFirstError(){setTimeout(()=>os(y,r),1)},isSubmitting:()=>n===ye.Submitting||n===ye.Delayed}}}const os=async(e,t)=>{if(t.scrollToError=="off")return;const r=t.errorSelector;if(!r)return;await ss();let n;if(n=e.querySelector(r),!n)return;n=n.querySelector(r)??n;const s=t.stickyNavbar?document.querySelector(t.stickyNavbar):null;typeof t.scrollToError!="string"?n.scrollIntoView(t.scrollToError):pl(n,(s==null?void 0:s.offsetHeight)??0)||ml(n,void 0,t.scrollToError);function i(o){return typeof t.autoFocusOnError=="boolean"?t.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(o)}if(!i(navigator.userAgent))return;let a;if(a=n,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(a.tagName)||(a=a.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),a)try{a.focus({preventScroll:!0}),t.selectErrorText&&a.tagName=="INPUT"&&a.select()}catch{}};function sn(e,t,r){const n=it(e,t,({parent:s,key:i,value:a})=>(a===void 0&&(s[i]=/\D/.test(i)?{}:[]),s[i]));if(n){const s=r(n.value);n.parent[n.key]=s}return e}function bl(e,t,r){const n=e.form,s=Ht(t),i=Ns(n,a=>{const o=it(a,s);return o==null?void 0:o.value});return{subscribe(...a){const o=i.subscribe(...a);return()=>o()},update(a,o){n.update(u=>sn(u,s,a),o??r)},set(a,o){n.update(u=>sn(u,s,()=>a),o??r)}}}function _l(e,t){const r="form"in e;if(!r&&(t==null?void 0:t.taint)!==void 0)throw new ae("If options.taint is set, the whole superForm object must be used as a proxy.");return r}function Qr(e,t,r){const n=Ht(t);if(_l(e,r))return bl(e,t,r);const s=Ns(e,i=>{const a=it(i,n);return a==null?void 0:a.value});return{subscribe(...i){const a=s.subscribe(...i);return()=>a()},update(i){e.update(a=>sn(a,n,i))},set(i){e.update(a=>sn(a,n,()=>i))}}}function us(e){let t={};const r=Array.isArray(e);for(const[n,s]of Object.entries(e))!s||typeof s!="object"||(r?t={...t,...us(s)}:t[n]=us(s));return t}const Yr=new WeakMap,qt=new WeakMap,Sa=e=>{console.warn("Unhandled error caught by Superforms, use onError event to handle it:",e.result.error)},wl={applyAction:!0,invalidateAll:!0,resetForm:!0,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:!1,onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:Sa,dataType:"form",validators:void 0,customValidity:!1,clearOnSubmit:"message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",SPA:void 0,validationMethod:"auto"};function $l(e){return`Duplicate form id's found: "${e}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set the warnings.duplicateId option to false in superForm to disable this warning. More information: https://superforms.rocks/concepts/multiple-forms`}let Ea=!1;try{SUPERFORMS_LEGACY&&(Ea=!0)}catch{}let Ft=!1;try{globalThis.STORIES&&(Ft=!0)}catch{}function ig(e,t){var hi;let r,n=t??{},s;{if((n.legacy??Ea)&&(n.resetForm===void 0&&(n.resetForm=!1),n.taintedMessage===void 0&&(n.taintedMessage=!0)),Ft&&n.applyAction===void 0&&(n.applyAction=!1),typeof n.SPA=="string"&&(n.invalidateAll===void 0&&(n.invalidateAll=!1),n.applyAction===void 0&&(n.applyAction=!1)),s=n.validators,n={...wl,...n},(n.SPA===!0||typeof n.SPA=="object")&&n.validators===void 0&&console.warn("No validators set for superForm in SPA mode. Add a validation adapter to the validators option, or set it to false to disable this warning."),!e)throw new ae("No form data sent to superForm. Make sure the output from superValidate is used (usually data.form) and that it's not null or undefined. Alternatively, an object with default values for the form can also be used, but then constraints won't be available.");l(e)===!1&&(e={id:n.id??Math.random().toString(36).slice(2,10),valid:!1,posted:!1,errors:{},data:e,shape:us(e)}),e=e;const f=e.id=n.id??e.id,p=cr(dr)??(Ft?{}:void 0);if(((hi=n.warnings)==null?void 0:hi.duplicateId)!==!1)if(!Yr.has(p))Yr.set(p,new Set([f]));else{const v=Yr.get(p);v!=null&&v.has(f)?console.warn($l(f)):v==null||v.add(f)}if(qt.has(e)||qt.set(e,e),r=qt.get(e),e=Ae(r),Xr(()=>{var v;xu(),yu(),Eu();for(const $ of Object.values(Le))$.length=0;(v=Yr.get(p))==null||v.delete(f)}),n.dataType!=="json"){const v=($,E)=>{if(!(!E||typeof E!="object")){if(Array.isArray(E))E.length>0&&v($,E[0]);else if(!(E instanceof Date)&&!(E instanceof File)&&!(E instanceof FileList))throw new ae(`Object found in form field "${$}". Set the dataType option to "json" and add use:enhance to use nested data structures. More information: https://superforms.rocks/concepts/nested-data`)}};for(const[$,E]of Object.entries(e.data))v($,E)}}const i={formId:e.id,form:Ae(e.data),constraints:e.constraints??{},posted:e.posted,errors:Ae(e.errors),message:Ae(e.message),tainted:void 0,valid:e.valid,submitting:!1,shape:e.shape},a=i,o=ee(n.id??e.id);function u(f){return Object.values(f).filter(v=>l(v)!==!1)}function l(f){return!f||typeof f!="object"||!("valid"in f&&"errors"in f&&typeof f.valid=="boolean")?!1:"id"in f&&typeof f.id=="string"?f.id:!1}const d=ee(e.data),h={subscribe:d.subscribe,set:(f,p={})=>{const v=Ae(f);return ui(v,p.taint??!0),d.set(v)},update:(f,p={})=>d.update(v=>{const $=f(v);return ui($,p.taint??!0),$})};function x(){return n.SPA===!0||typeof n.SPA=="object"}async function g(f={}){const p=f.formData??a.form;let v={},$;const E=f.adapter??n.validators;if(typeof E=="object"){if(E!=s&&!("jsonSchema"in E))throw new ae('Client validation adapter found in options.validators. A full adapter must be used when changing validators dynamically, for example "zod" instead of "zodClient".');if($=await E.validate(p),!$.success)v=ll($.issues,E.shape??a.shape??{});else if(f.recheckValidData!==!1)return g({...f,recheckValidData:!1})}else $={success:!0,data:{}};const z={...a.form,...p,...$.success?$.data:{}};return{valid:$.success,posted:!1,errors:v,data:z,constraints:a.constraints,message:void 0,id:a.formId,shape:a.shape}}function b(f){if(!n.onChange||!f.paths.length||f.type=="blur")return;let p;const v=f.paths.map(Kt);f.type&&f.paths.length==1&&f.formElement&&f.target instanceof Element?p={path:v[0],paths:v,formElement:f.formElement,target:f.target,set($,E,z){Qr({form:h},$,z).set(E)},get($){return cr(Qr(h,$))}}:p={paths:v,target:void 0,set($,E,z){Qr({form:h},$,z).set(E)},get($){return cr(Qr(h,$))}},n.onChange(p)}async function y(f,p=!1,v){f&&(n.validators=="clear"&&fe.update(z=>(tt(z,f.paths,void 0),z)),setTimeout(()=>b(f)));let $=!1;if(p||(n.validationMethod=="onsubmit"||n.validationMethod=="submit-only"||n.validationMethod=="onblur"&&(f==null?void 0:f.type)=="input"||n.validationMethod=="oninput"&&(f==null?void 0:f.type)=="blur")&&($=!0),$||!f||!n.validators||n.validators=="clear"){if(f!=null&&f.paths){const z=(f==null?void 0:f.formElement)??ur();z&&m(z,f.paths)}return}const E=await g({adapter:v});return E.valid&&(f.immediate||f.type!="input")&&h.set(E.data,{taint:"ignore"}),await ss(),w(E.errors,f,p),E}function m(f,p){const v=new Map;if(n.customValidity&&f)for(const $ of p){const E=CSS.escape(Kt($)),z=f.querySelector(`[name="${E}"]`);if(z){const pe="validationMessage"in z?String(z.validationMessage):"";v.set($.join("."),{el:z,message:pe}),_i(z,void 0)}}return v}async function w(f,p,v){const{type:$,immediate:E,multiple:z,paths:pe}=p,De=a.errors,re={};let Ve=new Map;const Ne=p.formElement??ur();Ne&&(Ve=m(Ne,p.paths)),ct(f,Ee=>{if(!Array.isArray(Ee.value))return;const Re=[...Ee.path];Re[Re.length-1]=="_errors"&&Re.pop();const Dt=Re.join(".");function ut(){if(tt(re,[Ee.path],Ee.value),n.customValidity&&Ct&&Ve.has(Dt)){const{el:P,message:D}=Ve.get(Dt);D!=Ee.value&&(_i(P,Ee.value),Ve.clear())}}if(v)return ut();const Hr=Ee.path[Ee.path.length-1]=="_errors",Ct=Ee.value&&pe.some(P=>Hr?Re&&P&&Re.length>0&&Re[0]==P[0]:Dt==P.join("."));if(Ct&&n.validationMethod=="oninput"||E&&!z&&Ct)return ut();if(z){const P=mt(cr(fe),Ee.path.slice(0,-1));if(P!=null&&P.value&&typeof(P==null?void 0:P.value)=="object"){for(const D of Object.values(P.value))if(Array.isArray(D))return ut()}}const F=mt(De,Ee.path);if(F&&F.key in F.parent)return ut();if(Hr){if(n.validationMethod=="oninput"||$=="blur"&&_u(Kt(Ee.path.slice(0,-1))))return ut()}else if($=="blur"&&Ct)return ut()}),fe.set(re)}function A(f,p={}){return p.keepFiles&&ct(a.form,v=>{if(!(v.parent instanceof FileList)&&(v.value instanceof File||v.value instanceof FileList)){const $=mt(f,v.path);(!$||!($.key in $.parent))&&tt(f,[v.path],v.value)}}),h.set(f,p)}function B(f,p){return f&&p&&n.resetForm&&(n.resetForm===!0||n.resetForm())}async function U(f,p){f.valid&&p&&B(f.valid,p)?Ce({message:f.message,posted:!0}):Wr({form:f,untaint:p,keepFiles:!0,skipFormData:n.invalidateAll=="force"}),Le.onUpdated.length&&await ss();for(const v of Le.onUpdated)v({form:f})}function Ce(f={}){f.newState&&(r.data={...r.data,...f.newState});const p=Ae(r);p.data={...p.data,...f.data},f.id!==void 0&&(p.id=f.id),Wr({form:p,untaint:!0,message:f.message,keepFiles:!1,posted:f.posted,resetted:!0})}async function Ie(f){if(f.type=="error")throw new ae(`ActionResult of type "${f.type}" cannot be passed to update function.`);if(f.type=="redirect"){B(!0,!0)&&Ce({posted:!0});return}if(typeof f.data!="object")throw new ae("Non-object validation data returned from ActionResult.");const p=u(f.data);if(!p.length)throw new ae("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const v of p)v.id===a.formId&&await U(v,f.status>=200&&f.status<300)}const G=ee(i.message),_e=ee(i.constraints),ke=ee(i.posted),Vr=ee(i.shape),Ur=ee(e.errors),fe={subscribe:Ur.subscribe,set(f,p){return Ur.set(gi(f,a.errors,p==null?void 0:p.force))},update(f,p){return Ur.update(v=>gi(f(v),a.errors,p==null?void 0:p.force))},clear:()=>fe.set({})};let J=null;function Dn(f){var p;J&&f&&Object.keys(f).length==1&&((p=f.paths)!=null&&p.length)&&J.target&&J.target instanceof HTMLInputElement&&J.target.type.toLowerCase()=="file"?J.paths=f.paths:J=f,setTimeout(()=>{y(J)},0)}function mu(f,p,v,$,E){J===null&&(J={paths:[]}),J.type=f,J.immediate=p,J.multiple=v,J.formElement=$,J.target=E}function si(){return(J==null?void 0:J.paths)??[]}function yu(){J=null}const he={defaultMessage:"Leave page? Changes that you made may not be saved.",state:ee(),message:n.taintedMessage,clean:Ae(e.data),forceRedirection:!1};function ii(){return n.taintedMessage&&!a.submitting&&!he.forceRedirection&&oi()}function ai(f){if(!ii())return;f.preventDefault(),f.returnValue="";const{taintedMessage:p}=n,$=typeof p=="function"||p===!0?he.defaultMessage:p;return(f||window.event).returnValue=$||he.defaultMessage,$}async function gu(f){if(!ii())return;const{taintedMessage:p}=n,v=typeof p=="function";if(v&&f.cancel(),f.type==="leave")return;const $=v||p===!0?he.defaultMessage:p;let E;try{E=v?await p():window.confirm($||he.defaultMessage)}catch{E=!1}if(E&&f.to)try{he.forceRedirection=!0,await ju(f.to.url,{...f.to.params});return}finally{he.forceRedirection=!1}else!E&&!v&&f.cancel()}function vu(){n.taintedMessage=he.message}function bu(){return he.state}function _u(f){if(!a.tainted)return!1;if(!f)return!!a.tainted;const p=mt(a.tainted,Ht(f));return!!p&&p.key in p.parent}function oi(f){if(!arguments.length)return Zr(a.tainted);if(typeof f=="boolean")return f;if(typeof f=="object")return Zr(f);if(!a.tainted||f===void 0)return!1;const p=mt(a.tainted,Ht(f));return Zr(p==null?void 0:p.value)}function Zr(f){if(!f)return!1;if(typeof f=="object"){for(const p of Object.values(f))if(Zr(p))return!0}return f===!0}function ui(f,p){if(p=="ignore")return;const v=yi(f,a.form),$=yi(f,he.clean).map(E=>E.join());v.length&&(p=="untaint-all"||p=="untaint-form"?he.state.set(void 0):he.state.update(E=>(E||(E={}),tt(E,v,(z,pe)=>{if(!$.includes(z.join()))return;const De=it(f,z),re=it(he.clean,z);return De&&re&&De.value===re.value?void 0:p===!0?!0:p==="untaint"?void 0:pe.value}),E))),Dn({paths:v})}function wu(f,p){he.state.set(f),p&&(he.clean=p)}const qn=ee(!1),li=ee(!1),ci=ee(!1),di=[he.state.subscribe(f=>i.tainted=Ae(f)),h.subscribe(f=>i.form=Ae(f)),fe.subscribe(f=>i.errors=Ae(f)),o.subscribe(f=>i.formId=f),_e.subscribe(f=>i.constraints=f),ke.subscribe(f=>i.posted=f),G.subscribe(f=>i.message=f),qn.subscribe(f=>i.submitting=f),Vr.subscribe(f=>i.shape=f)];function $u(f){di.push(f)}function xu(){di.forEach(f=>f())}let Se;function ur(){return Se}function ku(f){Se=document.createElement("form"),Se.method="POST",Se.action=f,fi(Se),document.body.appendChild(Se)}function Su(f){Se&&(Se.action=f)}function Eu(){Se!=null&&Se.parentElement&&Se.remove(),Se=void 0}const Au=Ns(fe,f=>f?cl(f):[]);n.taintedMessage=void 0;function Wr(f){const p=f.form,v=f.message??p.message;if((f.untaint||f.resetted)&&wu(typeof f.untaint=="boolean"?void 0:f.untaint,p.data),f.skipFormData!==!0&&A(p.data,{taint:"ignore",keepFiles:f.keepFiles}),G.set(v),f.resetted?fe.update(()=>({}),{force:!0}):fe.set(p.errors),o.set(p.id),ke.set(f.posted??p.posted),p.constraints&&_e.set(p.constraints),p.shape&&Vr.set(p.shape),i.valid=p.valid,n.flashMessage&&as(n)){const $=n.flashMessage.module.getFlash(dr);v&&cr($)===void 0&&$.set(v)}}const Le={onSubmit:n.onSubmit?[n.onSubmit]:[],onResult:n.onResult?[n.onResult]:[],onUpdate:n.onUpdate?[n.onUpdate]:[],onUpdated:n.onUpdated?[n.onUpdated]:[],onError:n.onError?[n.onError]:[]};window.addEventListener("beforeunload",ai),Xr(()=>{window.removeEventListener("beforeunload",ai)}),Pu(gu),$u(dr.subscribe(async f=>{Ft&&f===void 0&&(f={status:200});const p=f.status>=200&&f.status<300;if(n.applyAction&&f.form&&typeof f.form=="object"){const v=f.form;if(v.type=="error")return;for(const $ of u(v)){const E=qt.has($);$.id!==a.formId||E||(qt.set($,$),await U($,p))}}else if(f.data&&typeof f.data=="object")for(const v of u(f.data)){const $=qt.has(v);if(v.id!==a.formId||$)continue;n.invalidateAll==="force"&&(r.data=v.data);const E=B(!0,!0);Wr({form:v,untaint:p,keepFiles:!E,resetted:E})}})),typeof n.SPA=="string"&&ku(n.SPA);function fi(f,p){if(n.SPA!==void 0&&f.method=="get"&&(f.method="post"),typeof n.SPA=="string"?n.SPA.length&&f.action==document.location.href&&(f.action=n.SPA):Se=f,p){if(p.onError){if(n.onError==="apply")throw new ae('options.onError is set to "apply", cannot add any onError events.');if(p.onError==="apply")throw new ae('Cannot add "apply" as onError event in use:enhance.');Le.onError.push(p.onError)}p.onResult&&Le.onResult.push(p.onResult),p.onSubmit&&Le.onSubmit.push(p.onSubmit),p.onUpdate&&Le.onUpdate.push(p.onUpdate),p.onUpdated&&Le.onUpdated.push(p.onUpdated)}vu();let v;async function $(De){const re=wi(De.target);re.immediate&&!re.file&&await new Promise(Ve=>setTimeout(Ve,0)),v=si(),mu("input",re.immediate,re.multiple,f,De.target??void 0)}async function E(De){if(a.submitting||!v||si()!=v)return;const re=wi(De.target);re.immediate&&!re.file&&await new Promise(Ve=>setTimeout(Ve,0)),y({paths:v,immediate:re.multiple,multiple:re.multiple,type:"blur",formElement:f,target:De.target??void 0}),v=void 0}f.addEventListener("focusout",E),f.addEventListener("input",$),Xr(()=>{f.removeEventListener("focusout",E),f.removeEventListener("input",$)});const z=vl(f,{submitting:qn,delayed:li,timeout:ci},n);let pe;return fl(f,async De=>{let re,Ve=n.validators;const Ne={...De,jsonData(F){if(n.dataType!=="json")throw new ae("options.dataType must be set to 'json' to use jsonData.");re=F},validators(F){Ve=F}},Ee=Ne.cancel;let Re=!1;function Dt(F){var et;const P={...F,posted:!0},D=P.valid?200:(typeof n.SPA=="boolean"||typeof n.SPA=="string"||(et=n.SPA)==null?void 0:et.failStatus)??400,me={form:P},we=P.valid?{type:"success",status:D,data:me}:{type:"failure",status:D,data:me};setTimeout(()=>Ct({result:we}),0)}function ut(){switch(n.clearOnSubmit){case"errors-and-message":fe.clear(),G.set(void 0);break;case"errors":fe.clear();break;case"message":G.set(void 0);break}}function lr(F={resetTimers:!0}){return Re=!0,F.resetTimers&&z.isSubmitting()&&z.completed({cancelled:Re}),Ee()}if(Ne.cancel=lr,z.isSubmitting()&&n.multipleSubmits=="prevent")lr({resetTimers:!1});else{z.isSubmitting()&&n.multipleSubmits=="abort"&&pe&&pe.abort(),z.submitting(),pe=Ne.controller;for(const F of Le.onSubmit)await F(Ne)}if(Re&&n.flashMessage&&vi(n),!Re){const F=!x()&&(f.noValidate||(Ne.submitter instanceof HTMLButtonElement||Ne.submitter instanceof HTMLInputElement)&&Ne.submitter.formNoValidate);let P;const D=async()=>await g({adapter:Ve});if(ut(),F||(P=await D(),P.valid||(lr({resetTimers:!1}),Dt(P))),!Re){n.flashMessage&&(n.clearOnSubmit=="errors-and-message"||n.clearOnSubmit=="message")&&as(n)&&n.flashMessage.module.getFlash(dr).set(void 0);const me="formData"in Ne?Ne.formData:Ne.data;if(v=void 0,x())P||(P=await D()),lr({resetTimers:!1}),Dt(P);else if(n.dataType==="json"){P||(P=await D());const we=Ae(re??P.data);ct(we,ne=>{if(ne.value instanceof File){const Q="__superform_file_"+Kt(ne.path);return me.append(Q,ne.value),ne.set(void 0)}else if(Array.isArray(ne.value)&&ne.value.length&&ne.value.every(Q=>Q instanceof File)){const Q="__superform_files_"+Kt(ne.path);for(const ze of ne.value)me.append(Q,ze);return ne.set(void 0)}}),Object.keys(we).forEach(ne=>{typeof me.get(ne)=="string"&&me.delete(ne)});const et=Hr(Xu(we),n.jsonChunkSize??5e5);for(const ne of et)me.append("__superform_json",ne)}if(!me.has("__superform_id")){const we=a.formId;we!==void 0&&me.set("__superform_id",we)}typeof n.SPA=="string"&&Su(n.SPA)}}function Hr(F,P){const D=Math.ceil(F.length/P),me=new Array(D);for(let we=0,et=0;we<D;++we,et+=P)me[we]=F.substring(et,et+P);return me}async function Ct(F){var ne;let P=!1;pe=null;let D="type"in F.result&&"status"in F.result?F.result:{type:"error",status:parseInt(String(F.result.status))||500,error:F.result.error instanceof Error?F.result.error:F.result};const me=()=>P=!0,we={result:D,formEl:f,formElement:f,cancel:me},et=Ft||!x()?()=>{}:pi.subscribe(Q=>{var ze,ht;!Q||((ze=Q.from)==null?void 0:ze.route.id)===((ht=Q.to)==null?void 0:ht.route.id)||me()});for(const Q of Le.onResult)await Q(we);if(D=we.result,!P){if((D.type==="success"||D.type=="failure")&&D.data){const Q=u(D.data);if(!Q.length)throw new ae("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const ze of Q){if(ze.id!==a.formId)continue;const ht={form:ze,formEl:f,formElement:f,cancel:()=>P=!0,result:D};for(const Bn of Le.onUpdate)await Bn(ht);D=ht.result,P||(n.customValidity&&hl(f,ht.form.errors),B(ht.form.valid,D.type=="success")&&ht.formElement.querySelectorAll('input[type="file"]').forEach(Bn=>Bn.value=""))}}if(!P){if(D.type!=="error")D.type==="success"&&n.invalidateAll&&await da(),n.applyAction?await en(D):await Ie(D);else{if(n.applyAction)if(n.onError=="apply")await en(D);else{const Q={type:"failure",status:Math.floor(D.status||500),data:D};await en(Q)}if(n.onError!=="apply"){const Q={result:D,message:G};for(const ze of Le.onError)ze!=="apply"&&(ze!=Sa||!((ne=n.flashMessage)!=null&&ne.onError))&&await ze(Q)}}n.flashMessage&&D.type=="error"&&n.flashMessage.onError&&await n.flashMessage.onError({result:D,flashMessage:n.flashMessage.module.getFlash(dr)})}}if(P&&n.flashMessage&&vi(n),P||D.type!="redirect")z.completed({cancelled:P});else if(Ft)z.completed({cancelled:P,clearAll:!0});else{const Q=pi.subscribe(ze=>{ze||(setTimeout(()=>{try{Q&&Q()}catch{}}),z.isSubmitting()&&z.completed({cancelled:P,clearAll:!0}))})}et()}return Ct})}function Tu(f){const p=[];if(ct(f,$=>{if($.value instanceof File)return p.push($.path),"skip";if(Array.isArray($.value)&&$.value.length&&$.value.every(E=>E instanceof File))return p.push($.path),"skip"}),!p.length)return{data:f,paths:p};const v=Ae(f);return tt(v,p,$=>{var E;return(E=mt(r.data,$))==null?void 0:E.value}),{data:v,paths:p}}return{form:h,formId:o,errors:fe,message:G,constraints:_e,tainted:bu(),submitting:Kn(qn),delayed:Kn(li),timeout:Kn(ci),options:n,capture(){const{data:f,paths:p}=Tu(a.form);let v=a.tainted;return p.length&&(v=Ae(v)??{},tt(v,p,!1)),{valid:a.valid,posted:a.posted,errors:a.errors,data:f,constraints:a.constraints,message:a.message,id:a.formId,tainted:v,shape:a.shape}},restore:f=>{Wr({form:f,untaint:f.tainted??!0})},async validate(f,p={}){if(!n.validators)throw new ae("options.validators must be set to use the validate method.");p.update===void 0&&(p.update=!0),p.taint===void 0&&(p.taint=!1),typeof p.errors=="string"&&(p.errors=[p.errors]);let v;const $=Ht(f);"value"in p?p.update===!0||p.update==="value"?(h.update(pe=>(tt(pe,[$],p.value),pe),{taint:p.taint}),v=a.form):(v=Ae(a.form),tt(v,[$],p.value)):v=a.form;const E=await g({formData:v}),z=mt(E.errors,$);return z&&z.value&&p.errors&&(z.value=p.errors),(p.update===!0||p.update=="errors")&&fe.update(pe=>(tt(pe,[$],z==null?void 0:z.value),pe)),z==null?void 0:z.value},async validateForm(f={}){if(!n.validators&&!f.schema)throw new ae("options.validators or the schema option must be set to use the validateForm method.");const p=f.update?await y({paths:[]},!0,f.schema):g({adapter:f.schema}),v=ur();return f.update&&v&&setTimeout(()=>{v&&os(v,{...n,scrollToError:f.focusOnError===!1?"off":n.scrollToError})},1),p||g({adapter:f.schema})},allErrors:Au,posted:ke,reset(f){return Ce({message:f!=null&&f.keepMessage?a.message:void 0,data:f==null?void 0:f.data,id:f==null?void 0:f.id,newState:f==null?void 0:f.newState})},submit(f){const p=ur()?ur():f&&f instanceof HTMLElement?f.closest("form"):void 0;if(!p)throw new ae("use:enhance must be added to the form to use submit, or pass a HTMLElement inside the form (or the form itself) as an argument.");if(!p.requestSubmit)return p.submit();const v=f&&(f instanceof HTMLButtonElement&&f.type=="submit"||f instanceof HTMLInputElement&&["submit","image"].includes(f.type));p.requestSubmit(v?f:void 0)},isTainted:oi,enhance:fi}}new TextEncoder;let xl=!1;try{SUPERFORMS_LEGACY&&(xl=!0)}catch{}const kl=e=>Array.isArray(e)?e:[e],Sl=(e,t)=>{const r=[[],[]];for(const n of e)t(n)?r[0].push(n):r[1].push(n);return r},El=Array,hr=(e,t)=>e.includes(t),Me=(e,t,r)=>t===void 0?e??[]:e===void 0?t===void 0?[]:Array.isArray(t)?t:[t]:(Array.isArray(t)?e.push(...t):e.push(t),e),Aa=(e,t)=>e===void 0?[t]:(e.includes(t)||e.push(t),e),Al=(e,t)=>e.reduce((r,n)=>{const s=n[t];return r[s]??(r[s]=[]),r[s].push(n),r},{}),Tl=e=>Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e));class Ol extends Error{}const Xe=e=>gr(e,Ol),gr=(e,t=Error)=>{throw new t(e)};class Cl extends Error{constructor(){super(...arguments);c(this,"name","ParseError")}}const O=e=>gr(e,Cl);function ie(e,t){var i;const r=Array.isArray(e),n=Object.entries(e).flatMap((a,o)=>{const u=r?t(o,a[1]):t(...a,o);return Array.isArray(u[0])||u.length===0?u:[u]}),s=Object.fromEntries(n);return typeof((i=n[0])==null?void 0:i[0])=="number"?Object.values(s):s}const vt=e=>Object.entries(e),Un=e=>Object.fromEntries(e),Pe=(e,t)=>e in t,Il=class{constructor(e){Object.assign(this,e)}};class Nl extends Il{}const Ta=class{};class Oa extends Ta{}const Ca=(e,t)=>{const r={},n={};let s;for(s in e)s in t?r[s]=e[s]:n[s]=e[s];return[r,n]},Rl=(e,t)=>Ca(e,t)[0],Ia=(e,t)=>Ca(e,t)[1],Rs=e=>Object.keys(e).length===0,ls=e=>[...Object.entries(e),...Object.getOwnPropertySymbols(e).map(t=>[t,e[t]])],zl=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),Qt=Symbol("represents an uninitialized value"),Zn=(e,t)=>{t.addInitializer(function(){this[t.name]=this[t.name].bind(this)})},zs=(e,t)=>function(){const r=e.call(this);return Object.defineProperty(this,t.name,t.kind==="getter"?{value:r}:{value:()=>r,enumerable:!1}),r},Ml=e=>{let t=Qt;return()=>t===Qt?t=e():t},Na=e=>typeof e=="function"&&e.length===0,Pl=class extends Function{constructor(...e){const t=e.slice(0,-1),r=e.at(-1);try{super(...t,r)}catch(n){return Xe(`Encountered an unexpected error while compiling your definition:
                Message: ${n} 
                Source: (${e.slice(0,-1)}) => {
                    ${e.at(-1)}
                }`)}}};class Ms extends Ta{constructor(t,r){return super(),Object.assign(Object.setPrototypeOf(t.bind((r==null?void 0:r.bind)??this),this.constructor.prototype),r==null?void 0:r.attach)}}const jl=Ml(()=>{try{return new Function("return false")()}catch{return!0}}),qr=(e,t)=>ft(e)===t,ft=e=>{const t=typeof e;return t==="object"?e===null?"null":"object":t==="function"?"object":t},Ll={boolean:"boolean",null:"null",undefined:"undefined"},Dl={bigint:"a bigint",number:"a number",object:"an object",string:"a string",symbol:"a symbol"},Ra={...Dl,...Ll},Yt={Array,Date,Error,Function,Map,RegExp,Set,String,Number,Boolean,WeakMap,WeakSet,Promise},Ps=e=>{var n;let t=Object.getPrototypeOf(e);for(;t!=null&&t.constructor&&(!Pe(t.constructor.name,Yt)||!(e instanceof Yt[t.constructor.name]));)t=Object.getPrototypeOf(t);const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;if(!(r===void 0||r==="Object"))return r},cs=e=>typeof e=="object"&&e!==null?Ps(e)??"object":ft(e),Fe=e=>Array.isArray(e),ql={Array:"an array",Function:"a function",Date:"a Date",RegExp:"a RegExp",Error:"an Error",Map:"a Map",Set:"a Set",String:"a String object",Number:"a Number object",Boolean:"a Boolean object",Promise:"a Promise",WeakMap:"a WeakMap",WeakSet:"a WeakSet"},za=e=>{const t=Object(e).name??null;return t&&Pe(t,Yt)&&Yt[t]===e?t:null},Nt=e=>{const t=[];let r=e;for(;r!==Object.prototype&&r!==null&&r!==void 0;){for(const n of Object.getOwnPropertyNames(r))n!=="constructor"&&!t.includes(n)&&t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n);r=Object.getPrototypeOf(r)}return t},Bl={bigint:Nt(0n),boolean:Nt(!1),null:[],number:Nt(0),object:[],string:Nt(""),symbol:Nt(Symbol()),undefined:[]},Kl=e=>[...Bl[e]],$i=(e,t)=>{let r=e.prototype;for(;r!==null;){if(r===t.prototype)return!0;r=Object.getPrototypeOf(r)}return!1},Ma=e=>typeof e=="string"?JSON.stringify(e):typeof e=="bigint"?`${e}n`:`${e}`,Pa={};globalThis.$ark=Pa;const xi=new WeakMap,Wn={},an=e=>{const t=xi.get(e);if(t)return t;let r=Vl(e);return Wn[r]?r=`${r}${Wn[r]++}`:Wn[r]=1,Pa[r]=e,xi.set(e,r),r},Fl=e=>`$ark.${e}`,Ot=e=>Fl(an(e)),on=e=>/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(e),js=e=>qr(e,"object")||typeof e=="symbol"?Ot(e):Ma(e),Vl=e=>{switch(typeof e){case"object":{if(e===null)break;const t=Ps(e)??"object";return t[0].toLowerCase()+t.slice(1)}case"function":return on(e.name)?e.name:"fn";case"symbol":return e.description&&on(e.description)?e.description:"symbol"}return Xe(`Unexpected attempt to register serializable value of type ${ft(e)}`)};class ja extends Oa{constructor(...r){super();c(this,"argNames");c(this,"body","");c(this,"indentation",0);this.argNames=r;for(const n of r){if(n in this)throw new Error(`Arg name '${n}' would overwrite an existing property on FunctionBody`);this[n]=n}}indent(){return this.indentation+=4,this}dedent(){return this.indentation-=4,this}prop(r,n=!1){return La(r,n)}index(r,n=!1){return Da(`${r}`,n)}line(r){return this.body+=`${" ".repeat(this.indentation)}${r}
`,this}const(r,n){return this.line(`const ${r} = ${n}`),this}let(r,n){return this.line(`let ${r} = ${n}`)}set(r,n){return this.line(`${r} = ${n}`)}if(r,n){return this.block(`if (${r})`,n)}elseIf(r,n){return this.block(`else if (${r})`,n)}else(r){return this.block("else",r)}for(r,n,s=0){return this.block(`for (let i = ${s}; ${r}; i++)`,n)}forIn(r,n){return this.block(`for (const k in ${r})`,n)}block(r,n,s=""){return this.line(`${r} {`),this.indent(),n(this),this.dedent(),this.line(`}${s}`)}return(r=""){return this.line(`return ${r}`)}compile(){return new Pl(...this.argNames,this.body)}}const La=(e,t=!1)=>typeof e=="string"&&on(e)?`${t?"?":""}.${e}`:Da(Ul(e),t),Ul=e=>typeof e=="symbol"?Ot(e):JSON.stringify(e),Da=(e,t=!1)=>`${t?"?.":""}[${e}]`;var ki;(function(e){class t{}e.Kind=t;class r{}e.Instantiable=r,e.reify=s=>s.hkt;class n{}e.UnaryKind=n,e.pipe=(...s)=>i=>s.reduce((a,o)=>o.hkt(a),i)})(ki||(ki={}));const ds=/^(?!^-0$)-?(?:0|[1-9]\d*)(?:\.\d*[1-9])?$/,Zl=ds.test.bind(ds),Wl=/^-?\d*\.?\d*$/,Hl=e=>e.length!==0&&Wl.test(e),un=/^(?:0|(?:-?[1-9]\d*))$/,qa=un.test.bind(un),fs=/^-?\d+$/,Jl=fs.test.bind(fs),Ba={number:"a number",bigint:"a bigint",integer:"an integer"},Ka=(e,t)=>`'${e}' was parsed as ${Ba[t]} but could not be narrowed to a literal value. Avoid unnecessary leading or trailing zeros and other abnormal notation`,Ql=(e,t)=>t==="number"?Zl(e):qa(e),Yl=(e,t)=>t==="number"?Number(e):Number.parseInt(e),Gl=(e,t)=>t==="number"?Hl(e):Jl(e),Fa=(e,t)=>Va(e,"number",t),Xl=(e,t)=>Va(e,"integer",t),Va=(e,t,r)=>{const n=Yl(e,t);return!Number.isNaN(n)&&Gl(e,t)?r!=null&&r.strict?Ql(e,t)?n:O(Ka(e,t)):n:r!=null&&r.errorOnFail?O((r==null?void 0:r.errorOnFail)===!0?`Failed to parse ${Ba[t]} from '${e}'`:r==null?void 0:r.errorOnFail):void 0},ec=e=>{if(e[e.length-1]!=="n")return;const t=e.slice(0,-1);let r;try{r=BigInt(t)}catch{return}if(un.test(t))return r;if(fs.test(t))return O(Ka(e,"bigint"))},de=(e,t)=>{switch(ft(e)){case"object":return e instanceof Date?e.toDateString():JSON.stringify(hs(e,ln,[]),null,t);case"symbol":return ln.onSymbol(e);default:return Ma(e)}},ln={onCycle:()=>"(cycle)",onSymbol:e=>`Symbol(${an(e)})`,onFunction:e=>`Function(${an(e)})`},hs=(e,t,r)=>{switch(ft(e)){case"object":{if(typeof e=="function")return ln.onFunction(e);if(r.includes(e))return"(cycle)";const n=[...r,e];if(Array.isArray(e))return e.map(i=>hs(i,t,n));if(e instanceof Date)return e.toDateString();const s={};for(const i in e)s[i]=hs(e[i],t,n);return s}case"symbol":return ln.onSymbol(e);case"bigint":return`${e}n`;case"undefined":return t.onUndefined??"undefined";default:return e}},tc=e=>e[0].toUpperCase()+e.slice(1),Ua=e=>ie(e,(t,r)=>[t,Fe(r)?[...r]:r]),rc=e=>{const t=e.reduce((r,n)=>typeof n=="string"&&on(n)?`${r}.${n}`:`${r}[${de(n)}]`,"");return t[0]==="."?t.slice(1):t},Lt=Symbol("ArkTypeInternalKind"),V=(e,t)=>(e==null?void 0:e[Lt])===t,cn=e=>V(e,"root")||V(e,"constraint"),nc=["unit","proto","domain"],Ls=["required","optional","index","sequence"],Za=["regex","divisor","exactLength","max","min","maxLength","minLength","before","after"],Ds=[...Za,...Ls,"structure","predicate"],qs=["alias","union","morph","unit","intersection","proto","domain"],sc=[...qs,...Ds],Wa=ie(Ds,(e,t)=>[t,1]),ic=ie([...Ls,"undeclared"],(e,t)=>[t,1]),Ha=ie(sc,(e,t)=>[t,e]),tn=e=>typeof e=="string"&&e in Ha,dn=e=>Ha[e],Ja=e=>qs.slice(dn(e)+1),Bs=e=>typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e===null?e:js(e),Ks=e=>{let t="{ ";for(const[r,n]of Object.entries(e))t+=`${r}: ${js(n)}, `;return t+" }"},H=e=>{var r,n,s,i;const t=e;return t.hasAssociatedError&&((r=t.defaults).expected??(r.expected=a=>"description"in a?a.description:t.defaults.description(a)),(n=t.defaults).actual??(n.actual=a=>de(a)),(s=t.defaults).problem??(s.problem=a=>`must be ${a.expected}${a.actual?` (was ${a.actual})`:""}`),(i=t.defaults).message??(i.message=a=>{if(a.path.length===0)return a.problem;const o=`${a.propString} ${a.problem}`;return o[0]==="["?`value at ${o}`:o})),t},ac={},oc=(e,t)=>{const r={...e};let n;for(n in t)r[n]=tn(n)?{...e[n],...t[n]}:t[n];return r};var Dm;class ps extends Oa{constructor(r,n){super();c(this,"input");c(this,Dm,"error");c(this,"path");c(this,"data");c(this,"nodeConfig");this.input=r,zl(this,r);const s=n.data;r.code==="union"&&(r.errors=r.errors.flatMap(i=>i.hasCode("union")?i.errors:i)),this.nodeConfig=n.config[this.code],this.path=r.path??[...n.path],r.relativePath&&this.path.push(...r.relativePath),this.data="data"in r?r.data:s}hasCode(r){return this.code===r}get propString(){return rc(this.path)}get expected(){var r,n;return this.input.expected??((n=(r=this.nodeConfig).expected)==null?void 0:n.call(r,this.input))}get actual(){var r,n;return this.input.actual!==void 0?this.input.actual:(n=(r=this.nodeConfig).actual)==null?void 0:n.call(r,this.data)}get problem(){return this.input.problem??this.nodeConfig.problem(this)}get message(){return this.input.message??this.nodeConfig.message(this)}toString(){return this.message}throw(){throw this}}Dm=Lt;class wr extends El{constructor(r){super();c(this,"ctx");c(this,"byPath",{});c(this,"count",0);c(this,"mutable",this);this.ctx=r}add(r){const n=this.byPath[r.propString];if(n){const s=new ps({code:"intersection",errors:n.hasCode("intersection")?[...n.errors,r]:[n,r]},this.ctx),i=this.indexOf(n);this.mutable[i===-1?this.length:i]=s,this.byPath[r.propString]=s}else this.byPath[r.propString]=r,this.mutable.push(r);this.count++}get summary(){return this.toString()}get message(){return this.toString()}toString(){return this.join(`
`)}throw(){throw this}}class Si{constructor(t,r){c(this,"root");c(this,"config");c(this,"path",[]);c(this,"queuedMorphs",[]);c(this,"errors",new wr(this));c(this,"branches",[]);c(this,"seen",{});this.root=t,this.config=r}get currentBranch(){return this.branches.at(-1)}queueMorphs(t){var n;const r={path:[...this.path],morphs:t};((n=this.currentBranch)==null?void 0:n.queuedMorphs.push(r))??this.queuedMorphs.push(r)}finalize(){if(this.hasError())return this.errors;if(this.queuedMorphs.length)for(let t=0;t<this.queuedMorphs.length;t++){const{path:r,morphs:n}=this.queuedMorphs[t],s=r.at(-1);let i;if(s!==void 0){i=this.root;for(let a=0;a<r.length-1;a++)i=i[r[a]]}this.path=r;for(const a of n){const o=a(i===void 0?this.root:i[s],this);if(o instanceof wr)return o;if(this.hasError())return this.errors;if(o instanceof ps)return this.error(o),this.errors;i===void 0?this.root=o:i[s]=o}}return this.root}get currentErrorCount(){return this.currentBranch?this.currentBranch.error?1:0:this.errors.count}hasError(){return this.currentErrorCount!==0}get failFast(){return this.branches.length!==0}error(t){const r=typeof t=="object"?t.code?t:{...t,code:"predicate"}:{code:"predicate",expected:t},n=new ps(r,this);return this.currentBranch?this.currentBranch.error=n:this.errors.add(n),n}get data(){let t=this.root;for(const r of this.path)t=t==null?void 0:t[r];return t}invalid(t){return this.error(t),!1}pushBranch(){this.branches.push({error:void 0,queuedMorphs:[]})}popBranch(){return this.branches.pop()}}class Qa extends Ms{constructor(r){super((n,s)=>{if(!this.includesMorph&&!this.allowsRequiresContext&&this.allows(n))return n;if(s)return this.traverseApply(n,s);const i=new Si(n,this.$.resolvedConfig);return this.traverseApply(n,i),i.finalize()},{attach:r});c(this,"attachments");c(this,"qualifiedId",`${this.$.id}${this.id}`);c(this,"includesMorph",this.kind==="morph"||this.hasKind("optional")&&this.hasDefault()||this.hasKind("structure")&&this.undeclared==="delete"||this.children.some(r=>r.includesMorph));c(this,"allowsRequiresContext",this.hasKind("predicate")&&this.inner.predicate.length!==1||this.kind==="alias"||this.children.some(r=>r.allowsRequiresContext));c(this,"referencesById",this.children.reduce((r,n)=>Object.assign(r,n.referencesById),{[this.id]:this}));c(this,"precedence",dn(this.kind));c(this,"jit",!1);c(this,"allows",r=>this.allowsRequiresContext?this.traverseAllows(r,new Si(r,this.$.resolvedConfig)):this.traverseAllows(r));c(this,"_in");c(this,"_out");c(this,"_description");this.attachments=r}get references(){return Object.values(this.referencesById)}traverse(r){return this(r)}get in(){return this._in??(this._in=this.getIo("in")),this._in}get out(){return this._out??(this._out=this.getIo("out")),this._out}get description(){var r,n;return this._description??(this._description=this.inner.description??((n=(r=this.$.resolvedConfig[this.kind]).description)==null?void 0:n.call(r,this))),this._description}getIo(r){if(!this.includesMorph)return this;const n={};for(const[s,i]of this.entries){const a=this.impl.keys[s];if(!a.meta)if(a.child){const o=i;n[s]=Fe(o)?o.map(u=>u[r]):o[r]}else n[s]=i}return this.$.node(this.kind,n)}toJSON(){return this.json}toString(){return this.expression}equals(r){return this.typeHash===r.typeHash}assertHasKind(r){return!this.kind===r&&gr(`${this.kind} node was not of asserted kind ${r}`),this}hasKind(r){return this.kind===r}isBasis(){return hr(nc,this.kind)}isConstraint(){return hr(Ds,this.kind)}isRefinement(){return hr(Za,this.kind)}isRoot(){return hr(qs,this.kind)}hasUnit(r){return this.hasKind("unit")&&this.allows(r)}hasOpenIntersection(){return this.impl.intersectionIsOpen}get nestableExpression(){return this.expression}bindScope(r){return this.$===r?this:new this.constructor(Object.assign(Tl(this.attachments),{$:r}))}firstReference(r){return this.references.find(n=>n!==this&&r(n))}firstReferenceOrThrow(r){return this.firstReference(r)??gr(`${this.id} had no references matching predicate ${r}`)}firstReferenceOfKind(r){return this.firstReference(n=>n.kind===r)}firstReferenceOfKindOrThrow(r){return this.firstReference(n=>n.kind===r)??gr(`${this.id} had no ${r} references`)}transform(r,n){return this._transform(r,{seen:{},path:[],shouldTransform:(n==null?void 0:n.shouldTransform)??(()=>!0)})}_transform(r,n){if(n.seen[this.id])return this.$.lazilyResolve(n.seen[this.id]);if(!n.shouldTransform(this,n))return this;let s;n.seen[this.id]=()=>s;const i=ie(this.inner,(o,u)=>{if(!this.impl.keys[o].child)return[o,u];const l=u;if(!Fe(l)){const h=l._transform(r,n);return h?[o,h]:[]}const d=l.flatMap(h=>h._transform(r,n)??[]);return d.length?[o,d]:[]});delete n.seen[this.id];const a=r(this.kind,i,n);return a===null||Rs(a)||(this.kind==="required"||this.kind==="optional"||this.kind==="index")&&!("value"in a)?null:(this.kind==="morph"&&(a.in??(a.in=this.$.keywords.unknown)),s=this.$.node(this.kind,a))}configureShallowDescendants(r){const n=typeof r=="string"?{description:r}:r;return this.transform((s,i)=>({...i,...n}),{shouldTransform:s=>s.kind!=="structure"})}}class C{constructor(t){c(this,"sources");this.sources=t}clone(){return new C(this.sources)}static from(t,r,n){return new C({"[]":{[t]:{l:r,r:n}}})}static fromEntries(t){return t.length?new C({"[]":Un(t)}):Xe("Unexpected attempt to create a disjoint from no entries")}get flat(){return vt(this.sources).flatMap(([t,r])=>vt(r).map(([n,s])=>({path:t,kind:n,disjoint:s})))}describeReasons(){const t=this.flat;if(t.length===1){const{path:r,disjoint:n}=t[0],s=JSON.parse(r).join(".");return`Intersection${s&&` at ${s}`} of ${Ei(n)} results in an unsatisfiable type`}return`The following intersections result in unsatisfiable types:
 ${t.map(({path:r,disjoint:n})=>`${r}: ${Ei(n)}`).join(`
 `)}`}isEmpty(){return this.flat.length===0}throw(){return O(this.describeReasons())}invert(){const t=vt(this.sources).map(([r,n])=>[r,ie(n,(s,i)=>[s,{l:i.r,r:i.l}])]);return new C(Un(t))}add(t){vt(t.sources).forEach(([r,n])=>Object.assign(this.sources[r]??{},n))}withPrefixKey(t){const r=vt(this.sources).map(([n,s])=>{const i=JSON.parse(n);return i.unshift(typeof t=="symbol"?an(t):t),[JSON.stringify(i),s]});return new C(Un(r))}toString(){return de(this.sources)}}const Ei=e=>`${ms(e.l)} and ${ms(e.r)}`,ms=e=>V(e,"root")?e.expression:Fe(e)?e.map(ms).join(" | "):String(e),Bt={},Mt=(e,t,r)=>ve(e,t,{$:r,invert:!1,pipe:!1}),Ai=(e,t,r)=>ve(e,t,{$:r,invert:!1,pipe:!0}),ve=(e,t,r)=>{const n=r.pipe?"|>":"&",s=`${e.typeHash}${n}${t.typeHash}`;if(Bt[s]!==void 0)return Bt[s];if(!r.pipe){const a=`${t.typeHash}${n}${e.typeHash}`;if(Bt[a]!==void 0){const o=Bt[a],u=o instanceof C?o.invert():o;return Bt[s]=u,u}}if(e.equals(t))return e;let i;if(r.pipe&&e.hasKind("morph"))i=r.invert?Oi(t,e,r):Ti(e,t,r);else if(r.pipe&&t.hasKind("morph"))i=r.invert?Ti(t,e,r):Oi(e,t,r);else{const a=e.precedence<t.precedence?e.kind:t.kind,o=e.impl.intersections[t.kind]??t.impl.intersections[e.kind];i=o===void 0?null:a===e.kind?o(e,t,r):o(t,e,{...r,invert:!r.invert})}return cn(i)&&(e.equals(i)?i=e:t.equals(i)&&(i=t)),Bt[s]=i,i},Ti=(e,t,r)=>{const n=[...e.morphs];if(e.validatedOut){const s=ve(e.validatedOut,t,r);if(s instanceof C)return s;n[n.length-1]=s}else n.push(t);return r.$.node("morph",{morphs:n,in:e.in})},Oi=(e,t,r)=>{const n=ve(e,t.in,r);return n instanceof C?n:r.$.node("morph",{morphs:t.morphs,in:n})};var qm;class tr extends Qa{constructor(){super(...arguments);c(this,qm,"constraint");c(this,"impliedSiblings")}intersect(r){return Mt(this,r,this.$)}}qm=Lt;class Tn extends tr{constructor(){super(...arguments);c(this,"traverseApply",(r,n)=>{this.traverseAllows(r,n)||n.error(this.errorContext)})}compile(r){r.traversalKind==="Allows"?r.return(this.compiledCondition):r.if(this.compiledNegation,()=>r.line(`${r.ctx}.error(${this.compiledErrorContext})`))}get errorContext(){return{code:this.kind,description:this.description,...this.inner}}get compiledErrorContext(){return Ks(this.errorContext)}}const Te=e=>(t,r)=>{if(Fe(t))return t.length===0?void 0:t.map(s=>r.$.node(e,s)).sort((s,i)=>s.innerHash<i.innerHash?-1:1);const n=r.$.node(e,t);return n.hasOpenIntersection()?[n]:n},fn=e=>{var n;const t=e.r.shift();if(!t){let s=e.l.length===0&&e.kind==="structure"?e.ctx.$.keywords.unknown.raw:e.ctx.$.node(e.kind,Object.assign(e.baseInner,uc(e.l)),{prereduced:!0});for(const i of e.roots){if(s instanceof C)return s;s=ve(i,s,e.ctx)}return s}let r=!1;for(let s=0;s<e.l.length;s++){const i=ve(e.l[s],t,e.ctx);if(i!==null){if(i instanceof C)return i;if(r){if(!e.l.includes(i))return Xe(`Unexpectedly encountered multiple distinct intersection results for refinement ${i}`)}else{if(i.isRoot())return e.roots.push(i),e.l.splice(s),fn(e);e.l[s]=i,r=!0}}}return r||e.l.push(t),e.kind==="intersection"&&((n=t.impliedSiblings)==null||n.forEach(s=>Aa(e.r,s))),fn(e)},hn=e=>Object.entries(e).flatMap(([r,n])=>r in Wa?n:[]).sort((r,n)=>r.precedence<n.precedence?-1:r.precedence>n.precedence?1:r.innerHash<n.innerHash?-1:1),uc=e=>{const t={};for(const r of e)if(r.hasOpenIntersection())t[r.kind]=Me(t[r.kind],r);else{if(t[r.kind])return Xe(`Unexpected intersection of closed refinements of kind ${r.kind}`);t[r.kind]=r}return t},lc=(...e)=>O(cc(...e)),cc=(e,t,r)=>`${tc(e)} operand must be ${t.description} (was ${r.exclude(t).description})`,dc=e=>(e.$.schema(e.def,{}),e),fc=H({kind:"predicate",hasAssociatedError:!0,collapsibleKey:"predicate",keys:{predicate:{}},normalize:e=>typeof e=="function"?{predicate:e}:e,defaults:{description:e=>`valid according to ${e.predicate.name||"an anonymous predicate"}`},intersectionIsOpen:!0,intersections:{predicate:()=>null}});class hc extends tr{constructor(){super(...arguments);c(this,"serializedPredicate",Ot(this.predicate));c(this,"compiledCondition",`${this.serializedPredicate}(data, ctx)`);c(this,"compiledNegation",`!${this.compiledCondition}`);c(this,"impliedBasis",null);c(this,"expression",this.serializedPredicate);c(this,"traverseAllows",this.predicate);c(this,"errorContext",{code:"predicate",description:this.description});c(this,"compiledErrorContext",`{ code: "predicate", description: "${this.description}" }`);c(this,"traverseApply",(r,n)=>{!this.predicate(r,n)&&!n.hasError()&&n.error(this.errorContext)})}compile(r){if(r.traversalKind==="Allows"){r.return(this.compiledCondition);return}r.if(`${this.compiledNegation} && !ctx.hasError()`,()=>r.line(`ctx.error(${this.compiledErrorContext})`))}}const pc=H({kind:"divisor",collapsibleKey:"rule",keys:{rule:{}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>e.rule===1?"an integer":`a multiple of ${e.rule}`},intersections:{divisor:(e,t,r)=>r.$.node("divisor",{rule:Math.abs(e.rule*t.rule/yc(e.rule,t.rule))})}});class mc extends Tn{constructor(){super(...arguments);c(this,"traverseAllows",r=>r%this.rule===0);c(this,"compiledCondition",`data % ${this.rule} === 0`);c(this,"compiledNegation",`data % ${this.rule} !== 0`);c(this,"impliedBasis",this.$.keywords.number.raw);c(this,"expression",`% ${this.rule}`)}}const yc=(e,t)=>{let r,n=e,s=t;for(;s!==0;)r=s,s=n%s,n=r;return n};class rr extends Tn{constructor(){super(...arguments);c(this,"boundOperandKind",bc[this.kind]);c(this,"compiledActual",this.boundOperandKind==="value"?"data":this.boundOperandKind==="length"?"data.length":"data.valueOf()");c(this,"comparator",_c(this.kind,this.exclusive));c(this,"numericLimit",this.rule.valueOf());c(this,"expression",`${this.comparator}${this.rule}`);c(this,"compiledCondition",`${this.compiledActual} ${this.comparator} ${this.numericLimit}`);c(this,"compiledNegation",`${this.compiledActual} ${gc[this.comparator]} ${this.numericLimit}`);c(this,"stringLimit",this.boundOperandKind==="date"?wc(this.numericLimit):`${this.numericLimit}`);c(this,"limitKind",this.comparator[0]==="<"?"upper":"lower")}isStricterThan(r){return(this.limitKind==="upper"?this.numericLimit<r.numericLimit:this.numericLimit>r.numericLimit)||this.numericLimit===r.numericLimit&&this.exclusive===!0&&!r.exclusive}overlapsRange(r){return!(this.isStricterThan(r)||this.numericLimit===r.numericLimit&&(this.exclusive||r.exclusive))}overlapIsUnit(r){return this.numericLimit===r.numericLimit&&!this.exclusive&&!r.exclusive}}const gc={"<":">=","<=":">",">":"<=",">=":"<"},vc={min:"max",minLength:"maxLength",after:"before"},nr={parse:e=>e||void 0},Ya=e=>typeof e=="string"||typeof e=="number"?new Date(e):e,bc={min:"value",max:"value",minLength:"length",maxLength:"length",after:"date",before:"date"},_c=(e,t)=>`${Pe(e,vc)?">":"<"}${t?"":"="}`,wc=e=>typeof e=="string"?e:new Date(e).toLocaleString(),$c=e=>`Bounded expression ${e} must be a number, string, Array, or Date`,xc=H({kind:"after",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Ya,serialize:e=>e.toISOString()},exclusive:nr},normalize:e=>typeof e=="number"||typeof e=="string"||e instanceof Date?{rule:e}:e,defaults:{description:e=>e.exclusive?`after ${e.stringLimit}`:`${e.stringLimit} or later`,actual:e=>e.toLocaleString()},intersections:{after:(e,t)=>e.isStricterThan(t)?e:t}});class kc extends rr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.Date.raw);c(this,"traverseAllows",this.exclusive?r=>r>this.rule:r=>r>=this.rule)}}const Sc=H({kind:"before",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Ya,serialize:e=>e.toISOString()},exclusive:nr},normalize:e=>typeof e=="number"||typeof e=="string"||e instanceof Date?{rule:e}:e,defaults:{description:e=>e.exclusive?`before ${e.stringLimit}`:`${e.stringLimit} or earlier`,actual:e=>e.toLocaleString()},intersections:{before:(e,t)=>e.isStricterThan(t)?e:t,after:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("unit",{unit:e.rule}):null:C.from("range",e,t)}});class Ec extends rr{constructor(){super(...arguments);c(this,"traverseAllows",this.exclusive?r=>r<this.rule:r=>r<=this.rule);c(this,"impliedBasis",this.$.keywords.Date.raw)}}const Ac=H({kind:"exactLength",collapsibleKey:"rule",keys:{rule:{}},normalize:e=>typeof e=="number"?{rule:e}:e,hasAssociatedError:!0,defaults:{description:e=>`exactly length ${e.rule}`},intersections:{exactLength:(e,t,r)=>new C({'["length"]':{unit:{l:r.$.node("unit",{unit:e.rule}),r:r.$.node("unit",{unit:t.rule})}}}),minLength:(e,t)=>(t.exclusive?e.rule>t.rule:e.rule>=t.rule)?e:C.from("range",e,t),maxLength:(e,t)=>(t.exclusive?e.rule<t.rule:e.rule<=t.rule)?e:C.from("range",e,t)}});class Tc extends Tn{constructor(){super(...arguments);c(this,"traverseAllows",r=>r.length===this.rule);c(this,"compiledCondition",`data.length === ${this.rule}`);c(this,"compiledNegation",`data.length !== ${this.rule}`);c(this,"impliedBasis",this.$.keywords.lengthBoundable.raw);c(this,"expression",`{ length: ${this.rule} }`)}}const Oc=H({kind:"max",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:nr},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>`${e.exclusive?"less than":"at most"} ${e.rule}`},intersections:{max:(e,t)=>e.isStricterThan(t)?e:t,min:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("unit",{unit:e.rule}):null:C.from("range",e,t)}});class Cc extends rr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.number.raw);c(this,"traverseAllows",this.exclusive?r=>r<this.rule:r=>r<=this.rule)}}const Ic=H({kind:"maxLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:nr},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.exclusive?`less than length ${e.rule}`:`at most length ${e.rule}`,actual:e=>`${e.length}`},intersections:{maxLength:(e,t)=>e.isStricterThan(t)?e:t,minLength:(e,t,r)=>e.overlapsRange(t)?e.overlapIsUnit(t)?r.$.node("exactLength",{rule:e.rule}):null:C.from("range",e,t)}});class Nc extends rr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.lengthBoundable.raw);c(this,"traverseAllows",this.exclusive?r=>r.length<this.rule:r=>r.length<=this.rule)}}const Rc=H({kind:"min",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:nr},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>`${e.exclusive?"more than":"at least"} ${e.rule}`},intersections:{min:(e,t)=>e.isStricterThan(t)?e:t}});class zc extends rr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.number.raw);c(this,"traverseAllows",this.exclusive?r=>r>this.rule:r=>r>=this.rule)}}const Mc=H({kind:"minLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:nr},normalize:e=>typeof e=="number"?{rule:e}:e,defaults:{description:e=>e.exclusive?e.rule===0?"non-empty":`more than length ${e.rule}`:e.rule===1?"non-empty":`at least length ${e.rule}`,actual:e=>`${e.length}`},intersections:{minLength:(e,t)=>e.isStricterThan(t)?e:t}});class Pc extends rr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.lengthBoundable.raw);c(this,"traverseAllows",this.exclusive?r=>r.length>this.rule:r=>r.length>=this.rule)}}const jc={min:Rc,max:Oc,minLength:Mc,maxLength:Ic,exactLength:Ac,after:xc,before:Sc},Lc={min:zc,max:Cc,minLength:Pc,maxLength:Nc,exactLength:Tc,after:kc,before:Ec},Dc=H({kind:"regex",collapsibleKey:"rule",keys:{rule:{},flags:{}},normalize:e=>typeof e=="string"?{rule:e}:e instanceof RegExp?e.flags?{rule:e.source,flags:e.flags}:{rule:e.source}:e,hasAssociatedError:!0,intersectionIsOpen:!0,defaults:{description:e=>`matched by ${e.rule}`},intersections:{regex:()=>null}});class qc extends Tn{constructor(){super(...arguments);c(this,"instance",new RegExp(this.rule,this.flags));c(this,"expression",`${this.instance}`);c(this,"traverseAllows",this.instance.test.bind(this.instance));c(this,"compiledCondition",`${this.expression}.test(data)`);c(this,"compiledNegation",`!${this.compiledCondition}`);c(this,"impliedBasis",this.$.keywords.string.raw)}}var Bm;class sr extends Qa{constructor(){super(...arguments);c(this,"branches",this.hasKind("union")?this.inner.branches:[this]);c(this,Bm,"root");c(this,"_keyof")}get raw(){return this}keyof(){return this._keyof||(this._keyof=this.rawKeyOf(),this._keyof.branches.length===0&&O(`keyof ${this.expression} results in an unsatisfiable type`)),this._keyof}intersect(r){const n=this.$.parseRoot(r);return Mt(this,n,this.$)}and(r){const n=this.intersect(r);return n instanceof C?n.throw():n}or(r){const n=this.$.parseRoot(r),s=[...this.branches,...n.branches];return this.$.schema(s)}assert(r){const n=this.traverse(r);return n instanceof wr?n.throw():n}extract(r){const n=this.$.parseRoot(r);return this.$.schema(this.branches.filter(s=>s.extends(n)))}exclude(r){const n=this.$.parseRoot(r);return this.$.schema(this.branches.filter(s=>!s.extends(n)))}array(){return this.$.schema({proto:Array,sequence:this},{prereduced:!0})}extends(r){const n=this.intersect(r);return!(n instanceof C)&&this.equals(n)}subsumes(r){return r.extends(this)}configure(r){return this.configureShallowDescendants(r)}describe(r){return this.configure(r)}from(r){return this.assert(r)}pipe(...r){return r.reduce((n,s)=>n.pipeOnce(s),this)}pipeOnce(r){if(V(r,"root")){const n=Ai(this,r,this.$);return n instanceof C?n.throw():n}if(this.hasKind("union")){const n=this.branches.map(s=>s.pipe(r));return this.$.node("union",{...this.inner,branches:n})}return this.hasKind("morph")?this.$.node("morph",{...this.inner,morphs:[...this.morphs,r]}):this.$.node("morph",{in:this,morphs:[r]})}narrow(r){return this.constrainOut("predicate",r)}constrain(r,n){return this._constrain("in",r,n)}constrainOut(r,n){return this._constrain("out",r,n)}_constrain(r,n,s){const i=this.$.node(n,s);if(i.impliedBasis&&!this[r].extends(i.impliedBasis))return lc(n,i.impliedBasis,this);const a=this.$.node("intersection",{[n]:i}),o=r==="in"?Mt(this,a,this.$):Ai(this,a,this.$);return o instanceof C&&o.throw(),o}onUndeclaredKey(r){return this.transform((n,s)=>n==="structure"?r==="ignore"?Ia(s,{undeclared:1}):{...s,undeclared:r}:s,{shouldTransform:n=>!hr(Ls,n.kind)})}}Bm=Lt;const Br=(e,t)=>ie(Ja(e),(r,n)=>[n,t]);var Bc=function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},Kc=function(e,t,r,n,s,i){function a(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=n.kind,u=o==="getter"?"get":o==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,x=!1,g=r.length-1;g>=0;g--){var b={};for(var y in n)b[y]=y==="access"?{}:n[y];for(var y in n.access)b.access[y]=n.access[y];b.addInitializer=function(w){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(w||null))};var m=(0,r[g])(o==="accessor"?{get:d.get,set:d.set}:d[u],b);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=a(m.get))&&(d.get=h),(h=a(m.set))&&(d.set=h),(h=a(m.init))&&s.unshift(h)}else(h=a(m))&&(o==="field"?s.unshift(h):d[u]=h)}l&&Object.defineProperty(l,n.name,d),x=!0};let Fc=(()=>{var n;let e=sr,t=[],r;return n=class extends e{constructor(){super(...arguments);c(this,"expression",(Bc(this,t),this.alias));c(this,"traverseAllows",(a,o)=>{const u=o.seen[this.id];return u!=null&&u.includes(a)?!0:(o.seen[this.id]=Me(u,a),this.resolution.traverseAllows(a,o))});c(this,"traverseApply",(a,o)=>{const u=o.seen[this.id];u!=null&&u.includes(a)||(o.seen[this.id]=Me(u,a),this.resolution.traverseApply(a,o))})}get resolution(){var a;return((a=this.resolve)==null?void 0:a.call(this))??this.$.resolveRoot(this.alias)}rawKeyOf(){return this.resolution.keyof()}compile(a){a.if(`ctx.seen.${this.id}?.includes(data)`,()=>a.return(!0)),a.line(`ctx.seen.${this.id} ??= []`).line(`ctx.seen.${this.id}.push(data)`),a.return(a.invoke(this.resolution))}},(()=>{const a=typeof Symbol=="function"&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;r=[zs],Kc(n,null,r,{kind:"getter",name:"resolution",static:!1,private:!1,access:{has:o=>"resolution"in o,get:o=>o.resolution},metadata:a},null,t),a&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),n})();const Ga=e=>typeof e=="string"?{alias:e.slice(1)}:e,Vc=H({kind:"alias",hasAssociatedError:!1,collapsibleKey:"alias",keys:{alias:{serialize:e=>`$${e}`},resolve:{}},normalize:Ga,defaults:{description:e=>e.alias},intersections:{alias:(e,t,r)=>r.$.lazilyResolve(()=>Ci(ve(e.resolution,t.resolution,r),r.$),`${e.alias}${r.pipe?"|>":"&"}${t.alias}`),...Br("alias",(e,t,r)=>r.$.lazilyResolve(()=>Ci(ve(e.resolution,t,r),r.$),`${e.alias}${r.pipe?"|>":"&"}${t.alias}`))}}),Ci=(e,t)=>e instanceof C?t.keywords.never.raw:e;class Fs extends sr{constructor(){super(...arguments);c(this,"traverseApply",(r,n)=>{this.traverseAllows(r,n)||n.error(this.errorContext)})}rawKeyOf(){return this.$.units(this.literalKeys)}get errorContext(){return{code:this.kind,description:this.description,...this.inner}}get compiledErrorContext(){return Ks(this.errorContext)}compile(r){r.traversalKind==="Allows"?r.return(this.compiledCondition):r.if(this.compiledNegation,()=>r.line(`${r.ctx}.error(${this.compiledErrorContext})`))}}class Uc extends Fs{constructor(){super(...arguments);c(this,"traverseAllows",r=>ft(r)===this.domain);c(this,"compiledCondition",this.domain==="object"?'((typeof data === "object" && data !== null) || typeof data === "function")':`typeof data === "${this.domain}"`);c(this,"compiledNegation",this.domain==="object"?'((typeof data !== "object" || data === null) && typeof data !== "function")':`typeof data !== "${this.domain}"`);c(this,"expression",this.domain);c(this,"literalKeys",Kl(this.domain))}}const Zc=H({kind:"domain",hasAssociatedError:!0,collapsibleKey:"domain",keys:{domain:{}},normalize:e=>typeof e=="string"?{domain:e}:e,defaults:{description:e=>Ra[e.domain],actual:e=>typeof e=="boolean"?`${e}`:ft(e)},intersections:{domain:(e,t)=>C.from("domain",e,t)}}),Xa={description:1};var oa;class Wc extends sr{constructor(){super(...arguments);c(this,"basis",this.domain??this.proto??null);c(this,"refinements",this.children.filter(r=>r.isRefinement()));c(this,"expression",((oa=this.structure)==null?void 0:oa.expression)||this.children.map(r=>r.nestableExpression).join(" & ")||"unknown");c(this,"traverseAllows",(r,n)=>this.children.every(s=>s.traverseAllows(r,n)));c(this,"traverseApply",(r,n)=>{const s=n.currentErrorCount;if(!(this.basis&&(this.basis.traverseApply(r,n),n.currentErrorCount>s))){if(this.refinements.length){for(let i=0;i<this.refinements.length-1;i++)if(this.refinements[i].traverseApply(r,n),n.failFast&&n.currentErrorCount>s)return;if(this.refinements.at(-1).traverseApply(r,n),n.currentErrorCount>s)return}if(!(this.structure&&(this.structure.traverseApply(r,n),n.currentErrorCount>s))&&this.predicate){for(let i=0;i<this.predicate.length-1;i++)if(this.predicate[i].traverseApply(r,n),n.failFast&&n.currentErrorCount>s)return;this.predicate.at(-1).traverseApply(r,n)}}})}compile(r){if(r.traversalKind==="Allows"){this.children.forEach(n=>r.check(n)),r.return(!0);return}if(r.initializeErrorCount(),this.basis&&(r.check(this.basis),this.children.length>1&&r.returnIfFail()),this.refinements.length){for(let n=0;n<this.refinements.length-1;n++)r.check(this.refinements[n]),r.returnIfFailFast();r.check(this.refinements.at(-1)),(this.structure||this.predicate)&&r.returnIfFail()}if(this.structure&&(r.check(this.structure),this.predicate&&r.returnIfFail()),this.predicate){for(let n=0;n<this.predicate.length-1;n++)r.check(this.predicate[n]),r.returnIfFail();r.check(this.predicate.at(-1))}}rawKeyOf(){var r;return this.basis?this.structure?this.basis.rawKeyOf().or(this.structure.keyof()):this.basis.rawKeyOf():((r=this.structure)==null?void 0:r.keyof())??this.$.keywords.never.raw}}const pn=(e,t,r)=>{if(V(e,"root")&&e.hasKind("intersection"))return pn(e.inner,t,r);if(V(t,"root")&&t.hasKind("intersection"))return pn(e,t.inner,r);const n=Rs(e)?Rl(t,Xa):{},s=e.proto??e.domain,i=t.proto??t.domain,a=s?i?ve(s,i,r):s:i;return a instanceof C?a:(a&&(n[a.kind]=a),fn({kind:"intersection",baseInner:n,l:hn(e),r:hn(t),roots:[],ctx:r}))},Hc=H({kind:"intersection",hasAssociatedError:!0,normalize:e=>{if(cn(e))return e;const{structure:t,...r}=e,n=!!t,s=t??{},i=ie(r,(a,o)=>Pe(a,ic)?(n&&O(`Flattened structure key ${a} cannot be specified alongside a root 'structure' key.`),s[a]=o,[]):[a,o]);return Rs(s)||(i.structure=s),i},finalizeJson:({structure:e,...t})=>qr(e,"object")?{...e,...t}:t,keys:{domain:{child:!0,parse:(e,t)=>t.$.node("domain",e)},proto:{child:!0,parse:(e,t)=>t.$.node("proto",e)},structure:{child:!0,parse:(e,t)=>t.$.node("structure",e),serialize:e=>{var a;if(!((a=e.sequence)!=null&&a.minLength))return e.collapsibleJson;const{sequence:t,...r}=e.collapsibleJson,{minVariadicLength:n,...s}=t,i=s.variadic&&Object.keys(s).length===1?s.variadic:s;return{...r,sequence:i}}},divisor:{child:!0,parse:Te("divisor")},max:{child:!0,parse:Te("max")},min:{child:!0,parse:Te("min")},maxLength:{child:!0,parse:Te("maxLength")},minLength:{child:!0,parse:Te("minLength")},exactLength:{child:!0,parse:Te("exactLength")},before:{child:!0,parse:Te("before")},after:{child:!0,parse:Te("after")},regex:{child:!0,parse:Te("regex")},predicate:{child:!0,parse:Te("predicate")}},reduce:(e,t)=>pn({},e,{$:t,invert:!1,pipe:!1}),defaults:{description:e=>{var t;return e.children.length===0?"unknown":((t=e.structure)==null?void 0:t.description)??e.children.map(r=>r.description).join(" and ")},expected:e=>`   ${e.errors.map(t=>t.expected).join(`
   `)}`,problem:e=>`${e.actual} must be...
${e.expected}`},intersections:{intersection:(e,t,r)=>pn(e,t,r),...Br("intersection",(e,t,r)=>{var s;if(e.children.length===0)return t;const n=e.basis?ve(e.basis,t,r):t;return n instanceof C?n:(s=e==null?void 0:e.basis)!=null&&s.equals(n)?e:e.$.node("intersection",Object.assign(Ia(e.inner,Xa),{[n.kind]:n}),{prereduced:!0})})}}),Jc=["intersection","unit","domain","proto"],Qc=H({kind:"morph",hasAssociatedError:!1,keys:{in:{child:!0,parse:(e,t)=>t.$.node(Jc,e)},morphs:{parse:kl,serialize:e=>e.map(t=>V(t,"root")?t.json:Ot(t))}},normalize:e=>e,defaults:{description:e=>{var t;return`a morph from ${e.in.description} to ${((t=e.out)==null?void 0:t.description)??"unknown"}`}},intersections:{morph:(e,t,r)=>{if(e.morphs.some((s,i)=>s!==t.morphs[i]))return O("Invalid intersection of morphs");const n=ve(e.in,t.in,r);return n instanceof C?n:r.$.schema(n.branches.map(s=>r.$.node("morph",{morphs:e.morphs,in:s})))},...Br("morph",(e,t,r)=>{const n=ve(e.in,t,r);return n instanceof C?n:n.kind==="union"?r.$.node("union",n.branches.map(s=>({...e.inner,in:s}))):r.$.node("morph",{...e.inner,in:n})})}});var ua;class Yc extends sr{constructor(){super(...arguments);c(this,"serializedMorphs",this.morphs.map(Ot));c(this,"compiledMorphs",`[${this.serializedMorphs}]`);c(this,"traverseAllows",(r,n)=>this.in.traverseAllows(r,n));c(this,"traverseApply",(r,n)=>{this.in.traverseApply(r,n),n.queueMorphs(this.morphs)});c(this,"expression",`(In: ${this.in.expression}) => Out<${((ua=this.out)==null?void 0:ua.expression)??"unknown"}>`);c(this,"lastMorph",this.inner.morphs.at(-1));c(this,"validatedOut",V(this.lastMorph,"root")?Object.assign(this.referencesById,this.lastMorph.out.referencesById)&&this.lastMorph.out:void 0)}compile(r){if(r.traversalKind==="Allows"){r.return(r.invoke(this.in));return}r.line(r.invoke(this.in)),r.line(`ctx.queueMorphs(${this.compiledMorphs})`)}get in(){return this.inner.in}get out(){return this.validatedOut??this.$.keywords.unknown.raw}rawKeyOf(){return this.in.rawKeyOf()}}const Gc=H({kind:"proto",hasAssociatedError:!0,collapsibleKey:"proto",keys:{proto:{serialize:e=>za(e)??Bs(e)}},normalize:e=>typeof e=="string"?{proto:Yt[e]}:typeof e=="function"?{proto:e}:typeof e.proto=="string"?{...e,proto:Yt[e.proto]}:e,defaults:{description:e=>e.builtinName?ql[e.builtinName]:`an instance of ${e.proto.name}`,actual:e=>cs(e)},intersections:{proto:(e,t)=>$i(e.proto,t.proto)?e:$i(t.proto,e.proto)?t:C.from("proto",e,t),domain:(e,t,r)=>t.domain==="object"?e:C.from("domain",r.$.keywords.object.raw,t)}});class Xc extends Fs{constructor(){super(...arguments);c(this,"builtinName",za(this.proto));c(this,"serializedConstructor",this.json.proto);c(this,"compiledCondition",`data instanceof ${this.serializedConstructor}`);c(this,"compiledNegation",`!(${this.compiledCondition})`);c(this,"literalKeys",Nt(this.proto.prototype));c(this,"traverseAllows",r=>r instanceof this.proto);c(this,"expression",this.proto.name);c(this,"domain","object")}}var ed=function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},td=function(e,t,r,n,s,i){function a(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=n.kind,u=o==="getter"?"get":o==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,x=!1,g=r.length-1;g>=0;g--){var b={};for(var y in n)b[y]=y==="access"?{}:n[y];for(var y in n.access)b.access[y]=n.access[y];b.addInitializer=function(w){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(w||null))};var m=(0,r[g])(o==="accessor"?{get:d.get,set:d.set}:d[u],b);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=a(m.get))&&(d.get=h),(h=a(m.set))&&(d.set=h),(h=a(m.init))&&s.unshift(h)}else(h=a(m))&&(o==="field"?s.unshift(h):d[u]=h)}l&&Object.defineProperty(l,n.name,d),x=!0};const rd=[...Ja("union"),"alias"],nd=H({kind:"union",hasAssociatedError:!0,collapsibleKey:"branches",keys:{ordered:{},branches:{child:!0,parse:(e,t)=>{const r=e.map(n=>t.$.node(rd,n));return t.schema.ordered||r.sort((n,s)=>n.innerHash<s.innerHash?-1:1),r}}},normalize:e=>Fe(e)?{branches:e}:e,reduce:(e,t)=>{const r=ad(e);if(r.length===1)return r[0];if(r.length!==e.branches.length)return t.node("union",{...e,branches:r},{prereduced:!0})},defaults:{description:e=>rn(e.branches.map(t=>t.description)),expected:e=>{const t=Al(e.errors,"propString"),r=Object.entries(t).map(([n,s])=>{const i=[];s.forEach(u=>Aa(i,u.expected));const a=rn(i),o=s.every(u=>u.actual===s[0].actual)?s[0].actual:de(s[0].data);return`${n&&`${n} `}must be ${a}${o&&` (was ${o})`}`});return rn(r)},problem:e=>e.expected,message:e=>e.problem},intersections:{union:(e,t,r)=>{if(e.isNever!==t.isNever)return C.from("presence",e,t);let n;if(e.ordered){if(t.ordered)return C.from("indiscriminableMorphs",e,t);n=Hn(t.branches,e.branches,r),n instanceof C&&n.invert()}else n=Hn(e.branches,t.branches,r);return n instanceof C?n:r.$.schema(e.ordered||t.ordered?{branches:n,ordered:!0}:{branches:n})},...Br("union",(e,t,r)=>{const n=Hn(e.branches,[t],r);return n instanceof C?n:n.length===1?n[0]:r.$.schema(e.ordered?{branches:n,ordered:!0}:{branches:n})})}});let sd=(()=>{var n;let e=sr,t=[],r;return n=class extends e{constructor(){super(...arguments);c(this,"isNever",(ed(this,t),this.branches.length===0));c(this,"isBoolean",this.branches.length===2&&this.branches[0].hasUnit(!1)&&this.branches[1].hasUnit(!0));c(this,"unitBranches",this.branches.filter(a=>a.hasKind("unit")));c(this,"discriminant",this.discriminate());c(this,"discriminantJson",this.discriminant?id(this.discriminant):null);c(this,"expression",this.isNever?"never":this.isBoolean?"boolean":this.branches.map(a=>a.nestableExpression).join(" | "));c(this,"traverseAllows",(a,o)=>this.branches.some(u=>u.traverseAllows(a,o)));c(this,"traverseApply",(a,o)=>{const u=[];for(let l=0;l<this.branches.length;l++){if(o.pushBranch(),this.branches[l].traverseApply(a,o),!o.hasError())return o.queuedMorphs.push(...o.popBranch().queuedMorphs);u.push(o.popBranch().error)}o.error({code:"union",errors:u})})}compile(a){if(!this.discriminant||this.unitBranches.length===this.branches.length&&this.branches.length===2)return this.compileIndiscriminable(a);const o=this.discriminant.path.reduce((h,x)=>h+La(x,!0),this.discriminant.kind==="domain"?"typeof data":"data"),u=this.discriminant.cases,l=Object.keys(u);if(a.block(`switch(${o})`,()=>{for(const h in u){const x=u[h],g=h==="default"?"default":`case ${h}`;a.line(`${g}: return ${x===!0?x:a.invoke(x)}`)}return a}),a.traversalKind==="Allows"){a.return(!1);return}const d=rn(this.discriminant.kind==="domain"?l.map(h=>Ra[h.slice(1,-1)]):l);a.line(`ctx.error({
	expected: ${JSON.stringify(d)},
	actual: ${o},
	relativePath: ${JSON.stringify(this.discriminant.path)}
})`)}compileIndiscriminable(a){a.traversalKind==="Apply"?(a.const("errors","[]"),this.branches.forEach(o=>a.line("ctx.pushBranch()").line(a.invoke(o)).if("!ctx.hasError()",()=>a.return("ctx.queuedMorphs.push(...ctx.popBranch().queuedMorphs)")).line("errors.push(ctx.popBranch().error)")),a.line('ctx.error({ code: "union", errors })')):(this.branches.forEach(o=>a.if(`${a.invoke(o)}`,()=>a.return(!0))),a.return(!1))}rawKeyOf(){return this.branches.reduce((a,o)=>a.and(o.rawKeyOf()),this.$.keywords.unknown.raw)}get nestableExpression(){return this.isBoolean?"boolean":super.nestableExpression}discriminate(){if(this.branches.length<2)return null;if(this.unitBranches.length===this.branches.length){const b=ie(this.unitBranches,(y,m)=>[`${m.serializedValue}`,!0]);return{path:[],kind:"unit",cases:b}}const a={};for(let b=0;b<this.branches.length-1;b++){const y=this.branches[b];for(let m=b+1;m<this.branches.length;m++){const w=this.branches[m],A=Mt(y.in,w.in,y.$);if(A instanceof C)for(const{path:B,kind:U,disjoint:Ce}of A.flat){if(!Pe(U,od))continue;const Ie=`${B}${U}`;let G,_e;if(U==="domain")G=`"${Ce.l.domain}"`,_e=`"${Ce.r.domain}"`;else if(U==="unit")G=Ce.l.serializedValue,_e=Ce.r.serializedValue;else return Xe(`Unexpected attempt to discriminate disjoint kind '${U}'`);if(!a[Ie]){a[Ie]={[G]:[y],[_e]:[w]};continue}const ke=a[Ie];Pe(G,ke)?ke[G].includes(y)||ke[G].push(y):ke[G]=[y],Pe(_e,ke)?ke[_e].includes(w)||ke[_e].push(w):ke[_e]=[w]}}}const o=vt(a).sort((b,y)=>Object.keys(b[1]).length-Object.keys(y[1]).length).at(-1);if(!o)return null;const[u,l]=o,[d,h]=ud(u);let x=[...this.branches];const g=ie(l,(b,y)=>{const m=[];x=x.filter(A=>!y.includes(A));for(const A of y){const B=ld(h,d,A);if(B===null)return[b,!0];m.push(B)}const w=m.length===1?m[0]:this.$.node("union",m);return Object.assign(this.referencesById,w.referencesById),[b,w]});return x.length&&(g.default=this.$.node("union",x,{prereduced:!0}),Object.assign(this.referencesById,g.default.referencesById)),{kind:h,path:d,cases:g}}},(()=>{const a=typeof Symbol=="function"&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;r=[zs],td(n,null,r,{kind:"method",name:"discriminate",static:!1,private:!1,access:{has:o=>"discriminate"in o,get:o=>o.discriminate},metadata:a},null,t),a&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),n})();const id=e=>({kind:e.kind,path:e.path,cases:ie(e.cases,(t,r)=>[t,r===!0?r:r.hasKind("union")&&r.discriminantJson?r.discriminantJson:r.json])}),rn=e=>{if(e.length===0)return"never";if(e.length===1)return e[0];if(e.length===2&&e[0]==="false"&&e[1]==="true"||e[0]==="true"&&e[1]==="false")return"boolean";let t="";for(let r=0;r<e.length-1;r++)t+=e[r],r<e.length-2&&(t+=", ");return t+=` or ${e[e.length-1]}`,t},Hn=(e,t,r)=>{const n=t.map(()=>[]);for(let i=0;i<e.length;i++){let a={};for(let o=0;o<t.length;o++){if(n[o]===null)continue;if(e[i].equals(t[o])){n[o]=null,a={};break}const u=ve(e[i],t[o],r);if(!(u instanceof C)){if(u.equals(e[i])){n[o].push(e[i]),a={};break}u.equals(t[o])?n[o]=null:a[o]=u}}for(const o in a)n[o][i]=a[o]}const s=n.flatMap((i,a)=>(i==null?void 0:i.flatMap(o=>o.branches))??t[a]);return s.length===0?C.from("union",e,t):s},ad=({branches:e,ordered:t})=>{if(e.length<2)return e;const r=e.map(()=>!0);for(let n=0;n<e.length;n++)for(let s=n+1;s<e.length&&r[n]&&r[s];s++){if(e[n].equals(e[s])){r[s]=!1;continue}const i=Mt(e[n].in,e[s].in,e[0].$);i instanceof C||(i.equals(e[n].in)?r[n]=!!t:i.equals(e[s].in)&&(r[s]=!1))}return e.filter((n,s)=>r[s])},od={domain:1,unit:1},ud=e=>{const t=e.lastIndexOf("]"),r=JSON.parse(e.slice(0,t+1)),n=e.slice(t+1);return[r,n]},ld=(e,t,r)=>r.transform((n,s,i)=>n==="domain"&&s.domain==="object"&&t.length>i.path.length||(e===n||n==="domain"&&i.path.length===t.length)&&i.path.length===t.length&&i.path.every((a,o)=>a===t[o])?null:s,{shouldTransform:n=>n.children.length!==0||n.kind==="domain"||n.kind==="unit"}),cd=H({kind:"unit",hasAssociatedError:!0,keys:{unit:{preserveUndefined:!0,serialize:e=>e instanceof Date?e.toISOString():Bs(e)}},normalize:e=>e,defaults:{description:e=>de(e.unit),problem:({expected:e,actual:t})=>`${e===t?`must be reference equal to ${e} (serialized to the same value)`:`must be ${e} (was ${t})`}`},intersections:{unit:(e,t)=>C.from("unit",e,t),...Br("unit",(e,t)=>t.allows(e.unit)?e:C.from("assignability",e,t.hasKind("intersection")?t.children.find(r=>!r.allows(e.unit)):t))}});class dd extends Fs{constructor(){super(...arguments);c(this,"compiledValue",this.json.unit);c(this,"serializedValue",typeof this.unit=="string"||this.unit instanceof Date?JSON.stringify(this.compiledValue):this.compiledValue);c(this,"literalKeys",Nt(this.unit));c(this,"compiledCondition",Ii(this.unit,this.serializedValue));c(this,"compiledNegation",Ii(this.unit,this.serializedValue,"negated"));c(this,"expression",de(this.unit));c(this,"domain",ft(this.unit));c(this,"traverseAllows",this.unit instanceof Date?r=>r instanceof Date&&r.toISOString()===this.compiledValue:r=>r===this.unit)}}const Ii=(e,t,r)=>{if(e instanceof Date){const n=`data instanceof Date && data.toISOString() === ${t}`;return r?`!(${n})`:n}return`data ${r?"!":"="}== ${t}`},fd=H({kind:"index",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{signature:{child:!0,parse:(e,t)=>{const r=t.$.schema(e);if(!r.extends(t.$.keywords.propertyKey))return O(md(r.expression));const n=r.branches.filter(s=>s.hasKind("unit"));return n.length?O(pd(n.map(s=>de(s.unit)))):r}},value:{child:!0,parse:(e,t)=>t.$.schema(e)}},normalize:e=>e,defaults:{description:e=>`[${e.signature.expression}]: ${e.value.description}`},intersections:{index:(e,t,r)=>{if(e.signature.equals(t.signature)){const n=ve(e.value,t.value,r),s=n instanceof C?r.$.keywords.never.raw:n;return r.$.node("index",{signature:e.signature,value:s})}return e.signature.extends(t.signature)&&e.value.subsumes(t.value)?t:t.signature.extends(e.signature)&&t.value.subsumes(e.value)?e:null}}});class hd extends tr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.object.raw);c(this,"expression",`[${this.signature.expression}]: ${this.value.expression}`);c(this,"traverseAllows",(r,n)=>ls(r).every(s=>{if(this.signature.traverseAllows(s[0],n)){n==null||n.path.push(s[0]);const i=this.value.traverseAllows(s[1],n);return n==null||n.path.pop(),i}return!0}));c(this,"traverseApply",(r,n)=>ls(r).forEach(s=>{this.signature.traverseAllows(s[0],n)&&(n.path.push(s[0]),this.value.traverseApply(s[1],n),n.path.pop())}))}_transform(r,n){n.path.push(this.signature);const s=super._transform(r,n);return n.path.pop(),s}compile(){}}const pd=e=>`Index keys ${e.join(", ")} should be specified as named props.`,md=e=>`Indexed key definition '${e}' must be a string, number or symbol`,ys=(e,t,r)=>{if(e.key!==t.key)return null;const n=e.key;let s=ve(e.value,t.value,r);const i=e.required||t.required?"required":"optional";if(s instanceof C)if(i==="optional")s=r.$.keywords.never.raw;else return s.withPrefixKey(e.compiledKey);if(i==="required")return r.$.node("required",{key:n,value:s});const a=e.hasDefault()?t.hasDefault()?e.default===t.default?e.default:O(`Invalid intersection of default values ${de(e.default)} & ${de(t.default)}`):e.default:t.hasDefault()?t.default:Qt;return r.$.node("optional",{key:n,value:s,default:a})};class eo extends tr{constructor(){super(...arguments);c(this,"required",this.kind==="required");c(this,"impliedBasis",this.$.keywords.object.raw);c(this,"serializedKey",js(this.key));c(this,"compiledKey",typeof this.key=="string"?this.key:this.serializedKey);c(this,"defaultValueMorphs",[r=>(r[this.key]=this.default,r)]);c(this,"defaultValueMorphsReference",Ot(this.defaultValueMorphs));c(this,"traverseAllows",(r,n)=>{if(this.key in r){n==null||n.path.push(this.key);const s=this.value.traverseAllows(r[this.key],n);return n==null||n.path.pop(),s}return!this.required});c(this,"traverseApply",(r,n)=>{this.key in r?(n.path.push(this.key),this.value.traverseApply(r[this.key],n),n.path.pop()):this.hasKind("required")?n.error(this.errorContext):this.hasKind("optional")&&this.hasDefault()&&n.queueMorphs(this.defaultValueMorphs)})}_transform(r,n){n.path.push(this.key);const s=super._transform(r,n);return n.path.pop(),s}hasDefault(){return"default"in this}compile(r){r.if(`${this.serializedKey} in data`,()=>r.traverseKey(this.serializedKey,`data${r.prop(this.key)}`,this.value)),this.hasKind("required")?r.else(()=>r.traversalKind==="Apply"?r.line(`ctx.error(${this.compiledErrorContext})`):r.return(!1)):r.traversalKind==="Apply"&&"default"in this&&r.else(()=>r.line(`ctx.queueMorphs(${this.defaultValueMorphsReference})`)),r.traversalKind==="Allows"&&r.return(!0)}}const yd=H({kind:"optional",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.schema(e)},default:{preserveUndefined:!0}},normalize:e=>e,defaults:{description:e=>`${e.compiledKey}?: ${e.value.description}`},intersections:{optional:ys}});class gd extends eo{constructor(){super(...arguments);c(this,"expression",`${this.compiledKey}?: ${this.value.expression}`)}}class vd extends eo{constructor(){super(...arguments);c(this,"expression",`${this.compiledKey}: ${this.value.expression}`);c(this,"errorContext",Object.freeze({code:"required",missingValueDescription:this.value.description,relativePath:[this.key]}));c(this,"compiledErrorContext",Ks(this.errorContext))}}const bd=H({kind:"required",hasAssociatedError:!0,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(e,t)=>t.$.schema(e)}},normalize:e=>e,defaults:{description:e=>`${e.compiledKey}: ${e.value.description}`,expected:e=>e.missingValueDescription,actual:()=>"missing"},intersections:{required:ys,optional:ys}}),Jn={child:!0,parse:(e,t)=>e.length===0?void 0:e.map(r=>t.$.schema(r))},_d=H({kind:"sequence",hasAssociatedError:!1,collapsibleKey:"variadic",keys:{prefix:Jn,optionals:Jn,variadic:{child:!0,parse:(e,t)=>t.$.schema(e,t)},minVariadicLength:{parse:e=>e===0?void 0:e},postfix:Jn},normalize:e=>{var t,r;if(typeof e=="string")return{variadic:e};if("variadic"in e||"prefix"in e||"optionals"in e||"postfix"in e||"minVariadicLength"in e){if((t=e.postfix)!=null&&t.length){if(!e.variadic)return O(kd);if((r=e.optionals)!=null&&r.length)return O(xd)}return e.minVariadicLength&&!e.variadic?O("minVariadicLength may not be specified without a variadic element"):e}return{variadic:e}},reduce:(e,t)=>{var a,o,u,l,d,h;let r=e.minVariadicLength??0;const n=((a=e.prefix)==null?void 0:a.slice())??[],s=((o=e.optionals)==null?void 0:o.slice())??[],i=((u=e.postfix)==null?void 0:u.slice())??[];if(e.variadic){for(;(l=s.at(-1))!=null&&l.equals(e.variadic);)s.pop();if(s.length===0)for(;(d=n.at(-1))!=null&&d.equals(e.variadic);)n.pop(),r++;for(;(h=i[0])!=null&&h.equals(e.variadic);)i.shift(),r++}else s.length===0&&n.push(...i.splice(0));if(r!==e.minVariadicLength||e.prefix&&e.prefix.length!==n.length)return t.node("sequence",{...e,prefix:n,postfix:i,optionals:s,minVariadicLength:r},{prereduced:!0})},defaults:{description:e=>e.isVariadicOnly?`${e.variadic.nestableExpression}[]`:`[${e.tuple.map(r=>r.kind==="optionals"?`${r.node.nestableExpression}?`:r.kind==="variadic"?`...${r.node.nestableExpression}[]`:r.node.expression).join(", ")}]`},intersections:{sequence:(e,t,r)=>{const n=pr({l:e.tuple,r:t.tuple,disjoint:new C({}),result:[],fixedVariants:[],ctx:r}),s=n.disjoint.isEmpty()?[n,...n.fixedVariants]:n.fixedVariants;return s.length===0?n.disjoint:s.length===1?r.$.node("sequence",Ni(s[0].result)):r.$.node("union",s.map(i=>({proto:Array,sequence:Ni(i.result)})))}}});class wd extends tr{constructor(){super(...arguments);c(this,"impliedBasis",this.$.keywords.Array.raw);c(this,"prefix",this.inner.prefix??[]);c(this,"optionals",this.inner.optionals??[]);c(this,"prevariadic",[...this.prefix,...this.optionals]);c(this,"postfix",this.inner.postfix??[]);c(this,"isVariadicOnly",this.prevariadic.length+this.postfix.length===0);c(this,"minVariadicLength",this.inner.minVariadicLength??0);c(this,"minLength",this.prefix.length+this.minVariadicLength+this.postfix.length);c(this,"minLengthNode",this.minLength===0?null:this.$.node("minLength",this.minLength));c(this,"maxLength",this.variadic?null:this.minLength+this.optionals.length);c(this,"maxLengthNode",this.maxLength===null?null:this.$.node("maxLength",this.maxLength));c(this,"impliedSiblings",this.minLengthNode?this.maxLengthNode?[this.minLengthNode,this.maxLengthNode]:[this.minLengthNode]:this.maxLengthNode?[this.maxLengthNode]:[]);c(this,"traverseAllows",(r,n)=>{for(let s=0;s<r.length;s++)if(!this.childAtIndex(r,s).traverseAllows(r[s],n))return!1;return!0});c(this,"traverseApply",(r,n)=>{for(let s=0;s<r.length;s++)n.path.push(s),this.childAtIndex(r,s).traverseApply(r[s],n),n.path.pop()});c(this,"tuple",$d(this.inner));c(this,"expression",this.description)}childAtIndex(r,n){if(n<this.prevariadic.length)return this.prevariadic[n];const s=r.length-this.postfix.length;return n>=s?this.postfix[n-s]:this.variadic??Xe(`Unexpected attempt to access index ${n} on ${this}`)}compile(r){this.prefix.forEach((n,s)=>r.traverseKey(`${s}`,`data[${s}]`,n)),this.optionals.forEach((n,s)=>{const i=`${s+this.prefix.length}`;r.if(`${i} >= ${r.data}.length`,()=>r.traversalKind==="Allows"?r.return(!0):r.return()),r.traverseKey(i,`data[${i}]`,n)}),this.variadic&&(this.postfix.length&&r.const("firstPostfixIndex",`${r.data}.length${this.postfix.length?`- ${this.postfix.length}`:""}`),r.for(`i < ${this.postfix.length?"firstPostfixIndex":"data.length"}`,()=>r.traverseKey("i","data[i]",this.variadic),this.prevariadic.length),this.postfix.forEach((n,s)=>{const i=`firstPostfixIndex + ${s}`;r.traverseKey(i,`data[${i}]`,n)})),r.traversalKind==="Allows"&&r.return(!0)}_transform(r,n){n.path.push(this.$.keywords.nonNegativeIntegerString.raw);const s=super._transform(r,n);return n.path.pop(),s}}const $d=e=>{var r,n,s;const t=[];return(r=e.prefix)==null||r.forEach(i=>t.push({kind:"prefix",node:i})),(n=e.optionals)==null||n.forEach(i=>t.push({kind:"optionals",node:i})),e.variadic&&t.push({kind:"variadic",node:e.variadic}),(s=e.postfix)==null||s.forEach(i=>t.push({kind:"postfix",node:i})),t},Ni=e=>e.reduce((t,r)=>(r.kind==="variadic"?t.variadic=r.node:t[r.kind]=Me(t[r.kind],r.node),t),{}),xd="A postfix required element cannot follow an optional element",kd="A postfix element requires a variadic element",pr=e=>{var h,x;const[t,...r]=e.l,[n,...s]=e.r;if(!t||!n)return e;const i=((h=r.at(-1))==null?void 0:h.kind)==="postfix",a=((x=s.at(-1))==null?void 0:x.kind)==="postfix",o=t.kind==="prefix"||n.kind==="prefix"?"prefix":t.kind==="optionals"||n.kind==="optionals"?i||a?"prefix":"optionals":t.kind==="postfix"||n.kind==="postfix"?"postfix":"variadic";if(t.kind==="prefix"&&n.kind==="variadic"&&a){const g=pr({...e,fixedVariants:[],r:s.map(b=>({...b,kind:"prefix"}))});g.disjoint.isEmpty()&&e.fixedVariants.push(g)}else if(n.kind==="prefix"&&t.kind==="variadic"&&i){const g=pr({...e,fixedVariants:[],l:r.map(b=>({...b,kind:"prefix"}))});g.disjoint.isEmpty()&&e.fixedVariants.push(g)}const u=ve(t.node,n.node,e.ctx);if(u instanceof C)if(o==="prefix"||o==="postfix")e.disjoint.add(u.withPrefixKey(o==="prefix"?`${e.result.length}`:`-${r.length+1}`)),e.result=[...e.result,{kind:o,node:e.ctx.$.keywords.never.raw}];else return o==="optionals"?e:pr({...e,fixedVariants:[],l:r.map(g=>({...g,kind:"prefix"})),r:r.map(g=>({...g,kind:"prefix"}))});else e.result=[...e.result,{kind:o,node:u}];const l=e.l.length,d=e.r.length;return(t.kind!=="variadic"||l>=d&&(n.kind==="variadic"||d===1))&&(e.l=r),(n.kind!=="variadic"||d>=l&&(t.kind==="variadic"||l===1))&&(e.r=s),pr(e)},Vs=/(?:0|(?:[1-9]\\d*))$/,Sd=Ot(Vs);var Ed=function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},Ad=function(e,t,r,n,s,i){function a(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=n.kind,u=o==="getter"?"get":o==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,x=!1,g=r.length-1;g>=0;g--){var b={};for(var y in n)b[y]=y==="access"?{}:n[y];for(var y in n.access)b.access[y]=n.access[y];b.addInitializer=function(w){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(w||null))};var m=(0,r[g])(o==="accessor"?{get:d.get,set:d.set}:d[u],b);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=a(m.get))&&(d.get=h),(h=a(m.set))&&(d.set=h),(h=a(m.init))&&s.unshift(h)}else(h=a(m))&&(o==="field"?s.unshift(h):d[u]=h)}l&&Object.defineProperty(l,n.name,d),x=!0};let Td=(()=>{var n,s,i;let e=tr,t=[],r;return i=class extends e{constructor(){super(...arguments);c(this,"impliedBasis",(Ed(this,t),this.$.keywords.object.raw));c(this,"impliedSiblings",this.children.flatMap(u=>u.impliedSiblings??[]));c(this,"props",this.required?this.optional?[...this.required,...this.optional]:this.required:this.optional??[]);c(this,"propsByKey",ie(this.props,(u,l)=>[l.key,l]));c(this,"propsByKeyReference",Ot(this.propsByKey));c(this,"expression",Cd(this));c(this,"requiredLiteralKeys",((n=this.required)==null?void 0:n.map(u=>u.key))??[]);c(this,"optionalLiteralKeys",((s=this.optional)==null?void 0:s.map(u=>u.key))??[]);c(this,"literalKeys",[...this.requiredLiteralKeys,...this.optionalLiteralKeys]);c(this,"exhaustive",this.undeclared!==void 0||this.index!==void 0);c(this,"traverseAllows",(u,l)=>this._traverse("Allows",u,l));c(this,"traverseApply",(u,l)=>this._traverse("Apply",u,l));c(this,"_traverse",(u,l,d)=>{const h=(d==null?void 0:d.currentErrorCount)??0;for(let g=0;g<this.props.length;g++)if(u==="Allows"){if(!this.props[g].traverseAllows(l,d))return!1}else if(this.props[g].traverseApply(l,d),d.failFast&&d.currentErrorCount>h)return!1;if(this.sequence){if(u==="Allows"){if(!this.sequence.traverseAllows(l,d))return!1}else if(this.sequence.traverseApply(l,d),d.failFast&&d.currentErrorCount>h)return!1}if(!this.exhaustive)return!0;const x=Object.keys(l);x.push(...Object.getOwnPropertySymbols(l));for(let g=0;g<x.length;g++){const b=x[g];let y=!1;if(this.index){for(const m of this.index)if(m.signature.traverseAllows(b,d)){if(u==="Allows"){d==null||d.path.push(b);const w=m.value.traverseAllows(l[b],d);if(d==null||d.path.pop(),!w)return!1}else if(d.path.push(b),m.value.traverseApply(l[b],d),d.path.pop(),d.failFast&&d.currentErrorCount>h)return!1;y=!0}}if(this.undeclared&&(y||(y=b in this.propsByKey),y||(y=this.sequence!==void 0&&typeof b=="string"&&Vs.test(b)),!y&&(u==="Allows"||(this.undeclared==="reject"?d.error({expected:"removed",actual:null,relativePath:[b]}):d.queueMorphs([m=>(delete m[b],m)]),d.failFast))))return!1;d==null||d.path.pop()}return!0})}keyof(){var l;let u=this.$.units(this.literalKeys).branches;return(l=this.index)==null||l.forEach(({signature:d})=>{u=u.concat(d.branches)}),this.$.node("union",u)}omit(...u){return this.$.node("structure",Ri(this.inner,u))}merge(u){const l=Ua(Ri(this.inner,[u.keyof()]));return u.required&&(l.required=Me(l.required,u.required)),u.optional&&(l.optional=Me(l.optional,u.optional)),u.index&&(l.index=Me(l.index,u.index)),u.sequence&&(l.sequence=u.sequence),u.undeclared?l.undeclared=u.undeclared:delete l.undeclared,this.$.node("structure",l)}compile(u){u.traversalKind==="Apply"&&u.initializeErrorCount(),this.props.forEach(l=>{u.check(l),u.traversalKind==="Apply"&&u.returnIfFailFast()}),this.sequence&&(u.check(this.sequence),u.traversalKind==="Apply"&&u.returnIfFailFast()),this.exhaustive&&(u.const("keys","Object.keys(data)"),u.line("keys.push(...Object.getOwnPropertySymbols(data))"),u.for("i < keys.length",()=>this.compileExhaustiveEntry(u))),u.traversalKind==="Allows"&&u.return(!0)}compileExhaustiveEntry(u){var l,d;return u.const("k","keys[i]"),this.undeclared&&u.let("matched",!1),(l=this.index)==null||l.forEach(h=>{u.if(`${u.invoke(h.signature,{arg:"k",kind:"Allows"})}`,()=>(u.traverseKey("k","data[k]",h.value),this.undeclared&&u.set("matched",!0),u))}),this.undeclared&&(((d=this.props)==null?void 0:d.length)!==0&&u.line(`matched ||= k in ${this.propsByKeyReference}`),this.sequence&&u.line(`matched ||= typeof k === "string" && ${Sd}.test(k)`),u.if("!matched",()=>u.traversalKind==="Allows"?u.return(!1):this.undeclared==="reject"?u.line('ctx.error({ expected: "removed", actual: null, relativePath: [k] })').if("ctx.failFast",()=>u.return()):u.line("ctx.queueMorphs([data => { delete data[k]; return data }])"))),u}},(()=>{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(e[Symbol.metadata]??null):void 0;r=[zs],Ad(i,null,r,{kind:"method",name:"keyof",static:!1,private:!1,access:{has:l=>"keyof"in l,get:l=>l.keyof},metadata:u},null,t),u&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})})(),i})();const Ri=(e,t)=>{const r={...e};return t.forEach(n=>{r.required&&(r.required=r.required.filter(s=>typeof n=="function"?!n.allows(s.key):n!==s.key)),r.optional&&(r.optional=r.optional.filter(s=>typeof n=="function"?!n.allows(s.key):n!==s.key)),r.index&&typeof n=="function"&&(r.index=r.index.filter(s=>!s.signature.extends(n)))}),r},to=e=>t=>{var r,n;if(t.props.length||t.index){const s=((r=t.index)==null?void 0:r.map(String))??[];t.props.forEach(a=>s.push(a[e])),t.undeclared&&s.push(`+ (undeclared): ${t.undeclared}`);const i=`{ ${s.join(", ")} }`;return t.sequence?`${i} & ${t.sequence.description}`:i}return((n=t.sequence)==null?void 0:n.description)??"{}"},Od=to("description"),Cd=to("expression"),Id=H({kind:"structure",hasAssociatedError:!1,normalize:e=>e,keys:{required:{child:!0,parse:Te("required")},optional:{child:!0,parse:Te("optional")},index:{child:!0,parse:Te("index")},sequence:{child:!0,parse:Te("sequence")},undeclared:{parse:e=>e==="ignore"?void 0:e}},defaults:{description:Od},intersections:{structure:(e,t,r)=>{const n={...e.inner},s={...t.inner};if(e.undeclared){const a=e.keyof(),o=t.requiredLiteralKeys.filter(u=>!a.allows(u));if(o.length)return C.from("presence",r.$.keywords.never.raw,t.propsByKey[o[0]].value).withPrefixKey(o[0]);s.optional&&(s.optional=s.optional.filter(u=>a.allows(u.key))),s.index&&(s.index=s.index.flatMap(u=>{if(u.signature.extends(a))return u;const l=Mt(a,u.signature,r.$);if(l instanceof C)return[];const d=gs(l,u.value,r.$);return d.required&&(s.required=s.required?[...s.required,...d.required]:d.required),d.index??[]}))}if(t.undeclared){const a=t.keyof(),o=e.requiredLiteralKeys.filter(u=>!a.allows(u));if(o.length)return C.from("presence",e.propsByKey[o[0]].value,r.$.keywords.never.raw).withPrefixKey(o[0]);n.optional&&(n.optional=n.optional.filter(u=>a.allows(u.key))),n.index&&(n.index=n.index.flatMap(u=>{if(u.signature.extends(a))return u;const l=Mt(a,u.signature,r.$);if(l instanceof C)return[];const d=gs(l,u.value,r.$);return d.required&&(n.required=n.required?[...n.required,...d.required]:d.required),d.index??[]}))}const i={};return(e.undeclared||t.undeclared)&&(i.undeclared=e.undeclared==="reject"||t.undeclared==="reject"?"reject":"delete"),fn({kind:"structure",baseInner:i,l:hn(n),r:hn(s),roots:[],ctx:r})}}}),gs=(e,t,r)=>{const[n,s]=Sl(e.branches,a=>a.hasKind("unit"));if(!n.length)return{index:r.node("index",{signature:e,value:t})};const i={};return i.required=n.map(a=>r.node("required",{key:a.unit,value:t})),s.length&&(i.index=r.node("index",{signature:s,value:t})),i},Us={...jc,alias:Vc,domain:Zc,unit:cd,proto:Gc,union:nd,morph:Qc,intersection:Hc,divisor:pc,regex:Dc,predicate:fc,required:bd,optional:yd,index:fd,sequence:_d,structure:Id},Nd={...Lc,alias:Fc,domain:Uc,unit:dd,proto:Xc,union:sd,morph:Yc,intersection:Wc,divisor:mc,regex:qc,predicate:hc,required:vd,optional:gd,index:hd,sequence:wd,structure:Td};class zi extends Nl{get[Lt](){return"module"}}const Mi={description:{meta:!0}},Qn=(e,t)=>{const r=Rd(e);return t&&!t.includes(r)?O(`Root of kind ${r} should be one of ${t}`):r},Rd=e=>{switch(typeof e){case"string":return e[0]==="$"?"alias":"domain";case"function":return V(e,"root")?e.kind:"proto";case"object":{if(e===null)break;if("morphs"in e)return"morph";if("branches"in e||Fe(e))return"union";if("unit"in e)return"unit";if("alias"in e)return"alias";const t=Object.keys(e);if(t.length===0||t.some(r=>r in Wa))return"intersection";if("proto"in e)return"proto";if("domain"in e)return"domain"}}return O(`${de(e)} is not a valid type schema`)},Gr={},zd=e=>Fe(e)?e.map(t=>t.collapsibleJson):e.collapsibleJson,Md=(e,t)=>{const r=Us[e],n={},s=vt(t.schema).sort(([y],[m])=>tn(y)?tn(m)?dn(y)-dn(m):1:tn(m)||y<m?-1:1),i=[];for(const y of s){const m=y[0],w=r.keys[m]??Mi[m];if(!w)return O(`Key ${m} is not valid on ${e} schema`);const A=w.parse?w.parse(y[1],t):y[1];A!==Qt&&(A!==void 0||w.preserveUndefined)&&(n[m]=A)}const a=vt(n);let o={},u={};a.forEach(([y,m])=>{const w=m,A=r.keys[y]??Mi[y],B=A.serialize??(A.child?zd:Bs);o[y]=B(w),A.child&&(Fe(w)?i.push(...w):i.push(w)),A.meta||(u[y]=o[y])}),r.finalizeJson&&(o=r.finalizeJson(o),u=r.finalizeJson(u));let l=o;const d=Object.keys(l);d.length===1&&d[0]===r.collapsibleKey&&(l=l[r.collapsibleKey],qr(l,"object")&&Object.keys(o).length===1&&(o=l,u=l));const h=JSON.stringify({kind:e,...o});if(t.reduceTo)return Gr[h]=t.reduceTo,t.reduceTo;const x=JSON.stringify({kind:e,...u});if(r.reduce&&!t.prereduced){const y=r.reduce(n,t.$);if(y)return y instanceof C?y.throw():(t.alias&&(y.alias??(y.alias=t.alias)),y)}if(Gr[h])return Gr[h];const g={id:t.id,kind:e,impl:r,inner:n,entries:a,json:o,typeJson:u,collapsibleJson:l,children:i,innerHash:h,typeHash:x,$:t.$};t.alias&&(g.alias=t.alias);for(const y in n)y!=="description"&&y!=="in"&&y!=="out"&&(g[y]=n[y]);const b=new Nd[e](g);return Gr[h]=b,b};class Pi extends ja{constructor(r){super("data","ctx");c(this,"traversalKind");c(this,"path",[]);c(this,"discriminants",[]);this.traversalKind=r}invoke(r,n){const s=(n==null?void 0:n.arg)??this.data;return this.requiresContextFor(r)?`${this.reference(r,n)}(${s}, ${this.ctx})`:`${this.reference(r,n)}(${s})`}reference(r,n){const s=(n==null?void 0:n.kind)??this.traversalKind,i=`this.${r.id}${s}`;return n!=null&&n.bind?`${i}.bind(${n==null?void 0:n.bind})`:i}requiresContextFor(r){return this.traversalKind==="Apply"||r.allowsRequiresContext}initializeErrorCount(){return this.const("errorCount","ctx.currentErrorCount")}returnIfFail(){return this.if("ctx.currentErrorCount > errorCount",()=>this.return())}returnIfFailFast(){return this.if("ctx.failFast && ctx.currentErrorCount > errorCount",()=>this.return())}traverseKey(r,n,s){const i=this.requiresContextFor(s);return i&&this.line(`${this.ctx}.path.push(${r})`),this.check(s,{arg:n}),i&&this.line(`${this.ctx}.path.pop()`),this}check(r,n){return this.traversalKind==="Allows"?this.if(`!${this.invoke(r,n)}`,()=>this.return(!1)):this.line(this.invoke(r,n))}writeMethod(r){return`${r}(${this.argNames.join(", ")}){
${this.body}    }
`}}var Pd=function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},Yn=function(e,t,r,n,s,i){function a(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=n.kind,u=o==="getter"?"get":o==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,d=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,x=!1,g=r.length-1;g>=0;g--){var b={};for(var y in n)b[y]=y==="access"?{}:n[y];for(var y in n.access)b.access[y]=n.access[y];b.addInitializer=function(w){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(w||null))};var m=(0,r[g])(o==="accessor"?{get:d.get,set:d.set}:d[u],b);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=a(m.get))&&(d.get=h),(h=a(m.set))&&(d.set=h),(h=a(m.init))&&s.unshift(h)}else(h=a(m))&&(o==="field"?s.unshift(h):d[u]=h)}l&&Object.defineProperty(l,n.name,d),x=!0};const jd=Object.assign(ie(Us,(e,t)=>[e,t.defaults]),{jitless:jl(),registerKeywords:!1,prereducedAliases:!1}),Ld=["registerKeywords","prereducedAliases"],ji=(e,t)=>{if(!t)return e;const r=oc(e,t);return Ld.forEach(n=>{n in t||delete r[n]}),r},Dd=e=>ji(ji(jd,ac),e),qd=e=>Fe(e)?e:"branches"in e&&Fe(e.branches)?e.branches:void 0,Bd=(e,t)=>O(`Node of kind ${t} is not valid as a ${e} definition`),Li=e=>`#${e} duplicates public alias ${e}`,pt={};let Kd=0;const Fd={};let Zs=(()=>{var s,i;let e=[],t,r,n;return i=class{constructor(o,u){c(this,"config",Pd(this,e));c(this,"resolvedConfig");c(this,"id",`$${++Kd}`);c(this,s,"scope");c(this,"referencesById",{});c(this,"references",[]);c(this,"resolutions",{});c(this,"json",{});c(this,"exportedNames");c(this,"aliases",{});c(this,"resolved",!1);c(this,"lazyResolutions",[]);c(this,"node",((o,u,l)=>{var w;let d=typeof o=="string"?o:Qn(u,o),h=u;if(cn(h)&&h.kind===d)return h.bindScope(this);if(d==="alias"&&!(l!=null&&l.prereduced)){const A=this.resolveRoot(Ga(h).alias);h=A,d=A.kind}else if(d==="union"&&qr(h,"object")){const A=qd(h);(A==null?void 0:A.length)===1&&(h=A[0],d=Qn(h))}const x=Us[d],g=((w=x.normalize)==null?void 0:w.call(x,h))??h;if(cn(g))return g.kind===d?g.bindScope(this):Bd(d,g.kind);const b=(l==null?void 0:l.alias)??d;pt[b]??(pt[b]=0);const y=`${b}${++pt[b]}`,m=Md(d,{...l,id:y,$:this,schema:g}).bindScope(this);return this.resolved?this.resolvedConfig.jitless||Di(m.references):Object.assign(this.referencesById,m.referencesById),m}).bind(this));c(this,"_exportedResolutions");c(this,"_exports");this.config=u??{},this.resolvedConfig=Dd(u),this.exportedNames=Object.keys(o).filter(l=>{if(l[0]==="#"){const d=l.slice(1);return d in this.aliases&&O(Li(d)),this.aliases[d]=o[l],!1}return l in this.aliases&&O(Li(l)),this.aliases[l]=o[l],!0}),this.ambient&&(this.ambient.export(),this.resolutions=ie(this.ambient.resolutions,(l,d)=>[l,V(d,"root")?d.bindScope(this):d])),Fd[this.id]=this}get keywords(){return i.keywords}get ambient(){return this.constructor.ambient}get raw(){return this}schema(o,u){return this.node(Qn(o),o,u)}defineRoot(o){return o}units(o,u){const l=[];for(const h of o)l.includes(h)||l.push(h);const d=l.map(h=>this.node("unit",{unit:h},u));return this.node("union",d,{...u,prereduced:!0})}lazilyResolve(o,u){u||(pt.synthetic??(pt.synthetic=0),u=`synthetic${++pt.synthetic}`);const l=this.node("alias",{alias:u,resolve:o},{prereduced:!0});return this.lazyResolutions.push(l),l}parseRoot(o,u){return this.schema(o,u)}resolveRoot(o){return this.maybeResolveRoot(o)??O(Ws(o))}maybeResolveRoot(o){const u=this.maybeResolveGenericOrRoot(o);if(!V(u,"generic"))return u}maybeResolveGenericOrRoot(o){const u=this.maybeResolve(o);return V(u,"module")?O(Ud(o)):u}preparseRoot(o){return o}maybeResolve(o){const u=this.maybeShallowResolve(o);return typeof u=="string"?this.node("alias",{alias:u},{prereduced:!0}):u}maybeShallowResolve(o){const u=this.resolutions[o];if(u)return u;let l=this.aliases[o];return l?(l=this.preparseRoot(l),V(l,"generic")?this.resolutions[o]=dc(l):V(l,"module")?this.resolutions[o]=l:(this.resolutions[o]=o,this.resolutions[o]=this.parseRoot(l))):this.maybeResolveSubalias(o)}maybeResolveSubalias(o){return ro(this.aliases,o)}import(...o){return new zi(ie(this.export(...o),(u,l)=>[`#${u}`,l]))}export(...o){if(!this._exports){this._exports={};for(const l of this.exportedNames)this._exports[l]=this.maybeResolve(l);this.lazyResolutions.forEach(l=>l.resolution),this._exportedResolutions=so(this,this._exports),Object.assign(this.json,ie(this._exportedResolutions,(l,d)=>V(d,"root")?[l,d.json]:[])),Object.assign(this.resolutions,this._exportedResolutions),this.config.registerKeywords&&Object.assign(i.keywords,this._exportedResolutions),this.references=Object.values(this.referencesById),this.resolvedConfig.jitless||Di(this.references),this.resolved=!0}const u=o.length?o:this.exportedNames;return new zi(ie(u,(l,d)=>[d,this._exports[d]]))}resolve(o){return this.export()[o]}},s=Lt,(()=>{const o=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Zn],r=[Zn],n=[Zn],Yn(i,null,t,{kind:"method",name:"schema",static:!1,private:!1,access:{has:u=>"schema"in u,get:u=>u.schema},metadata:o},null,e),Yn(i,null,r,{kind:"method",name:"defineRoot",static:!1,private:!1,access:{has:u=>"defineRoot"in u,get:u=>u.defineRoot},metadata:o},null,e),Yn(i,null,n,{kind:"method",name:"units",static:!1,private:!1,access:{has:u=>"units"in u,get:u=>u.units},metadata:o},null,e),o&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),c(i,"keywords",{}),c(i,"ambient"),i})();const ro=(e,t)=>{const r=t.indexOf(".");if(r===-1)return;const n=t.slice(0,r),s=e[n];if(s===void 0)return;if(!V(s,"module"))return O(Vd(n));const i=t.slice(r+1),a=s[i];if(a===void 0)return V(a,"module")?ro(a,i):O(Ws(t));if(V(a,"root")||V(a,"generic"))return a;Xe(`Unexpected resolution for alias '${t}': ${de(a)}`)},ir=(e,t)=>new no(e,t),no=Zs,te=new no({});te.schema;te.node;te.defineRoot;te.units;te.raw.schema;te.raw.node;te.raw.defineRoot;te.raw.units;const so=(e,t)=>{const r={};for(const n in t){const s=t[n];if(V(s,"module")){const i=so(e,s),a=ie(i,(o,u)=>[`${n}.${o}`,u]);Object.assign(r,a)}else V(s,"generic")||V(s,"root")?r[n]=s:Xe(`Unexpected scope resolution ${de(s)}`)}return r},Ws=e=>`'${e}' is unresolvable`,Vd=e=>`'${e}' must reference a module to be accessed using dot syntax`,Ud=e=>`Reference to submodule '${e}' must specify an alias`,Di=e=>{const t=Zd(e);for(const r of e)r.jit||(r.jit=!0,r.traverseAllows=t[`${r.id}Allows`].bind(t),r.isRoot()&&!r.allowsRequiresContext&&(r.allows=r.traverseAllows),r.traverseApply=t[`${r.id}Apply`].bind(t))},Zd=e=>new ja().block("return",t=>(e.forEach(r=>{const n=new Pi("Allows").indent();r.compile(n);const s=new Pi("Apply").indent();r.compile(s),t.line(`${n.writeMethod(`${r.id}Allows`)},`).line(`${s.writeMethod(`${r.id}Apply`)},`)}),t)).compile()(),Hs=ir({any:{},bigint:"bigint",boolean:[{unit:!1},{unit:!0}],false:{unit:!1},never:[],null:{unit:null},number:"number",object:"object",string:"string",symbol:"symbol",true:{unit:!0},unknown:{},void:{unit:void 0},undefined:{unit:void 0}},{prereducedAliases:!0,registerKeywords:!0}).export(),Wd=ir({lengthBoundable:["string",Array],propertyKey:["string","symbol"],nonNegativeIntegerString:{domain:"string",regex:Vs}},{prereducedAliases:!0,registerKeywords:!0}).export();te.node("union",{branches:["string","number","object","bigint","symbol",{unit:!0},{unit:!1},{unit:null},{unit:void 0}]},{reduceTo:te.node("intersection",{},{prereduced:!0})});const Js=ir({Array,Function,Date,Error,Map,RegExp,Set,WeakMap,WeakSet,Promise},{prereducedAliases:!0,registerKeywords:!0}).export(),Hd=e=>!Number.isNaN(+e),Jd=(e,t)=>{{const r=new Date(e);return Hd(r)?r:"a valid date"}},Ze=(e,t)=>te.defineRoot({domain:"string",regex:{rule:e.source,flags:e.flags,description:t}}),Qd=te.defineRoot({in:Ze(ds,"a well-formed numeric string"),morphs:e=>Number.parseFloat(e)}),Yd=te.defineRoot({in:Ze(un,"a well-formed integer string"),morphs:(e,t)=>{if(!qa(e))return t.error("a well-formed integer string");const r=Number.parseInt(e);return Number.isSafeInteger(r)?r:t.error("an integer in the range Number.MIN_SAFE_INTEGER to Number.MAX_SAFE_INTEGER")}}),Gd=te.defineRoot({in:"string",morphs:(e,t)=>{try{return new URL(e)}catch{return t.error("a valid URL")}}}),Xd=te.defineRoot({in:"string",morphs:(e,t)=>{try{return JSON.parse(e)}catch{return t.error("a valid JSON string")}}}),ef=te.defineRoot({in:"string",morphs:(e,t)=>{const r=Jd(e);return typeof r=="string"?t.error(r):r}}),tf=ir({url:Gd,number:Qd,integer:Yd,date:ef,json:Xd}).export(),rf=e=>{const t=e.replace(/[- ]+/g,"");let r=0,n,s,i=!1;for(let a=t.length-1;a>=0;a--)n=t.substring(a,a+1),s=Number.parseInt(n,10),i?(s*=2,s>=10?r+=s%10+1:r+=s):r+=s,i=!i;return!!(r%10===0&&t)},nf=/^(?:4[0-9]{12}(?:[0-9]{3,6})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12,15}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14}|^(81[0-9]{14,17}))$/,qi="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",yt=`(${qi}[.]){3}${qi}`,sf=new RegExp(`^${yt}$`),af=Ze(sf,"a valid IPv4 address"),X="(?:[0-9a-fA-F]{1,4})",of=new RegExp(`^((?:${X}:){7}(?:${X}|:)|(?:${X}:){6}(?:${yt}|:${X}|:)|(?:${X}:){5}(?::${yt}|(:${X}){1,2}|:)|(?:${X}:){4}(?:(:${X}){0,1}:${yt}|(:${X}){1,3}|:)|(?:${X}:){3}(?:(:${X}){0,2}:${yt}|(:${X}){1,4}|:)|(?:${X}:){2}(?:(:${X}){0,3}:${yt}|(:${X}){1,5}|:)|(?:${X}:){1}(?:(:${X}){0,4}:${yt}|(:${X}){1,6}|:)|(?::((?::${X}){0,5}:${yt}|(?::${X}){1,7}|:)))(%[0-9a-zA-Z-.:]{1,})?$`),uf=Ze(of,"a valid IPv6 address"),lf=te.defineRoot([af,uf]),cf=te.defineRoot({domain:"string",predicate:{predicate:e=>{try{new URL(e)}catch{return!1}return!0},description:"a valid URL"}}),df=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,ff=Ze(df,"a valid email"),hf=/^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}$/,pf=Ze(hf,"a valid UUID"),mf=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,yf=Ze(mf,"a valid semantic version (see https://semver.org/)"),gf=te.defineRoot({domain:"string",regex:{rule:nf.source,description:"a valid credit card number"},predicate:{predicate:rf,description:"a valid credit card number"}}),vf=ir({alpha:Ze(/^[A-Za-z]*$/,"only letters"),alphanumeric:Ze(/^[A-Za-z\d]*$/,"only letters and digits"),lowercase:Ze(/^[a-z]*$/,"only lowercase letters"),uppercase:Ze(/^[A-Z]*$/,"only uppercase letters"),creditCard:gf,email:ff,uuid:pf,url:cf,semver:yf,ip:lf,integer:{domain:"number",divisor:1}},{prereducedAliases:!0}).export(),io=ir({...Hs,...Js,...vf,parse:tf});Zs.ambient=io.raw;const bf=io.export();var Km;class ao extends Ms{constructor(r,n,s){super((...i)=>s.parseRoot(n));c(this,"params");c(this,"def");c(this,"$");c(this,Km,"generic");this.params=r,this.def=n,this.$=s}}Km=Lt;const _f=e=>(()=>{}).bind(e);class Ke{constructor(t){c(this,"chars");c(this,"i");this.chars=[...t],this.i=0}shift(){return this.chars[this.i++]??""}get lookahead(){return this.chars[this.i]??""}get nextLookahead(){return this.chars[this.i+1]??""}get length(){return this.chars.length}shiftUntil(t){let r="";for(;this.lookahead;){if(t(this,r))if(r[r.length-1]===Ke.escapeToken)r=r.slice(0,-1);else break;r+=this.shift()}return r}shiftUntilNextTerminator(){return this.shiftUntilNonWhitespace(),this.shiftUntil(Ke.lookaheadIsTerminator)}shiftUntilNonWhitespace(){return this.shiftUntil(Ke.lookaheadIsNotWhitespace)}jumpToIndex(t){this.i=t<0?this.length+t:t}get location(){return this.i}get unscanned(){return this.chars.slice(this.i,this.length).join("")}get scanned(){return this.chars.slice(0,this.i).join("")}sliceChars(t,r){return this.chars.slice(t,r).join("")}lookaheadIs(t){return this.lookahead===t}lookaheadIsIn(t){return this.lookahead in t}}(function(e){e.lookaheadIsTerminator=t=>t.lookahead in e.terminatingChars,e.lookaheadIsNotWhitespace=t=>!(t.lookahead in e.whiteSpaceTokens),e.terminatingChars={"<":!0,">":!0,"=":!0,"|":!0,"&":!0,")":!0,"[":!0,"%":!0," ":!0,",":!0},e.finalizingLookaheads={">":!0,",":!0,"":!0},e.escapeToken="\\",e.whiteSpaceTokens={" ":!0,"\n":!0,"	":!0},e.lookaheadIsFinalizing=(t,r)=>t===">"?r[0]==="="?r[1]==="=":r.trimStart()===""||Pe(r.trimStart()[0],e.terminatingChars):t===","})(Ke||(Ke={}));const wf=(e,t)=>{var a;let r;const n={},s=ls(e).map(kf);if(((a=s[0])==null?void 0:a.kind)==="..."){const o=s.shift(),u=t.$.parse(o.value,t);if(!u.hasKind("intersection")||!u.structure)return O(Af(typeof o.value=="string"?o.value:de(o.value)));r=u.structure}for(const o of s){if(o.kind==="...")return O(xf);if(o.kind==="+"){o.value!=="reject"&&o.value!=="delete"&&o.value!=="ignore"&&O($f(o.value)),n.undeclared=o.value;continue}if(o.kind==="index"){const u=t.$.parse(o.key,t),l=t.$.parse(o.value,t),d=gs(u,l,t.$);d.required&&(n.required=Me(n.required,d.required)),d.index&&(n.index=Me(n.index,d.index))}else{const u=t.$.parse(o.value,t),l={key:o.key,value:u};if(o.default!==Qt){const d=u(o.default);d instanceof wr&&O(`Default value at ${de(o.key)} ${d}`),u.assert(o.default),l.default=o.default}n[o.kind]=Me(n[o.kind],l)}}const i=t.$.node("structure",n);return t.$.schema({domain:"object",structure:(r==null?void 0:r.merge(i))??i})},$f=e=>`Value of '+' key must be 'reject', 'delete', or 'ignore' (was ${de(e)})`,xf="Spread operator may only be used as the first key in an object",kf=([e,t])=>{const r=Ef(e);return Fe(t)&&t[1]==="="?(r.kind!=="required"&&O(Sf),{kind:"optional",key:r.key,value:t[0],default:t[2]}):{kind:r.kind,key:r.key,value:t,default:Qt}},Sf="Only required keys may specify default values, e.g. { ark: ['string', '=', ''] }",Ef=e=>typeof e=="symbol"?{kind:"required",key:e}:e.at(-1)==="?"?e.at(-2)===Ke.escapeToken?{kind:"required",key:`${e.slice(0,-2)}?`}:{kind:"optional",key:e.slice(0,-1)}:e[0]==="["&&e.at(-1)==="]"?{kind:"index",key:e.slice(1,-1)}:e[0]===Ke.escapeToken&&e[1]==="["&&e.at(-1)==="]"?{kind:"required",key:e.slice(1)}:e==="..."||e==="+"?{kind:e,key:e}:{kind:"required",key:e==="\\..."?"...":e==="\\+"?"+":e},Af=e=>`Spread operand must resolve to an object literal type (was ${e})`,Tf=e=>`Private type references should not include '#'. Use '${e.slice(1)}' instead.`,Of={">":!0,">=":!0},Cf={"<":!0,"<=":!0},mn={"<":">",">":"<","<=":">=",">=":"<=","==":"=="},If=e=>`Unmatched )${e===""?"":` before ${e}`}`,oo=e=>`Missing ${e}`,Nf=(e,t)=>`Left bounds are only valid when paired with right bounds (try ...${t}${e})`,uo=e=>`Left-bounded expressions must specify their limits using < or <= (was ${e})`,Rf=(e,t,r,n)=>`An expression may have at most one left bound (parsed ${e}${mn[t]}, ${r}${mn[n]})`,zf=(e,t,r)=>lo(e,t,r,[],[]),lo=(e,t,r,n,s)=>{const i=r.parseUntilFinalizer();return n.push(i.scanner.scanned.slice(0,-1)),s.push(i.root),i.finalizer===">"?s.length===t.length?{result:s,unscanned:i.scanner.unscanned}:i.error(co(e,t,n)):i.finalizer===","?lo(e,t,r,n,s):i.error(oo(">"))},co=(e,t,r)=>`${e}<${t.join(", ")}> requires exactly ${t.length} args (got ${r.length}${r.length===0?"":`: ${r.join(", ")}`})`,Bi=e=>{const t=e.scanner.shiftUntilNextTerminator();t==="keyof"?e.addPrefix("keyof"):e.root=Pf(e,t)},Mf=(e,t,r)=>{if(r.scanner.shiftUntilNonWhitespace(),r.scanner.shift()!=="<")return r.error(co(e,t.params,[]));const s=zf(e,t.params,r),i=s.unscanned.length;return r.scanner.jumpToIndex(i===0?r.scanner.length:-i),t(...s.result)},Pf=(e,t)=>jf(e,t)??Lf(e,t)??e.error(t===""?fo(e):t[0]==="#"?Tf(t):Ws(t)),jf=(e,t)=>{var n;if((n=e.ctx.args)!=null&&n[t])return e.ctx.args[t].raw;const r=e.ctx.$.maybeResolve(t);if(r instanceof sr)return r;if(r!==void 0)return V(r,"generic")?Mf(t,r,e):O(`Unexpected resolution ${de(r)}`)},Lf=(e,t)=>{const r=Fa(t,{strict:!0});if(r!==void 0)return e.ctx.$.node("unit",{unit:r});const n=ec(t);if(n!==void 0)return e.ctx.$.node("unit",{unit:n})},fo=e=>{const t=e.previousOperator();return t?ho(t,e.scanner.unscanned):Df(e.scanner.unscanned)},ho=(e,t="")=>`Token '${e}' requires a right operand${t?` before '${t}'`:""}`,Df=e=>`Expected an expression${e?` before '${e}'`:""}`,qf=(e,t)=>Ff(e,t)??Bf(e,t),Bf=(e,t)=>{let r=[{}],n=0;for(;n<e.length;){let s=!1,i=!1;e[n]==="..."&&n<e.length-1&&(s=!0,n++);const a=t.$.parse(e[n],t);if(n++,e[n]==="?"){if(s)return O(Wf);i=!0,n++}if(s){if(!a.extends(Js.Array))return O(Vf(a.expression));r=r.flatMap(o=>a.branches.map(u=>Kf(Ua(o),u)))}else r=r.map(o=>Vt(o,i?"optional":"required",a))}return t.$.raw.schema(r.map(s=>({proto:Array,sequence:s})))},Vt=(e,t,r)=>{switch(t){case"required":return e.optionals?O(Uf):(e.variadic?e.postfix=Me(e.postfix,r):e.prefix=Me(e.prefix,r),e);case"optional":return e.variadic?O(Zf):(e.optionals=Me(e.optionals,r),e);case"variadic":return e.postfix&&O(Ki),e.variadic?e.variadic.equals(r)||O(Ki):e.variadic=r.raw,e}},Kf=(e,t)=>{const r=t.firstReferenceOfKind("sequence");return r?(r.prefix.forEach(n=>Vt(e,"required",n)),r.optionals.forEach(n=>Vt(e,"optional",n)),r.variadic&&Vt(e,"variadic",r.variadic),r.postfix.forEach(n=>Vt(e,"required",n)),e):Vt(e,"variadic",Hs.unknown)},Ff=(e,t)=>eh(e)?yo[e[0]](e,t):Qf(e)?mo[e[1]](e,t):void 0,Vf=e=>`Spread element must be an array (was ${e})`,Ki="A tuple may have at most one variadic element",Uf="A required element may not follow an optional element",Zf="An optional element may not follow a variadic element",Wf="A spread element cannot be optional",Hf=(e,t)=>t.$.parse(e[1],t).keyof(),Fi=(e,t)=>{if(e[2]===void 0)return O(ho(e[1],""));const r=t.$.parse(e[0],t),n=t.$.parse(e[2],t);return e[1]==="&"?r.and(n):r.or(n)},Jf=(e,t)=>t.$.parse(e[0],t).array(),Qf=e=>mo[e[1]]!==void 0,Yf=(e,t)=>typeof e[2]!="function"?O(po("=>",e[2])):t.$.parse(e[0],t).pipe(e[2]),po=(e,t)=>`${e===":"?"Narrow":"Morph"} expression requires a function following '${e}' (was ${typeof t})`,Gf=(e,t)=>typeof e[2]!="function"?O(po(":",e[2])):t.$.parse(e[0],t).constrain("predicate",e[2]),Xf=(e,t)=>t.$.parse(e[0],t).configureShallowDescendants(e[2]),mo={"|":Fi,"&":Fi,"[]":Jf,":":Gf,"=>":Yf,"@":Xf},yo={keyof:Hf,instanceof:(e,t)=>{if(typeof e[1]!="function")return O(Vi(cs(e[1])));const r=e.slice(1).map(n=>typeof n=="function"?t.$.node("proto",{proto:n}):O(Vi(cs(n))));return r.length===1?r[0]:t.$.node("union",{branches:r})},"===":(e,t)=>t.$.units(e.slice(1))},eh=e=>yo[e[0]]!==void 0,Vi=e=>`Expected a constructor following 'instanceof' operator (was ${e})`,th=(e,t)=>{const r=Ps(e);switch(r){case void 0:return V(e,"root")?e:wf(e,t);case"Array":return qf(e,t);case"RegExp":return t.$.node("intersection",{domain:"string",regex:e},{prereduced:!0});case"Function":{const n=Na(e)?e():e;return V(n,"root")?n:O(vs("Function"))}default:return O(vs(r??de(e)))}},vs=e=>`Type definitions must be strings or objects (was ${e})`,rh=e=>typeof e=="string"&&e[0]==="d"&&(e[1]==="'"||e[1]==='"')&&e.at(-1)===e[1],Ui=e=>e.toString()!=="Invalid Date",nh=e=>e.slice(2,-1),go=e=>`'${e}' could not be parsed by the Date constructor`,sh=(e,t)=>ih(e,t),ih=(e,t)=>{const r=new Date(e);if(Ui(r))return r;const n=Fa(e);if(n!==void 0){const s=new Date(n);if(Ui(s))return s}return t?O(t===!0?go(e):t):void 0},ah=(e,t)=>{const r=lh(e,t);if(e.root.hasKind("unit")){if(typeof e.root.unit=="number"){e.reduceLeftBound(e.root.unit,r),e.unsetRoot();return}if(e.root.unit instanceof Date){const n=`d'${e.root.description??e.root.unit.toISOString()}'`;e.unsetRoot(),e.reduceLeftBound(n,r);return}}return fh(e,r)},oh={"<":!0,">":!0},uh={"<":1,">":1,"=":1},lh=(e,t)=>e.scanner.lookaheadIs("=")?`${t}${e.scanner.shift()}`:Pe(t,oh)?t:e.error(ch),Zi=(e,t,r,n)=>r.extends(Hs.number)?typeof t!="number"?O(bs(e,t,n)):e==="=="?["min","max"]:e[0]===">"?["min"]:["max"]:r.extends(Wd.lengthBoundable)?typeof t!="number"?O(bs(e,t,n)):e==="=="?["minLength","maxLength"]:e[0]===">"?["minLength"]:["maxLength"]:r.extends(Js.Date)?e==="=="?["after","before"]:e[0]===">"?["after"]:["before"]:O($c(r.expression)),ch="= is not a valid comparator. Use == to check for equality",dh=e=>({rule:rh(e.limit)?nh(e.limit):e.limit,exclusive:e.comparator.length===1}),fh=(e,t)=>{const r=e.unsetRoot(),n=e.scanner.location;e.parseOperand();const s=e.unsetRoot(),i=e.scanner.sliceChars(n,e.scanner.location);if(e.root=r,!s.hasKind("unit")||typeof s.unit!="number"&&!(s.unit instanceof Date))return e.error(bs(t,i,"right"));const a=s.unit,o=t.length===1;for(const l of Zi(t,typeof a=="number"?a:i,r,"right"))e.constrainRoot(l,{rule:a,exclusive:o});if(!e.branches.leftBound)return;if(!Pe(t,Cf))return e.error(uo(t));const u=Zi(e.branches.leftBound.comparator,e.branches.leftBound.limit,r,"left");e.constrainRoot(u[0],dh(e.branches.leftBound)),e.branches.leftBound=null},bs=(e,t,r)=>`Comparator ${r==="left"?mn[e]:e} must be ${r==="left"?"preceded":"followed"} by a corresponding literal (was ${t})`,hh=e=>{const t=e.scanner.shiftUntilNextTerminator(),r=Xl(t,{errorOnFail:Wi(t)});r===0&&e.error(Wi(0)),e.root=e.root.constrain("divisor",r)},Wi=e=>`% operator must be followed by a non-zero integer literal (was ${e})`,vo=e=>{const t=e.scanner.shift();return t===""?e.finalize(""):t==="["?e.scanner.shift()==="]"?e.setRoot(e.root.array()):e.error(ph):t==="|"||t==="&"?e.pushRootToBranch(t):t===")"?e.finalizeGroup():Ke.lookaheadIsFinalizing(t,e.scanner.unscanned)?e.finalize(t):Pe(t,uh)?ah(e,t):t==="%"?hh(e):t===" "?vo(e):e.error(Qs(t))},Qs=(e,t="")=>`'${e}' is not allowed here${t&&` (should be ${t})`}`,ph="Missing expected ']'",bo=e=>_o(new Ke(e)),mh="An empty string is not a valid generic parameter name",_o=e=>{const t=e.shiftUntilNextTerminator();t===""&&O(mh),e.shiftUntilNonWhitespace();const r=e.shift();return r===""?[t]:r===","?[t,..._o(e)]:O(Qs(r,","))},Hi=(e,t)=>{const r=e.scanner.shiftUntil(gh[$o[t]]);if(e.scanner.lookahead==="")return e.error(bh(r,t));if(e.scanner.shift(),t==="/")e.root=e.ctx.$.node("intersection",{domain:"string",regex:r},{prereduced:!0});else if(Pe(t,wo))e.root=e.ctx.$.node("unit",{unit:r});else{const n=sh(r,go(r));e.root=e.ctx.$.node("unit",{unit:n,description:r})}},wo={"'":1,'"':1},yh={"/":1,"'":1,'"':1},$o={"d'":"'",'d"':'"',"'":"'",'"':'"',"/":"/"},gh={"'":e=>e.lookahead==="'",'"':e=>e.lookahead==='"',"/":e=>e.lookahead==="/"},vh={'"':"double-quote","'":"single-quote","/":"forward slash"},bh=(e,t)=>`${t}${e} requires a closing ${vh[$o[t]]}`,xo=e=>e.scanner.lookahead===""?e.error(fo(e)):e.scanner.lookahead==="("?e.shiftedByOne().reduceGroupOpen():e.scanner.lookaheadIsIn(yh)?Hi(e,e.scanner.shift()):e.scanner.lookaheadIsIn(Ke.whiteSpaceTokens)?xo(e.shiftedByOne()):e.scanner.lookahead==="d"&&e.scanner.nextLookahead in wo?Hi(e,`${e.scanner.shift()}${e.scanner.shift()}`):Bi(e),_h=e=>{e.parseOperand();const t=ko(e).root;return t?(e.scanner.shiftUntilNonWhitespace(),e.scanner.lookahead&&O(Qs(e.scanner.lookahead)),t):Xe(`Root was unexpectedly unset after parsing string '${e.scanner.scanned}'`)},ko=e=>{for(;e.finalizer===void 0;)wh(e);return e},wh=e=>e.hasRoot()?e.parseOperator():e.parseOperand();class Ys{constructor(t,r){c(this,"ctx");c(this,"scanner");c(this,"root");c(this,"branches",{prefixes:[],leftBound:null,intersection:null,union:null});c(this,"finalizer");c(this,"groups",[]);this.ctx=r,this.scanner=new Ke(t)}error(t){return O(t)}hasRoot(){return this.root!==void 0}setRoot(t){this.root=t}unsetRoot(){const t=this.root;return this.root=void 0,t}constrainRoot(...t){this.root=this.root.constrain(t[0],t[1])}finalize(t){if(this.groups.length)return this.error(oo(")"));this.finalizeBranches(),this.finalizer=t}reduceLeftBound(t,r){const n=mn[r];if(!Pe(n,Of))return this.error(uo(r));if(this.branches.leftBound)return this.error(Rf(this.branches.leftBound.limit,this.branches.leftBound.comparator,t,n));this.branches.leftBound={comparator:n,limit:t}}finalizeBranches(){this.assertRangeUnset(),this.branches.union?(this.pushRootToBranch("|"),this.root=this.branches.union):this.branches.intersection?(this.pushRootToBranch("&"),this.root=this.branches.intersection):this.applyPrefixes()}finalizeGroup(){this.finalizeBranches();const t=this.groups.pop();if(!t)return this.error(If(this.scanner.unscanned));this.branches=t}addPrefix(t){this.branches.prefixes.push(t)}applyPrefixes(){for(;this.branches.prefixes.length;){const t=this.branches.prefixes.pop();this.root=t==="keyof"?this.root.keyof():Xe(`Unexpected prefix '${t}'`)}}pushRootToBranch(t){var n,s;this.assertRangeUnset(),this.applyPrefixes();const r=this.root;this.branches.intersection=((n=this.branches.intersection)==null?void 0:n.and(r))??r,t==="|"&&(this.branches.union=((s=this.branches.union)==null?void 0:s.or(this.branches.intersection))??this.branches.intersection,this.branches.intersection=null),this.root=void 0}parseUntilFinalizer(){return ko(new Ys(this.scanner.unscanned,this.ctx))}parseOperator(){return vo(this)}parseOperand(){return xo(this)}assertRangeUnset(){if(this.branches.leftBound)return this.error(Nf(this.branches.leftBound.limit,this.branches.leftBound.comparator))}reduceGroupOpen(){this.groups.push(this.branches),this.branches={prefixes:[],leftBound:null,union:null,intersection:null}}previousOperator(){var t;return((t=this.branches.leftBound)==null?void 0:t.comparator)??this.branches.prefixes.at(-1)??(this.branches.intersection?"&":this.branches.union?"|":void 0)}shiftedByOne(){return this.scanner.shift(),this}}const $h=Object.freeze({errors:wr});class xh extends Ms{constructor(t){super((...r)=>{if(r.length===1)return t.parseRoot(r[0]);if(r.length===2&&typeof r[0]=="string"&&r[0][0]==="<"&&r[0].at(-1)===">"){const n=bo(r[0].slice(1,-1)),s=r[1];return new ao(n,s,t)}return t.parseRoot(r)},{bind:t,attach:$h})}}const kh=(e,t={})=>new So(e,t);class So extends Zs{constructor(r,n){const s={};for(const i in r){const a=Sh(i);s[a.name]=a.params.length?new ao(a.params,r[i],{}):r[i]}super(s,n);c(this,"parseCache",{});c(this,"type",new xh(this));c(this,"match",_f(this));c(this,"declare",(()=>({type:this.type})).bind(this));c(this,"define",(r=>r).bind(this))}preparseRoot(r){return Na(r)&&!V(r,"generic")?r():r}parseRoot(r){return this.parse(r,{$:this,args:{}}).bindScope(this)}parse(r,n){return typeof r=="string"?n.args&&Object.keys(n.args).every(s=>!r.includes(s))?this.parseString(r,n):(this.parseCache[r]||(this.parseCache[r]=this.parseString(r,n)),this.parseCache[r]):qr(r,"object")?th(r,n):O(vs(ft(r)))}parseString(r,n){var s;return this.maybeResolveRoot(r)??(r.endsWith("[]")&&((s=this.maybeResolveRoot(r.slice(0,-2)))==null?void 0:s.array())||_h(new Ys(r,n)))}}const Sh=e=>{const t=e.indexOf("<");return t===-1?{name:e,params:[]}:(e.at(-1)!==">"&&O("'>' must be the last character of a generic declaration in a scope"),{name:e.slice(0,t),params:bo(e.slice(t+1,-1))})},ar=kh(bf);So.ambient=ar.raw;ar.export();ar.type;ar.match;ar.define;ar.declare;function Eh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function On(e){return typeof e!="object"&&typeof e!="function"||e===null}function _t(){this.childBranches=new WeakMap,this.primitiveKeys=new Map,this.hasValue=!1,this.value=void 0}_t.prototype.has=function(t){var r=On(t)?this.primitiveKeys.get(t):t;return r?this.childBranches.has(r):!1};_t.prototype.get=function(t){var r=On(t)?this.primitiveKeys.get(t):t;return r?this.childBranches.get(r):void 0};_t.prototype.resolveBranch=function(t){if(this.has(t))return this.get(t);var r=new _t,n=this.createKey(t);return this.childBranches.set(n,r),r};_t.prototype.setValue=function(t){return this.hasValue=!0,this.value=t};_t.prototype.createKey=function(t){if(On(t)){var r={};return this.primitiveKeys.set(t,r),r}return t};_t.prototype.clear=function(){if(arguments.length===0)this.childBranches=new WeakMap,this.primitiveKeys.clear(),this.hasValue=!1,this.value=void 0;else if(arguments.length===1){var t=arguments[0];if(On(t)){var r=this.primitiveKeys.get(t);r&&(this.childBranches.delete(r),this.primitiveKeys.delete(t))}else this.childBranches.delete(t)}else{var n=arguments[0];if(this.has(n)){var s=this.get(n);s.clear.apply(s,Array.prototype.slice.call(arguments,1))}}};var Ah=function(t){var r=new _t;function n(){var s=Array.prototype.slice.call(arguments),i=s.reduce(function(u,l){return u.resolveBranch(l)},r);if(i.hasValue)return i.value;var a=t.apply(null,s);return i.setValue(a)}return n.clear=r.clear.bind(r),n},Th=Ah;const Oh=Eh(Th),Ch=Oh;var q;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},e.getValidEnumValues=s=>{const i=e.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return e.objectValues(a)},e.objectValues=s=>e.objectKeys(s).map(function(i){return s[i]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},e.find=(s,i)=>{for(const a of s)if(i(a))return a},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(q||(q={}));var _s;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(_s||(_s={}));const S=q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bt=e=>{switch(typeof e){case"undefined":return S.undefined;case"string":return S.string;case"number":return isNaN(e)?S.nan:S.number;case"boolean":return S.boolean;case"function":return S.function;case"bigint":return S.bigint;case"symbol":return S.symbol;case"object":return Array.isArray(e)?S.array:e===null?S.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?S.promise:typeof Map<"u"&&e instanceof Map?S.map:typeof Set<"u"&&e instanceof Set?S.set:typeof Date<"u"&&e instanceof Date?S.date:S.object;default:return S.unknown}},_=q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ih=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class je extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const r=t||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,u=0;for(;u<a.path.length;){const l=a.path[u];u===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(r(a))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return s(this),n}static assert(t){if(!(t instanceof je))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}je.create=e=>new je(e);const Gt=(e,t)=>{let r;switch(e.code){case _.invalid_type:e.received===S.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case _.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,q.jsonStringifyReplacer)}`;break;case _.unrecognized_keys:r=`Unrecognized key(s) in object: ${q.joinValues(e.keys,", ")}`;break;case _.invalid_union:r="Invalid input";break;case _.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${q.joinValues(e.options)}`;break;case _.invalid_enum_value:r=`Invalid enum value. Expected ${q.joinValues(e.options)}, received '${e.received}'`;break;case _.invalid_arguments:r="Invalid function arguments";break;case _.invalid_return_type:r="Invalid function return type";break;case _.invalid_date:r="Invalid date";break;case _.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:q.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case _.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case _.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case _.custom:r="Invalid input";break;case _.invalid_intersection_types:r="Intersection results could not be merged";break;case _.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case _.not_finite:r="Number must be finite";break;default:r=t.defaultError,q.assertNever(e)}return{message:r}};let Eo=Gt;function Nh(e){Eo=e}function yn(){return Eo}const gn=e=>{const{data:t,path:r,errorMaps:n,issueData:s}=e,i=[...r,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const u=n.filter(l=>!!l).slice().reverse();for(const l of u)o=l(a,{data:t,defaultError:o}).message;return{...s,path:i,message:o}},Rh=[];function k(e,t){const r=yn(),n=gn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Gt?void 0:Gt].filter(s=>!!s)});e.common.issues.push(n)}class be{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const s of r){if(s.status==="aborted")return N;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const s of r){const i=await s.key,a=await s.value;n.push({key:i,value:a})}return be.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return N;i.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:t.value,value:n}}}const N=Object.freeze({status:"aborted"}),Wt=e=>({status:"dirty",value:e}),xe=e=>({status:"valid",value:e}),ws=e=>e.status==="aborted",$s=e=>e.status==="dirty",$r=e=>e.status==="valid",xr=e=>typeof Promise<"u"&&e instanceof Promise;function vn(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Ao(e,t,r,n,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var T;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(T||(T={}));var mr,yr;class at{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ji=(e,t)=>{if($r(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new je(e.common.issues);return this._error=r,this._error}}};function j(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,o)=>{var u,l;const{message:d}=e;return a.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}},description:s}}class L{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return bt(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:bt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new be,ctx:{common:t.parent.common,data:t.data,parsedType:bt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(xr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bt(t)},i=this._parseSync({data:t,path:s.path,parent:s});return Ji(s,i)}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:bt(t)},s=this._parse({data:t,path:n.path,parent:n}),i=await(xr(s)?s:Promise.resolve(s));return Ji(n,i)}refine(t,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=t(s),o=()=>i.addIssue({code:_.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new Ge({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return nt.create(this,this._def)}nullable(){return kt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return He.create(this,this._def)}promise(){return er.create(this,this._def)}or(t){return Ar.create([this,t],this._def)}and(t){return Tr.create(this,t,this._def)}transform(t){return new Ge({...j(this._def),schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Rr({...j(this._def),innerType:this,defaultValue:r,typeName:I.ZodDefault})}brand(){return new Gs({typeName:I.ZodBranded,type:this,...j(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new zr({...j(this._def),innerType:this,catchValue:r,typeName:I.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Kr.create(this,t)}readonly(){return Mr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zh=/^c[^\s-]{8,}$/i,Mh=/^[0-9a-z]+$/,Ph=/^[0-9A-HJKMNP-TV-Z]{26}$/,jh=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lh=/^[a-z0-9_-]{21}$/i,Dh=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qh=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Bh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gn;const Kh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fh=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Vh=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,To="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Uh=new RegExp(`^${To}$`);function Oo(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Zh(e){return new RegExp(`^${Oo(e)}$`)}function Co(e){let t=`${To}T${Oo(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Wh(e,t){return!!((t==="v4"||!t)&&Kh.test(e)||(t==="v6"||!t)&&Fh.test(e))}class We extends L{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==S.string){const i=this._getOrReturnCtx(t);return k(i,{code:_.invalid_type,expected:S.string,received:i.parsedType}),N}const n=new be;let s;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(s=this._getOrReturnCtx(t,s),k(s,{code:_.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(s=this._getOrReturnCtx(t,s),k(s,{code:_.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=t.data.length>i.value,o=t.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(t,s),a?k(s,{code:_.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&k(s,{code:_.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")qh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"email",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Gn||(Gn=new RegExp(Bh,"u")),Gn.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"emoji",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")jh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"uuid",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Lh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"nanoid",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")zh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"cuid",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Mh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"cuid2",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Ph.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"ulid",code:_.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),k(s,{validation:"url",code:_.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"regex",code:_.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(t,s),k(s,{code:_.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(s=this._getOrReturnCtx(t,s),k(s,{code:_.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(s=this._getOrReturnCtx(t,s),k(s,{code:_.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Co(i).test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{code:_.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Uh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{code:_.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Zh(i).test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{code:_.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Dh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"duration",code:_.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Wh(t.data,i.version)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"ip",code:_.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Vh.test(t.data)||(s=this._getOrReturnCtx(t,s),k(s,{validation:"base64",code:_.invalid_string,message:i.message}),n.dirty()):q.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:_.invalid_string,...T.errToObj(n)})}_addCheck(t){return new We({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...T.errToObj(t)})}url(t){return this._addCheck({kind:"url",...T.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...T.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...T.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...T.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...T.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...T.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...T.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...T.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...T.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...T.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...T.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...T.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...T.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...T.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...T.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...T.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...T.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...T.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...T.errToObj(r)})}nonempty(t){return this.min(1,T.errToObj(t))}trim(){return new We({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new We({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}We.create=e=>{var t;return new We({checks:[],typeName:I.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...j(e)})};function Hh(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(e.toFixed(s).replace(".","")),a=parseInt(t.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class wt extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==S.number){const i=this._getOrReturnCtx(t);return k(i,{code:_.invalid_type,expected:S.number,received:i.parsedType}),N}let n;const s=new be;for(const i of this._def.checks)i.kind==="int"?q.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),k(n,{code:_.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),k(n,{code:_.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),k(n,{code:_.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Hh(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),k(n,{code:_.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),k(n,{code:_.not_finite,message:i.message}),s.dirty()):q.assertNever(i);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,T.toString(r))}gt(t,r){return this.setLimit("min",t,!1,T.toString(r))}lte(t,r){return this.setLimit("max",t,!0,T.toString(r))}lt(t,r){return this.setLimit("max",t,!1,T.toString(r))}setLimit(t,r,n,s){return new wt({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:T.toString(s)}]})}_addCheck(t){return new wt({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:T.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:T.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:T.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&q.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}wt.create=e=>new wt({checks:[],typeName:I.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...j(e)});class $t extends L{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==S.bigint){const i=this._getOrReturnCtx(t);return k(i,{code:_.invalid_type,expected:S.bigint,received:i.parsedType}),N}let n;const s=new be;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),k(n,{code:_.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),k(n,{code:_.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),k(n,{code:_.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):q.assertNever(i);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,T.toString(r))}gt(t,r){return this.setLimit("min",t,!1,T.toString(r))}lte(t,r){return this.setLimit("max",t,!0,T.toString(r))}lt(t,r){return this.setLimit("max",t,!1,T.toString(r))}setLimit(t,r,n,s){return new $t({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:T.toString(s)}]})}_addCheck(t){return new $t({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:T.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}$t.create=e=>{var t;return new $t({checks:[],typeName:I.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...j(e)})};class kr extends L{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==S.boolean){const n=this._getOrReturnCtx(t);return k(n,{code:_.invalid_type,expected:S.boolean,received:n.parsedType}),N}return xe(t.data)}}kr.create=e=>new kr({typeName:I.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...j(e)});class Pt extends L{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==S.date){const i=this._getOrReturnCtx(t);return k(i,{code:_.invalid_type,expected:S.date,received:i.parsedType}),N}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return k(i,{code:_.invalid_date}),N}const n=new be;let s;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(s=this._getOrReturnCtx(t,s),k(s,{code:_.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(s=this._getOrReturnCtx(t,s),k(s,{code:_.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):q.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Pt({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:T.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:T.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Pt.create=e=>new Pt({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:I.ZodDate,...j(e)});class bn extends L{_parse(t){if(this._getType(t)!==S.symbol){const n=this._getOrReturnCtx(t);return k(n,{code:_.invalid_type,expected:S.symbol,received:n.parsedType}),N}return xe(t.data)}}bn.create=e=>new bn({typeName:I.ZodSymbol,...j(e)});class Sr extends L{_parse(t){if(this._getType(t)!==S.undefined){const n=this._getOrReturnCtx(t);return k(n,{code:_.invalid_type,expected:S.undefined,received:n.parsedType}),N}return xe(t.data)}}Sr.create=e=>new Sr({typeName:I.ZodUndefined,...j(e)});class Er extends L{_parse(t){if(this._getType(t)!==S.null){const n=this._getOrReturnCtx(t);return k(n,{code:_.invalid_type,expected:S.null,received:n.parsedType}),N}return xe(t.data)}}Er.create=e=>new Er({typeName:I.ZodNull,...j(e)});class Xt extends L{constructor(){super(...arguments),this._any=!0}_parse(t){return xe(t.data)}}Xt.create=e=>new Xt({typeName:I.ZodAny,...j(e)});class zt extends L{constructor(){super(...arguments),this._unknown=!0}_parse(t){return xe(t.data)}}zt.create=e=>new zt({typeName:I.ZodUnknown,...j(e)});class dt extends L{_parse(t){const r=this._getOrReturnCtx(t);return k(r,{code:_.invalid_type,expected:S.never,received:r.parsedType}),N}}dt.create=e=>new dt({typeName:I.ZodNever,...j(e)});class _n extends L{_parse(t){if(this._getType(t)!==S.undefined){const n=this._getOrReturnCtx(t);return k(n,{code:_.invalid_type,expected:S.void,received:n.parsedType}),N}return xe(t.data)}}_n.create=e=>new _n({typeName:I.ZodVoid,...j(e)});class He extends L{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==S.array)return k(r,{code:_.invalid_type,expected:S.array,received:r.parsedType}),N;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,o=r.data.length<s.exactLength.value;(a||o)&&(k(r,{code:a?_.too_big:_.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(k(r,{code:_.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(k(r,{code:_.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>s.type._parseAsync(new at(r,a,r.path,o)))).then(a=>be.mergeArray(n,a));const i=[...r.data].map((a,o)=>s.type._parseSync(new at(r,a,r.path,o)));return be.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new He({...this._def,minLength:{value:t,message:T.toString(r)}})}max(t,r){return new He({...this._def,maxLength:{value:t,message:T.toString(r)}})}length(t,r){return new He({...this._def,exactLength:{value:t,message:T.toString(r)}})}nonempty(t){return this.min(1,t)}}He.create=(e,t)=>new He({type:e,minLength:null,maxLength:null,exactLength:null,typeName:I.ZodArray,...j(t)});function Ut(e){if(e instanceof Z){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=nt.create(Ut(n))}return new Z({...e._def,shape:()=>t})}else return e instanceof He?new He({...e._def,type:Ut(e.element)}):e instanceof nt?nt.create(Ut(e.unwrap())):e instanceof kt?kt.create(Ut(e.unwrap())):e instanceof ot?ot.create(e.items.map(t=>Ut(t))):e}class Z extends L{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=q.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==S.object){const l=this._getOrReturnCtx(t);return k(l,{code:_.invalid_type,expected:S.object,received:l.parsedType}),N}const{status:n,ctx:s}=this._processInputParams(t),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof dt&&this._def.unknownKeys==="strip"))for(const l in s.data)a.includes(l)||o.push(l);const u=[];for(const l of a){const d=i[l],h=s.data[l];u.push({key:{status:"valid",value:l},value:d._parse(new at(s,h,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof dt){const l=this._def.unknownKeys;if(l==="passthrough")for(const d of o)u.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(l==="strict")o.length>0&&(k(s,{code:_.unrecognized_keys,keys:o}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const d of o){const h=s.data[d];u.push({key:{status:"valid",value:d},value:l._parse(new at(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const d of u){const h=await d.key,x=await d.value;l.push({key:h,value:x,alwaysSet:d.alwaysSet})}return l}).then(l=>be.mergeObjectSync(n,l)):be.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(t){return T.errToObj,new Z({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,i,a,o;const u=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=T.errToObj(t).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new Z({...this._def,unknownKeys:"strip"})}passthrough(){return new Z({...this._def,unknownKeys:"passthrough"})}extend(t){return new Z({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Z({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:I.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Z({...this._def,catchall:t})}pick(t){const r={};return q.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Z({...this._def,shape:()=>r})}omit(t){const r={};return q.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new Z({...this._def,shape:()=>r})}deepPartial(){return Ut(this)}partial(t){const r={};return q.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new Z({...this._def,shape:()=>r})}required(t){const r={};return q.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof nt;)i=i._def.innerType;r[n]=i}}),new Z({...this._def,shape:()=>r})}keyof(){return Io(q.objectKeys(this.shape))}}Z.create=(e,t)=>new Z({shape:()=>e,unknownKeys:"strip",catchall:dt.create(),typeName:I.ZodObject,...j(t)});Z.strictCreate=(e,t)=>new Z({shape:()=>e,unknownKeys:"strict",catchall:dt.create(),typeName:I.ZodObject,...j(t)});Z.lazycreate=(e,t)=>new Z({shape:e,unknownKeys:"strip",catchall:dt.create(),typeName:I.ZodObject,...j(t)});class Ar extends L{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new je(o.ctx.common.issues));return k(r,{code:_.invalid_union,unionErrors:a}),N}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const u of n){const l={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(u=>new je(u));return k(r,{code:_.invalid_union,unionErrors:o}),N}}get options(){return this._def.options}}Ar.create=(e,t)=>new Ar({options:e,typeName:I.ZodUnion,...j(t)});const lt=e=>e instanceof Cr?lt(e.schema):e instanceof Ge?lt(e.innerType()):e instanceof Ir?[e.value]:e instanceof xt?e.options:e instanceof Nr?q.objectValues(e.enum):e instanceof Rr?lt(e._def.innerType):e instanceof Sr?[void 0]:e instanceof Er?[null]:e instanceof nt?[void 0,...lt(e.unwrap())]:e instanceof kt?[null,...lt(e.unwrap())]:e instanceof Gs||e instanceof Mr?lt(e.unwrap()):e instanceof zr?lt(e._def.innerType):[];class Cn extends L{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==S.object)return k(r,{code:_.invalid_type,expected:S.object,received:r.parsedType}),N;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(k(r,{code:_.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),N)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const s=new Map;for(const i of r){const a=lt(i.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);s.set(o,i)}}return new Cn({typeName:I.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...j(n)})}}function xs(e,t){const r=bt(e),n=bt(t);if(e===t)return{valid:!0,data:e};if(r===S.object&&n===S.object){const s=q.objectKeys(t),i=q.objectKeys(e).filter(o=>s.indexOf(o)!==-1),a={...e,...t};for(const o of i){const u=xs(e[o],t[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(r===S.array&&n===S.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let i=0;i<e.length;i++){const a=e[i],o=t[i],u=xs(a,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return r===S.date&&n===S.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Tr extends L{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),s=(i,a)=>{if(ws(i)||ws(a))return N;const o=xs(i.value,a.value);return o.valid?(($s(i)||$s(a))&&r.dirty(),{status:r.value,value:o.data}):(k(n,{code:_.invalid_intersection_types}),N)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Tr.create=(e,t,r)=>new Tr({left:e,right:t,typeName:I.ZodIntersection,...j(r)});class ot extends L{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==S.array)return k(n,{code:_.invalid_type,expected:S.array,received:n.parsedType}),N;if(n.data.length<this._def.items.length)return k(n,{code:_.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),N;!this._def.rest&&n.data.length>this._def.items.length&&(k(n,{code:_.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((a,o)=>{const u=this._def.items[o]||this._def.rest;return u?u._parse(new at(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>be.mergeArray(r,a)):be.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new ot({...this._def,rest:t})}}ot.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ot({items:e,typeName:I.ZodTuple,rest:null,...j(t)})};class Or extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==S.object)return k(n,{code:_.invalid_type,expected:S.object,received:n.parsedType}),N;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in n.data)s.push({key:i._parse(new at(n,o,n.path,o)),value:a._parse(new at(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?be.mergeObjectAsync(r,s):be.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof L?new Or({keyType:t,valueType:r,typeName:I.ZodRecord,...j(n)}):new Or({keyType:We.create(),valueType:t,typeName:I.ZodRecord,...j(r)})}}class wn extends L{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==S.map)return k(n,{code:_.invalid_type,expected:S.map,received:n.parsedType}),N;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,u],l)=>({key:s._parse(new at(n,o,n.path,[l,"key"])),value:i._parse(new at(n,u,n.path,[l,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of a){const l=await u.key,d=await u.value;if(l.status==="aborted"||d.status==="aborted")return N;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(l.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const u of a){const l=u.key,d=u.value;if(l.status==="aborted"||d.status==="aborted")return N;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(l.value,d.value)}return{status:r.value,value:o}}}}wn.create=(e,t,r)=>new wn({valueType:t,keyType:e,typeName:I.ZodMap,...j(r)});class jt extends L{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==S.set)return k(n,{code:_.invalid_type,expected:S.set,received:n.parsedType}),N;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(k(n,{code:_.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(k(n,{code:_.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(u){const l=new Set;for(const d of u){if(d.status==="aborted")return N;d.status==="dirty"&&r.dirty(),l.add(d.value)}return{status:r.value,value:l}}const o=[...n.data.values()].map((u,l)=>i._parse(new at(n,u,n.path,l)));return n.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(t,r){return new jt({...this._def,minSize:{value:t,message:T.toString(r)}})}max(t,r){return new jt({...this._def,maxSize:{value:t,message:T.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}jt.create=(e,t)=>new jt({valueType:e,minSize:null,maxSize:null,typeName:I.ZodSet,...j(t)});class Jt extends L{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==S.function)return k(r,{code:_.invalid_type,expected:S.function,received:r.parsedType}),N;function n(o,u){return gn({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,yn(),Gt].filter(l=>!!l),issueData:{code:_.invalid_arguments,argumentsError:u}})}function s(o,u){return gn({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,yn(),Gt].filter(l=>!!l),issueData:{code:_.invalid_return_type,returnTypeError:u}})}const i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof er){const o=this;return xe(async function(...u){const l=new je([]),d=await o._def.args.parseAsync(u,i).catch(g=>{throw l.addIssue(n(u,g)),l}),h=await Reflect.apply(a,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw l.addIssue(s(h,g)),l})})}else{const o=this;return xe(function(...u){const l=o._def.args.safeParse(u,i);if(!l.success)throw new je([n(u,l.error)]);const d=Reflect.apply(a,this,l.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new je([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Jt({...this._def,args:ot.create(t).rest(zt.create())})}returns(t){return new Jt({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new Jt({args:t||ot.create([]).rest(zt.create()),returns:r||zt.create(),typeName:I.ZodFunction,...j(n)})}}class Cr extends L{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Cr.create=(e,t)=>new Cr({getter:e,typeName:I.ZodLazy,...j(t)});class Ir extends L{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return k(r,{received:r.data,code:_.invalid_literal,expected:this._def.value}),N}return{status:"valid",value:t.data}}get value(){return this._def.value}}Ir.create=(e,t)=>new Ir({value:e,typeName:I.ZodLiteral,...j(t)});function Io(e,t){return new xt({values:e,typeName:I.ZodEnum,...j(t)})}class xt extends L{constructor(){super(...arguments),mr.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return k(r,{expected:q.joinValues(n),received:r.parsedType,code:_.invalid_type}),N}if(vn(this,mr)||Ao(this,mr,new Set(this._def.values)),!vn(this,mr).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return k(r,{received:r.data,code:_.invalid_enum_value,options:n}),N}return xe(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return xt.create(t,{...this._def,...r})}exclude(t,r=this._def){return xt.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}mr=new WeakMap;xt.create=Io;class Nr extends L{constructor(){super(...arguments),yr.set(this,void 0)}_parse(t){const r=q.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==S.string&&n.parsedType!==S.number){const s=q.objectValues(r);return k(n,{expected:q.joinValues(s),received:n.parsedType,code:_.invalid_type}),N}if(vn(this,yr)||Ao(this,yr,new Set(q.getValidEnumValues(this._def.values))),!vn(this,yr).has(t.data)){const s=q.objectValues(r);return k(n,{received:n.data,code:_.invalid_enum_value,options:s}),N}return xe(t.data)}get enum(){return this._def.values}}yr=new WeakMap;Nr.create=(e,t)=>new Nr({values:e,typeName:I.ZodNativeEnum,...j(t)});class er extends L{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==S.promise&&r.common.async===!1)return k(r,{code:_.invalid_type,expected:S.promise,received:r.parsedType}),N;const n=r.parsedType===S.promise?r.data:Promise.resolve(r.data);return xe(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}er.create=(e,t)=>new er({type:e,typeName:I.ZodPromise,...j(t)});class Ge extends L{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===I.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,i={addIssue:a=>{k(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async o=>{if(r.value==="aborted")return N;const u=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return u.status==="aborted"?N:u.status==="dirty"||r.value==="dirty"?Wt(u.value):u});{if(r.value==="aborted")return N;const o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?N:o.status==="dirty"||r.value==="dirty"?Wt(o.value):o}}if(s.type==="refinement"){const a=o=>{const u=s.refinement(o,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?N:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?N:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$r(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>$r(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:r.value,value:o})):a);q.assertNever(s)}}Ge.create=(e,t,r)=>new Ge({schema:e,typeName:I.ZodEffects,effect:t,...j(r)});Ge.createWithPreprocess=(e,t,r)=>new Ge({schema:t,effect:{type:"preprocess",transform:e},typeName:I.ZodEffects,...j(r)});class nt extends L{_parse(t){return this._getType(t)===S.undefined?xe(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}nt.create=(e,t)=>new nt({innerType:e,typeName:I.ZodOptional,...j(t)});class kt extends L{_parse(t){return this._getType(t)===S.null?xe(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}kt.create=(e,t)=>new kt({innerType:e,typeName:I.ZodNullable,...j(t)});class Rr extends L{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===S.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Rr.create=(e,t)=>new Rr({innerType:e,typeName:I.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...j(t)});class zr extends L{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return xr(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new je(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new je(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}zr.create=(e,t)=>new zr({innerType:e,typeName:I.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...j(t)});class $n extends L{_parse(t){if(this._getType(t)!==S.nan){const n=this._getOrReturnCtx(t);return k(n,{code:_.invalid_type,expected:S.nan,received:n.parsedType}),N}return{status:"valid",value:t.data}}}$n.create=e=>new $n({typeName:I.ZodNaN,...j(e)});const Jh=Symbol("zod_brand");class Gs extends L{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Kr extends L{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?N:i.status==="dirty"?(r.dirty(),Wt(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?N:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new Kr({in:t,out:r,typeName:I.ZodPipeline})}}class Mr extends L{_parse(t){const r=this._def.innerType._parse(t),n=s=>($r(s)&&(s.value=Object.freeze(s.value)),s);return xr(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Mr.create=(e,t)=>new Mr({innerType:e,typeName:I.ZodReadonly,...j(t)});function No(e,t={},r){return e?Xt.create().superRefine((n,s)=>{var i,a;if(!e(n)){const o=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,u=(a=(i=o.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...l,fatal:u})}}):Xt.create()}const Qh={object:Z.lazycreate};var I;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(I||(I={}));const Yh=(e,t={message:`Input not instance of ${e.name}`})=>No(r=>r instanceof e,t),Ro=We.create,zo=wt.create,Gh=$n.create,Xh=$t.create,Mo=kr.create,ep=Pt.create,tp=bn.create,rp=Sr.create,np=Er.create,sp=Xt.create,ip=zt.create,ap=dt.create,op=_n.create,up=He.create,lp=Z.create,cp=Z.strictCreate,dp=Ar.create,fp=Cn.create,hp=Tr.create,pp=ot.create,mp=Or.create,yp=wn.create,gp=jt.create,vp=Jt.create,bp=Cr.create,_p=Ir.create,wp=xt.create,$p=Nr.create,xp=er.create,Qi=Ge.create,kp=nt.create,Sp=kt.create,Ep=Ge.createWithPreprocess,Ap=Kr.create,Tp=()=>Ro().optional(),Op=()=>zo().optional(),Cp=()=>Mo().optional(),Ip={string:e=>We.create({...e,coerce:!0}),number:e=>wt.create({...e,coerce:!0}),boolean:e=>kr.create({...e,coerce:!0}),bigint:e=>$t.create({...e,coerce:!0}),date:e=>Pt.create({...e,coerce:!0})},Np=N;var K=Object.freeze({__proto__:null,defaultErrorMap:Gt,setErrorMap:Nh,getErrorMap:yn,makeIssue:gn,EMPTY_PATH:Rh,addIssueToContext:k,ParseStatus:be,INVALID:N,DIRTY:Wt,OK:xe,isAborted:ws,isDirty:$s,isValid:$r,isAsync:xr,get util(){return q},get objectUtil(){return _s},ZodParsedType:S,getParsedType:bt,ZodType:L,datetimeRegex:Co,ZodString:We,ZodNumber:wt,ZodBigInt:$t,ZodBoolean:kr,ZodDate:Pt,ZodSymbol:bn,ZodUndefined:Sr,ZodNull:Er,ZodAny:Xt,ZodUnknown:zt,ZodNever:dt,ZodVoid:_n,ZodArray:He,ZodObject:Z,ZodUnion:Ar,ZodDiscriminatedUnion:Cn,ZodIntersection:Tr,ZodTuple:ot,ZodRecord:Or,ZodMap:wn,ZodSet:jt,ZodFunction:Jt,ZodLazy:Cr,ZodLiteral:Ir,ZodEnum:xt,ZodNativeEnum:Nr,ZodPromise:er,ZodEffects:Ge,ZodTransformer:Ge,ZodOptional:nt,ZodNullable:kt,ZodDefault:Rr,ZodCatch:zr,ZodNaN:$n,BRAND:Jh,ZodBranded:Gs,ZodPipeline:Kr,ZodReadonly:Mr,custom:No,Schema:L,ZodSchema:L,late:Qh,get ZodFirstPartyTypeKind(){return I},coerce:Ip,any:sp,array:up,bigint:Xh,boolean:Mo,date:ep,discriminatedUnion:fp,effect:Qi,enum:wp,function:vp,instanceof:Yh,intersection:hp,lazy:bp,literal:_p,map:yp,nan:Gh,nativeEnum:$p,never:ap,null:np,nullable:Sp,number:zo,object:lp,oboolean:Cp,onumber:Op,optional:kp,ostring:Tp,pipeline:Ap,preprocess:Ep,promise:xp,record:mp,set:gp,strictObject:cp,string:Ro,symbol:tp,transformer:Qi,tuple:pp,undefined:rp,union:dp,unknown:ip,void:op,NEVER:Np,ZodIssueCode:_,quotelessJson:Ih,ZodError:je});async function Rp(e,t,r){const n=await e.safeParseAsync(t,{errorMap:r});return n.success?{data:n.data,success:!0}:{issues:n.error.issues.map(({message:s,path:i})=>({message:s,path:i})),success:!1}}function zp(e,t){return{superFormValidationLibrary:"zod",validate:async r=>Rp(e,r,t==null?void 0:t.errorMap)}}const ag=Ch(zp);class Pr extends String{}const Mp=new Set(["<",">","<=",">="]),Pp=e=>`\\u${e.toString(16).padStart(4,"0")}`,jp=e=>{if([1/0,-1/0,NaN,void 0,null].includes(e))return`${e}`;if(!["string","boolean","number"].includes(typeof e)){if(typeof e!="object")throw new Error("Unexpected value type");const r=Object.getPrototypeOf(e);if(!(r===Array.prototype&&Array.isArray(e)||r===Object.prototype))throw new Error("Unexpected object given as value")}return JSON.stringify(e).replace(/([{,])"__proto__":/g,'$1["__proto__"]:').replace(/[^\\]"__proto__":/g,()=>{throw new Error("Unreachable")}).replace(/[\u2028\u2029]/g,r=>Pp(r.charCodeAt(0)))},In=(e,...t)=>{const r=e.replace(/%[%drscjw]/g,n=>{if(n==="%%")return"%";if(t.length===0)throw new Error("Unexpected arguments count");const s=t.shift();switch(n){case"%d":if(typeof s=="number")return s;throw new Error("Expected a number");case"%r":if(s instanceof RegExp)return In("new RegExp(%j, %j)",s.source,s.flags);throw new Error("Expected a RegExp instance");case"%s":if(s instanceof Pr)return s;throw new Error("Expected a safe string");case"%c":if(Mp.has(s))return s;throw new Error("Expected a compare op");case"%j":return jp(s);case"%w":if(Number.isInteger(s)&&s>=0)return" ".repeat(s);throw new Error("Expected a non-negative integer for indentation")}throw new Error("Unreachable")});if(t.length!==0)throw new Error("Unexpected arguments count");return new Pr(r)},ks=e=>{if(!/^[a-z][a-z0-9_]*$/i.test(e))throw new Error("Does not look like a safe id");return new Pr(e)},Po=e=>(...t)=>{if(!t.every(r=>r instanceof Pr))throw new Error("Unsafe arguments");return new Pr(e(...t))},Lp=e=>/^[a-z][a-z0-9_().]*$/i.test(e)||/^\([^()]+\)$/i.test(e)?e:In("(%s)",e),Dp=Po((...e)=>e.some(t=>`${t}`=="true")?"true":e.join(" || ")||"false"),qp=Po((...e)=>e.some(t=>`${t}`=="false")?"false":e.join(" && ")||"true"),jo=e=>`${e}`=="true"?ks("false"):`${e}`=="false"?ks("true"):In("!%s",Lp(e)),Bp=(...e)=>jo(Dp(...e));var Kp={format:In,safe:ks,safeand:qp,safenot:jo,safenotor:Bp};const Fp=e=>/[\uD800-\uDFFF]/.test(e)?[...e].length:e.length,Vp=(e,t,r,n)=>{if(e%t===0)return!0;let s=e*r;if((s===1/0||s===-1/0)&&(s=e),s%n===0)return!0;const i=Math.floor(s+.5);return i/r===e&&i%n===0},jr=(e,t)=>{if(e===t)return!0;if(!e||!t||typeof e!=typeof t||e!==t&&typeof e!="object")return!1;const r=Object.getPrototypeOf(e);if(r!==Object.getPrototypeOf(t))return!1;if(r===Array.prototype)return!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length?!1:e.every((n,s)=>jr(n,t[s]));if(r===Object.prototype){const[n,s]=[Object.keys(e),Object.keys(t)];return n.length!==s.length?!1:new Set([...n,...s]).size===n.length&&n.every(a=>jr(e[a],t[a]))}return!1},Up=e=>{if(e.length<2)return!0;if(e.length===2)return!jr(e[0],e[1]);const t=[],r=e.length>20?new Set:null;let n=0,s=0;for(const i of e){if(typeof i=="object")t.push(i);else if(r){if(r.add(i),r.size!==++n)return!1}else if(e.indexOf(i,s+1)!==-1)return!1;s++}for(let i=1;i<t.length;i++)for(let a=0;a<i;a++)if(jr(t[i],t[a]))return!1;return!0},Zp=e=>{if(typeof Buffer<"u")return Buffer.from(e,"base64").toString("utf-8");const t=atob(e);return new TextDecoder("utf-8").decode(new Uint8Array(t.length).map((r,n)=>t.charCodeAt(n)))},Lo=Function.prototype.call.bind(Object.prototype.hasOwnProperty);Lo[Symbol.for("toJayString")]="Function.prototype.call.bind(Object.prototype.hasOwnProperty)";const Do=e=>/~\//.test(e)?`${e}`.replace(/~/g,"~0").replace(/\//g,"~1"):e,Wp=e=>e.length===0?"#":`#/${e.map(Do).join("/")}`,Hp=({keywordLocation:e,instanceLocation:t},r,n)=>({keywordLocation:`${r}${e.slice(1)}`,instanceLocation:`${n}${t.slice(1)}`}),Jp=(e,[t,r])=>t.includes(!0)||t.some(n=>n===e)||r.some(n=>new RegExp(n,"u").test(e)),Qp=(e,t)=>(e.filter(r=>r[t])[0]||{})[t],Yp={toPointer:Wp,pointerPart:Do,errorMerge:Hp,propertyIn:Jp,dynamicResolve:Qp};var Gp={stringLength:Fp,isMultipleOf:Vp,deepEqual:jr,unique:Up,deBase64:Zp,hasOwn:Lo,...Yp};const{format:It,safe:og}=Kp;new Map(Object.entries({null:e=>It("%s === null",e),boolean:e=>It('typeof %s === "boolean"',e),array:e=>It("Array.isArray(%s)",e),object:e=>It('typeof %s === "object" && %s && !Array.isArray(%s)',e,e,e),number:e=>It('typeof %s === "number"',e),integer:e=>It("Number.isInteger(%s)",e),string:e=>It('typeof %s === "string"',e)}));new Set([].concat(...[Object,Array,String,Number,Boolean].map(e=>Object.getOwnPropertyNames(e.prototype))));const Yi={email:e=>{if(e.length>318)return!1;if(/^[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,20}(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]{1,21}){0,2}@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,60}[a-z0-9])?){0,3}$/i.test(e))return!0;if(!e.includes("@")||/(^\.|^"|\.@|\.\.)/.test(e))return!1;const[r,n,...s]=e.split("@");return!r||!n||s.length!==0||r.length>64||n.length>253||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(r)?!1:n.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},hostname:e=>e.length>(e.endsWith(".")?254:253)?!1:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*\.?$/i.test(e),date:e=>{if(e.length!==10)return!1;if(e[5]==="0"&&e[6]==="2"){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)$/.test(e))return!0;const t=e.match(/^(\d\d\d\d)-02-29$/);if(!t)return!1;const r=t[1]|0;return r%16===0||r%4===0&&r%25!==0}return e.endsWith("31")?/^\d\d\d\d-(?:0[13578]|1[02])-31$/.test(e):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)$/.test(e)},time:e=>{if(e.length>27||!/^(?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)?$/i.test(e))return!1;if(!/:60/.test(e))return!0;const r=e.match(/([0-9.]+|[^0-9.])/g);let n=Number(r[0])*60+Number(r[2]);return r[5]==="+"?n+=24*60-Number(r[6]||0)*60-Number(r[8]||0):r[5]==="-"&&(n+=Number(r[6]||0)*60+Number(r[8]||0)),n%(24*60)===23*60+59},"date-time":e=>{if(e.length>38)return!1;const t=/^\d\d\d\d-(?:0[1-9]|1[0-2])-(?:[0-2]\d|3[01])[t\s](?:2[0-3]|[0-1]\d):[0-5]\d:(?:[0-5]\d|60)(?:\.\d+)?(?:z|[+-](?:2[0-3]|[0-1]\d)(?::?[0-5]\d)?)$/i,r=e[5]==="0"&&e[6]==="2";if(r&&e[8]==="3"||!t.test(e))return!1;if(e[17]==="6"){const n=e.slice(11).match(/([0-9.]+|[^0-9.])/g);let s=Number(n[0])*60+Number(n[2]);if(n[5]==="+"?s+=24*60-Number(n[6]||0)*60-Number(n[8]||0):n[5]==="-"&&(s+=Number(n[6]||0)*60+Number(n[8]||0)),s%(24*60)!==23*60+59)return!1}if(r){if(/^\d\d\d\d-02-(?:[012][1-8]|[12]0|[01]9)/.test(e))return!0;const n=e.match(/^(\d\d\d\d)-02-29/);if(!n)return!1;const s=n[1]|0;return s%16===0||s%4===0&&s%25!==0}return e[8]==="3"&&e[9]==="1"?/^\d\d\d\d-(?:0[13578]|1[02])-31/.test(e):/^\d\d\d\d-(?:0[13-9]|1[012])-(?:[012][1-9]|[123]0)/.test(e)},ipv4:e=>e.length<=15&&/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)$/.test(e),ipv6:e=>{if(e.length>45||e.length<2)return!1;let t=0,r=0,n=0,s=!1,i=!1,a=0,o=!0;for(let l=0;l<e.length;l++){const d=e.charCodeAt(l);if(l===1&&a===58&&d!==58)return!1;if(d>=48&&d<=57){if(++n>4)return!1}else if(d===46){if(t>6||r>=3||n===0||i)return!1;r++,n=0}else if(d===58){if(r>0||t>=7)return!1;if(a===58){if(s)return!1;s=!0}else l===0&&(o=!1);t++,n=0,i=!1}else if(d>=97&&d<=102||d>=65&&d<=70){if(r>0||++n>4)return!1;i=!0}else return!1;a=d}if(t<2||r>0&&(r!==3||n===0))return!1;if(s&&e.length===2)return!0;if(r>0&&!/(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}$/.test(e))return!1;const u=r>0?6:7;return s?(o||n>0)&&t<u:t===u&&o&&n>0},uri:/^[a-z][a-z0-9+\-.]*:(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|v[0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/?(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?)?(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2}|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,"json-pointer":/^(?:|\/(?:[^~]|~0|~1)*)$/,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:|#|\/(?:[^~]|~0|~1)*)$/,uuid:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e))};Yi.hostname,Yi.ipv4;const{toPointer:ug,...Xp}=Gp,em=new Map(Object.entries({boolean:e=>typeof e=="boolean",array:e=>Array.isArray(e)&&Object.getPrototypeOf(e)===Array.prototype,object:e=>e&&Object.getPrototypeOf(e)===Object.prototype,finite:e=>Number.isFinite(e),natural:e=>Number.isInteger(e)&&e>=0,string:e=>typeof e=="string",jsonval:e=>Xp.deepEqual(e,JSON.parse(JSON.stringify(e)))}));em.get("object");const M=Symbol.for("drizzle:entityKind");function se(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,M))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=e.constructor;if(r)for(;r;){if(M in r&&r[M]===t[M])return!0;r=Object.getPrototypeOf(r)}return!1}var Fm;class or{constructor(t,r){c(this,"name");c(this,"primary");c(this,"notNull");c(this,"default");c(this,"defaultFn");c(this,"onUpdateFn");c(this,"hasDefault");c(this,"isUnique");c(this,"uniqueName");c(this,"uniqueType");c(this,"dataType");c(this,"columnType");c(this,"enumValues");c(this,"config");this.table=t,this.config=r,this.name=r.name,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}}Fm=M,c(or,Fm,"Column");var Vm;class qo{constructor(t,r,n){c(this,"config");c(this,"$default",this.$defaultFn);c(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}Vm=M,c(qo,Vm,"ColumnBuilder");const Xn=Symbol.for("drizzle:Name"),es=Symbol.for("drizzle:Schema"),Gi=Symbol.for("drizzle:Columns"),Xi=Symbol.for("drizzle:ExtraConfigColumns"),ts=Symbol.for("drizzle:OriginalName"),rs=Symbol.for("drizzle:BaseName"),ea=Symbol.for("drizzle:IsAlias"),ta=Symbol.for("drizzle:ExtraConfigBuilder"),tm=Symbol.for("drizzle:IsDrizzleTable");var Um,Zm,Wm,Hm,Jm,Qm,Ym,Gm,Xm,ey;class Y{constructor(t,r,n){c(this,Zm);c(this,Wm);c(this,Hm);c(this,Jm);c(this,Qm);c(this,Ym);c(this,Gm,!1);c(this,Xm);c(this,ey,!0);this[Xn]=this[ts]=t,this[es]=r,this[rs]=n}}Um=M,Zm=Xn,Wm=ts,Hm=es,Jm=Gi,Qm=Xi,Ym=rs,Gm=ea,Xm=ta,ey=tm,c(Y,Um,"Table"),c(Y,"Symbol",{Name:Xn,Schema:es,OriginalName:ts,Columns:Gi,ExtraConfigColumns:Xi,BaseName:rs,IsAlias:ea,ExtraConfigBuilder:ta});const ra=Symbol.for("drizzle:PgInlineForeignKeys");var ty,ry,ny;class Ss extends Y{constructor(){super(...arguments);c(this,ry,[]);c(this,ny)}}ty=M,ry=ra,ny=Y.Symbol.ExtraConfigBuilder,c(Ss,ty,"PgTable"),c(Ss,"Symbol",Object.assign({},Y.Symbol,{InlineForeignKeys:ra}));function rm(e,t){return`${e[Ss.Symbol.Name]}_${t.join("_")}_unique`}var sy;class Nn extends or{constructor(t,r){r.uniqueName||(r.uniqueName=rm(t,[r.name])),super(t,r),this.table=t}}sy=M,c(Nn,sy,"PgColumn");const na=Symbol.for("drizzle:isPgEnum");function nm(e){return!!e&&typeof e=="function"&&na in e&&e[na]===!0}var iy;class Xs{constructor(t,r,n,s=!1){this._={brand:"Subquery",sql:t,selectedFields:r,alias:n,isWith:s}}}iy=M,c(Xs,iy,"Subquery");const sm={startActiveSpan(e,t){return t()}},xn=Symbol.for("drizzle:ViewBaseConfig");function im(e){return e!=null&&typeof e.getSQL=="function"}function am(e){var r;const t={sql:"",params:[]};for(const n of e)t.sql+=n.sql,t.params.push(...n.params),(r=n.typings)!=null&&r.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}var ay;class qe{constructor(t){c(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new ue([this])}}ay=M,c(qe,ay,"StringChunk");var oy;const Rt=class Rt{constructor(t){c(this,"decoder",Bo);c(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return sm.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,t);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(t,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{escapeName:s,escapeParam:i,prepareTyping:a,inlineParams:o,paramStartIndex:u}=n;return am(t.map(l=>{if(se(l,qe))return{sql:l.value.join(""),params:[]};if(se(l,kn))return{sql:s(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){const d=[new qe("(")];for(const[h,x]of l.entries())d.push(x),h<l.length-1&&d.push(new qe(", "));return d.push(new qe(")")),this.buildQueryFromSourceParams(d,n)}if(se(l,Rt))return this.buildQueryFromSourceParams(l.queryChunks,{...n,inlineParams:o||l.shouldInlineParams});if(se(l,Y)){const d=l[Y.Symbol.Schema],h=l[Y.Symbol.Name];return{sql:d===void 0?s(h):s(d)+"."+s(h),params:[]}}if(se(l,or))return r.invokeSource==="indexes"?{sql:s(l.name),params:[]}:{sql:s(l.table[Y.Symbol.Name])+"."+s(l.name),params:[]};if(se(l,Fo)){const d=l[xn].schema,h=l[xn].name;return{sql:d===void 0?s(h):s(d)+"."+s(h),params:[]}}if(se(l,ei)){const d=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(se(d,Rt))return this.buildQueryFromSourceParams([d],n);if(o)return{sql:this.mapInlineParam(d,n),params:[]};let h;return a!==void 0&&(h=[a(l.encoder)]),{sql:i(u.value++,d),params:[d],typings:h}}return se(l,ti)?{sql:i(u.value++,l),params:[l]}:se(l,Rt.Aliased)&&l.fieldAlias!==void 0?{sql:s(l.fieldAlias),params:[]}:se(l,Xs)?l._.isWith?{sql:s(l._.alias),params:[]}:this.buildQueryFromSourceParams([new qe("("),l._.sql,new qe(") "),new kn(l._.alias)],n):nm(l)?l.schema?{sql:s(l.schema)+"."+s(l.enumName),params:[]}:{sql:s(l.enumName),params:[]}:im(l)?this.buildQueryFromSourceParams([new qe("("),l.getSQL(),new qe(")")],n):o?{sql:this.mapInlineParam(l,n),params:[]}:{sql:i(u.value++,l),params:[l]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return r(t);if(typeof t=="object"){const n=t.toString();return r(n==="[object Object]"?JSON.stringify(t):n)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Rt.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};oy=M,c(Rt,oy,"SQL");let ue=Rt;var uy;class kn{constructor(t){c(this,"brand");this.value=t}getSQL(){return new ue([this])}}uy=M,c(kn,uy,"Name");const Bo={mapFromDriverValue:e=>e},Ko={mapToDriverValue:e=>e};({...Bo,...Ko});var ly;class ei{constructor(t,r=Ko){c(this,"brand");this.value=t,this.encoder=r}getSQL(){return new ue([this])}}ly=M,c(ei,ly,"Param");function Sn(e,...t){const r=[];(t.length>0||e.length>0&&e[0]!=="")&&r.push(new qe(e[0]));for(const[n,s]of t.entries())r.push(s,new qe(e[n+1]));return new ue(r)}(e=>{function t(){return new ue([])}e.empty=t;function r(u){return new ue(u)}e.fromList=r;function n(u){return new ue([new qe(u)])}e.raw=n;function s(u,l){const d=[];for(const[h,x]of u.entries())h>0&&l!==void 0&&d.push(l),d.push(x);return new ue(d)}e.join=s;function i(u){return new kn(u)}e.identifier=i;function a(u){return new ti(u)}e.placeholder=a;function o(u,l){return new ei(u,l)}e.param=o})(Sn||(Sn={}));(e=>{var r;const n=class n{constructor(i,a){c(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=a}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};r=M,c(n,r,"SQL.Aliased");let t=n;e.Aliased=t})(ue||(ue={}));var cy;class ti{constructor(t){this.name=t}getSQL(){return new ue([this])}}cy=M,c(ti,cy,"Placeholder");var dy,fy;class Fo{constructor({name:t,schema:r,selectedFields:n,query:s}){c(this,fy);this[xn]={name:t,originalName:t,schema:r,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new ue([this])}}dy=M,fy=xn,c(Fo,dy,"View");or.prototype.getSQL=function(){return new ue([this])};Y.prototype.getSQL=function(){return new ue([this])};Xs.prototype.getSQL=function(){return new ue([this])};const Es=Symbol.for("drizzle:SQLiteInlineForeignKeys");var hy,py,my,yy;class St extends Y{constructor(){super(...arguments);c(this,py);c(this,my,[]);c(this,yy)}}hy=M,py=Y.Symbol.Columns,my=Es,yy=Y.Symbol.ExtraConfigBuilder,c(St,hy,"SQLiteTable"),c(St,"Symbol",Object.assign({},Y.Symbol,{InlineForeignKeys:Es}));function om(e,t,r,n,s=e){const i=new St(e,n,s),a=Object.fromEntries(Object.entries(t).map(([u,l])=>{const d=l,h=d.build(i);return i[Es].push(...d.buildForeignKeys(h,i)),[u,h]})),o=Object.assign(i,a);return o[Y.Symbol.Columns]=a,o[Y.Symbol.ExtraConfigColumns]=a,r&&(o[St.Symbol.ExtraConfigBuilder]=r),o}const Fr=(e,t,r)=>om(e,t,r);var gy;class Vo{constructor(t,r){c(this,"reference");c(this,"_onUpdate");c(this,"_onDelete");this.reference=()=>{const{name:n,columns:s,foreignColumns:i}=t();return{name:n,columns:s,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(t){return this._onUpdate=t,this}onDelete(t){return this._onDelete=t,this}build(t){return new Uo(t,this)}}gy=M,c(Vo,gy,"SQLiteForeignKeyBuilder");var vy;class Uo{constructor(t,r){c(this,"reference");c(this,"onUpdate");c(this,"onDelete");this.table=t,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:t,columns:r,foreignColumns:n}=this.reference(),s=r.map(o=>o.name),i=n.map(o=>o.name),a=[this.table[St.Symbol.Name],...s,n[0].table[St.Symbol.Name],...i];return t??`${a.join("_")}_fk`}}vy=M,c(Uo,vy,"SQLiteForeignKey");function um(e,t){return`${e[St.Symbol.Name]}_${t.join("_")}_unique`}var by;class Rn extends qo{constructor(){super(...arguments);c(this,"foreignKeyConfigs",[])}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r){return this.config.isUnique=!0,this.config.uniqueName=r,this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:s,actions:i})=>((a,o)=>{const u=new Vo(()=>{const l=a();return{columns:[r],foreignColumns:[l]}});return o.onUpdate&&u.onUpdate(o.onUpdate),o.onDelete&&u.onDelete(o.onDelete),u.build(n)})(s,i))}}by=M,c(Rn,by,"SQLiteColumnBuilder");var _y;class zn extends or{constructor(t,r){r.uniqueName||(r.uniqueName=um(t,[r.name])),super(t,r),this.table=t}}_y=M,c(zn,_y,"SQLiteColumn");var wy;class Mn extends Rn{constructor(t,r,n){super(t,r,n),this.config.autoIncrement=!1}primaryKey(t){return t!=null&&t.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}wy=M,c(Mn,wy,"SQLiteBaseIntegerBuilder");var $y;class Pn extends zn{constructor(){super(...arguments);c(this,"autoIncrement",this.config.autoIncrement)}getSQLType(){return"integer"}}$y=M,c(Pn,$y,"SQLiteBaseInteger");var xy;class Zo extends Mn{constructor(t){super(t,"number","SQLiteInteger")}build(t){return new Wo(t,this.config)}}xy=M,c(Zo,xy,"SQLiteIntegerBuilder");var ky;class Wo extends Pn{}ky=M,c(Wo,ky,"SQLiteInteger");var Sy;class Ho extends Mn{constructor(t,r){super(t,"date","SQLiteTimestamp"),this.config.mode=r}defaultNow(){return this.default(Sn`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(t){return new Jo(t,this.config)}}Sy=M,c(Ho,Sy,"SQLiteTimestampBuilder");var Ey;class Jo extends Pn{constructor(){super(...arguments);c(this,"mode",this.config.mode)}mapFromDriverValue(r){return this.config.mode==="timestamp"?new Date(r*1e3):new Date(r)}mapToDriverValue(r){const n=r.getTime();return this.config.mode==="timestamp"?Math.floor(n/1e3):n}}Ey=M,c(Jo,Ey,"SQLiteTimestamp");var Ay;class Qo extends Mn{constructor(t,r){super(t,"boolean","SQLiteBoolean"),this.config.mode=r}build(t){return new Yo(t,this.config)}}Ay=M,c(Qo,Ay,"SQLiteBooleanBuilder");var Ty;class Yo extends Pn{constructor(){super(...arguments);c(this,"mode",this.config.mode)}mapFromDriverValue(r){return Number(r)===1}mapToDriverValue(r){return r?1:0}}Ty=M,c(Yo,Ty,"SQLiteBoolean");function st(e,t){return(t==null?void 0:t.mode)==="timestamp"||(t==null?void 0:t.mode)==="timestamp_ms"?new Ho(e,t.mode):(t==null?void 0:t.mode)==="boolean"?new Qo(e,t.mode):new Zo(e)}var Oy;class Go extends Rn{constructor(t,r){super(t,"string","SQLiteText"),this.config.enumValues=r.enum,this.config.length=r.length}build(t){return new ri(t,this.config)}}Oy=M,c(Go,Oy,"SQLiteTextBuilder");var Cy;class ri extends zn{constructor(r,n){super(r,n);c(this,"enumValues",this.config.enumValues);c(this,"length",this.config.length)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}Cy=M,c(ri,Cy,"SQLiteText");var Iy;class Xo extends Rn{constructor(t){super(t,"json","SQLiteTextJson")}build(t){return new eu(t,this.config)}}Iy=M,c(Xo,Iy,"SQLiteTextJsonBuilder");var Ny;class eu extends zn{getSQLType(){return"text"}mapFromDriverValue(t){return JSON.parse(t)}mapToDriverValue(t){return JSON.stringify(t)}}Ny=M,c(eu,Ny,"SQLiteTextJson");function Oe(e,t={}){return t.mode==="json"?new Xo(e):new Go(e,t)}function lm(e){return e[Y.Symbol.Columns]}function cm(...e){return e[0].columns?new As(e[0].columns,e[0].name):new As(e)}var Ry;class As{constructor(t,r){c(this,"columns");c(this,"name");this.columns=t,this.name=r}build(t){return new tu(t,this.columns,this.name)}}Ry=M,c(As,Ry,"SQLitePrimaryKeyBuilder");var zy;class tu{constructor(t,r,n){c(this,"columns");c(this,"name");this.table=t,this.columns=r,this.name=n}getName(){return this.name??`${this.table[St.Symbol.Name]}_${this.columns.map(t=>t.name).join("_")}_pk`}}zy=M,c(tu,zy,"SQLitePrimaryKey");const sa=Symbol.for("drizzle:MySqlInlineForeignKeys");var My,Py,jy,Ly;class Ts extends Y{constructor(){super(...arguments);c(this,Py);c(this,jy,[]);c(this,Ly)}}My=M,Py=Y.Symbol.Columns,jy=sa,Ly=Y.Symbol.ExtraConfigBuilder,c(Ts,My,"MySqlTable"),c(Ts,"Symbol",Object.assign({},Y.Symbol,{InlineForeignKeys:sa}));function dm(e,t){return`${e[Ts.Symbol.Name]}_${t.join("_")}_unique`}var Dy;class jn extends or{constructor(t,r){r.uniqueName||(r.uniqueName=dm(t,[r.name])),super(t,r),this.table=t}}Dy=M,c(jn,Dy,"MySqlColumn");var qy;class ru extends jn{constructor(){super(...arguments);c(this,"length",this.config.length);c(this,"enumValues",this.config.enum)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}qy=M,c(ru,qy,"MySqlChar");var By;class nu extends jn{constructor(){super(...arguments);c(this,"length",this.config.length)}getSQLType(){return this.length===void 0?"varbinary":`varbinary(${this.length})`}}By=M,c(nu,By,"MySqlVarBinary");var Ky;class su extends jn{constructor(){super(...arguments);c(this,"length",this.config.length);c(this,"enumValues",this.config.enum)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}Ky=M,c(su,Ky,"MySqlVarChar");var Fy;class iu extends Nn{constructor(){super(...arguments);c(this,"length",this.config.length);c(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}Fy=M,c(iu,Fy,"PgChar");var Vy;class au extends Nn{getSQLType(){return"uuid"}}Vy=M,c(au,Vy,"PgUUID");var Uy;class ou extends Nn{constructor(){super(...arguments);c(this,"length",this.config.length);c(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}Uy=M,c(ou,Uy,"PgVarchar");const fm=K.union([K.string(),K.number(),K.boolean(),K.null()]),Os=K.lazy(()=>K.union([fm,K.array(Os),K.record(Os)]));function uu(e,t){const r=lm(e),n=Object.entries(r);let s=Object.fromEntries(n.map(([i,a])=>[i,lu(a)]));t&&(s=Object.assign(s,Object.fromEntries(Object.entries(t).map(([i,a])=>[i,typeof a=="function"?a(s):a]))));for(const[i,a]of n)a.notNull?a.hasDefault&&(s[i]=s[i].optional()):s[i]=s[i].nullable().optional();return K.object(s)}function lu(e){let t;if(function(r){return"enumValues"in r&&Array.isArray(r.enumValues)&&r.enumValues.length>0}(e)&&(t=e.enumValues.length?K.enum(e.enumValues):K.string()),!t){if(se(e,au))t=K.string().uuid();else if(e.dataType==="custom")t=K.any();else if(e.dataType==="json")t=Os;else if(e.dataType==="array")t=K.array(lu(e.baseColumn));else if(e.dataType==="number")t=K.number();else if(e.dataType==="bigint")t=K.bigint();else if(e.dataType==="boolean")t=K.boolean();else if(e.dataType==="date")t=K.date();else if(e.dataType==="string"){let r=K.string();(se(e,iu)||se(e,ou)||se(e,su)||se(e,nu)||se(e,ru)||se(e,ri))&&typeof e.length=="number"&&(r=r.max(e.length)),t=r}}return t||(t=K.any()),t}function hm(e){return e.toString(2).padStart(8,"0")}function pm(e){return[...e].map(t=>hm(t)).join("")}function ia(e){return parseInt(pm(e),2)}function mm(e){if(e<0||!Number.isInteger(e))throw new Error("Argument 'max' must be an integer greater than or equal to 0");const t=(e-1).toString(2).length,r=t%8,n=new Uint8Array(Math.ceil(t/8));crypto.getRandomValues(n),r!==0&&(n[0]&=(1<<r)-1);let s=ia(n);for(;s>=e;)crypto.getRandomValues(n),r!==0&&(n[0]&=(1<<r)-1),s=ia(n);return s}function ym(e,t){let r="";for(let n=0;n<e;n++)r+=t[mm(t.length)];return r}function gm(...e){const t=new Set(e);let r="";for(const n of t)n==="a-z"?r+="abcdefghijklmnopqrstuvwxyz":n==="A-Z"?r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ":n==="0-9"?r+="0123456789":r+=n;return r}const Ln=Fr("users",{id:st("id").notNull().primaryKey(),email:Oe("email").notNull().unique(),first_name:Oe("first_name"),last_name:Oe("last_name"),email_verified:st("email_verified",{mode:"boolean"}),avatar_url:Oe("avatar_url")});Fr("sessions",{id:Oe("id").notNull().primaryKey(),userId:st("user_id").notNull().references(()=>Ln.id),expiresAt:st("expires_at").notNull()});Fr("email_verification_tokens",{id:st("id",{mode:"number"}).primaryKey({autoIncrement:!0}),code:Oe("code").$defaultFn(()=>ym(6,gm("0-9"))).notNull(),email:Oe("email").notNull(),user_id:st("user_id",{mode:"number"}).notNull().references(()=>Ln.id,{onDelete:"cascade"}),created_at:st("created_at",{mode:"timestamp_ms"}).default(Sn`(CURRENT_TIMESTAMP)`)});const lg=uu(Ln,{email:e=>e.email.email()}).omit({id:!0}),cg=K.object({email:K.string().email()}),dg=K.object({email:K.string().email(),code:K.string().length(6)});function ni(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const vm=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],bm=(e,t)=>{for(const[r,n]of t)e=e.replace(new RegExp(ni(r),"g"),n);return e};function _m(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={customReplacements:[],...t};const r=new Map([...vm,...t.customReplacements]);return e=e.normalize(),e=bm(e,r),e=e.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),e}const wm=[["&"," and "],[""," unicorn "],[""," love "]],$m=e=>e.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),xm=(e,t)=>{const r=ni(t);return e.replace(new RegExp(`${r}{2,}`,"g"),t).replace(new RegExp(`^${r}|${r}$`,"g"),"")},km=e=>{let t="a-z\\d";if(t+=e.lowercase?"":"A-Z",e.preserveCharacters.length>0)for(const r of e.preserveCharacters){if(r===e.separator)throw new Error(`The separator character \`${e.separator}\` cannot be included in preserved characters: ${e.preserveCharacters}`);t+=ni(r)}return new RegExp(`[^${t}]+`,"g")};function aa(e,t){if(typeof e!="string")throw new TypeError(`Expected a string, got \`${typeof e}\``);t={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...t};const r=t.preserveLeadingUnderscore&&e.startsWith("_"),n=t.preserveTrailingDash&&e.endsWith("-"),s=new Map([...wm,...t.customReplacements]);e=_m(e,{customReplacements:s}),t.decamelize&&(e=$m(e));const i=km(t);return t.lowercase&&(e=e.toLowerCase()),e=e.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),e=e.replace(i,t.separator),e=e.replace(/\\/g,""),t.separator&&(e=xm(e,t.separator)),r&&(e=`_${e}`),n&&(e=`${e}-`),e}const cu=Fr("tenants",{id:st("id").notNull().primaryKey(),name:Oe("name").notNull(),description:Oe("description"),domain:Oe("domain").unique(),slug:Oe("slut").unique().notNull(),logo_square_url:Oe("logo_square_url"),logo_url:Oe("logo_url")});Fr("tenant_users",{tenant_id:st("tenant_id").references(()=>cu.id,{onDelete:"cascade"}).notNull(),user_id:st("user_id").references(()=>Ln.id,{onDelete:"cascade"}).notNull(),role:Oe("role",{enum:["admin","member"]}).notNull()},e=>({pk:cm({columns:[e.tenant_id,e.user_id]})}));const fg=uu(cu,{name:e=>e.name.trim(),slug:e=>e.slug.transform(t=>aa(t).trim())}).pick({name:!0,slug:!0}).transform(e=>(e.name&&!e.slug&&(e.slug=aa(e.name).trim()),e));K.object({email:K.string().email(),role:K.enum(["admin","member"]).default("member")});const Cs=Symbol("FORM_FIELD_CTX");function Sm(e){return fa(Cs,e),e}function du(){return ha(Cs)||fu("Form.Field"),pa(Cs)}const Is=Symbol("FORM_CONTROL_CTX");function Em(e){return fa(Is,e),e}function Am(){return ha(Is)||fu("<Control />"),pa(Is)}function fu(e){throw new Error(`Unable to find \`${e}\` context. Did you forget to wrap the component in a \`${e}\`?`)}function Tm({fieldErrorsId:e=void 0,descriptionId:t=void 0,errors:r}){let n="";return t&&(n+=t+" "),r.length&&e&&(n+=e),n?n.trim():void 0}function Om(e){if("required"in e)return e.required?"true":void 0}function Cm(e){return e&&e.length?"true":void 0}function hu(e){return e&&e.length?"":void 0}function pu(){return Vu(5)}function Im(e){return Array.isArray(e)?e:typeof e=="object"&&"_errors"in e&&e._errors!==void 0?e._errors:[]}function ns(e,t){const r=e.split(/[[\].]/).filter(Boolean);let n=t;for(const s of r){if(typeof n!="object"||n===null)return;n=n[s]}return n}function Nm(e,t){Et(t,!1);const r={};Dr(r);const n=()=>ge(R(l),"$formErrors",r),s=()=>ge(R(d),"$formConstraints",r),i=()=>ge(R(h),"$formTainted",r),a=()=>ge(R(x),"$formData",r),o=()=>ge(w,"$errors",r),u=()=>ge(m,"$tainted",r),l=Be(),d=Be(),h=Be(),x=Be();let g=$e(t,"form"),b=$e(t,"name");const y={name:ee(b()),errors:ee([]),constraints:ee({}),tainted:ee(!1),fieldErrorsId:ee(),descriptionId:ee(),form:g()},{tainted:m,errors:w}=y;Sm(y),oe(()=>(R(l),R(d),R(h),R(x),gt(g())),()=>{(()=>{const U=g();return Jr(Ue(l,U.errors),"$formErrors",r),Jr(Ue(d,U.constraints),"$formConstraints",r),Jr(Ue(h,U.tainted),"$formTainted",r),Jr(Ue(x,U.form),"$formData",r),U})()}),oe(()=>gt(b()),()=>{y.name.set(b())}),oe(()=>(gt(b()),n()),()=>{y.errors.set(Im(ns(b(),n())))}),oe(()=>(gt(b()),s()),()=>{y.constraints.set(ns(b(),s())??{})}),oe(()=>(i(),gt(b())),()=>{y.tainted.set(i()?ns(b(),i())===!0:!1)}),En(),Tt();var A=le(),B=ce(A);Je(B,Qe(t),{get value(){return a()[b()]},get errors(){return o()},get tainted(){return u()},get constraints(){return s()[b()]}},null),W(e,A),At()}function Rm(e,t){Et(t,!1);const r={};Dr(r);const n=()=>ge(m,"$errors",r),s=()=>ge(g,"$name",r),i=()=>ge(B,"$idStore",r),a=()=>ge(b,"$fieldErrorsId",r),o=()=>ge(y,"$descriptionId",r),u=()=>ge(w,"$constraints",r),l=Be(),d=Be(),h=Be();let x=$e(t,"id",8,pu);const{name:g,fieldErrorsId:b,descriptionId:y,errors:m,constraints:w}=du(),A={id:ee(x()),attrs:ee(),labelAttrs:ee()},{id:B}=A;Em(A),oe(()=>gt(x()),()=>{A.id.set(x())}),oe(()=>n(),()=>{Ue(l,hu(n()))}),oe(()=>(s(),i(),R(l),a(),o(),n(),u()),()=>{Ue(d,{name:s(),id:i(),"data-fs-error":R(l),"aria-describedby":Tm({fieldErrorsId:a(),descriptionId:o(),errors:n()}),"aria-invalid":Cm(n()),"aria-required":Om(u()),"data-fs-control":""})}),oe(()=>(i(),R(l)),()=>{Ue(h,{for:i(),"data-fs-label":"","data-fs-error":R(l)})}),oe(()=>R(d),()=>{A.attrs.set(R(d))}),oe(()=>R(h),()=>{A.labelAttrs.set(R(h))}),En(),Tt();var U=le(),Ce=ce(U);Je(Ce,Qe(t),{get attrs(){return R(d)}},null),W(e,U),At()}var zm=Lr("<div> </div>"),Mm=Lr("<div><!></div>");function Pm(e,t){const r=Ye(t,["children","$$slots","$$events"]),n=Ye(r,["id","asChild","el"]);Et(t,!1);const s={};Dr(s);const i=()=>ge(R(x),"$errors",s),a=()=>ge(h,"$fieldErrorsId",s),o=Be(),u=Be(),l=Be(),d=du(),h=d.fieldErrorsId,x=Be(d.errors);let g=$e(t,"id",8,pu),b=$e(t,"asChild",0,!1),y=$e(t,"el",12,()=>{});oe(()=>i(),()=>{Ue(o,hu(i()))}),oe(()=>gt(g()),()=>{h.set(g())}),oe(()=>(a(),R(o),gt(n)),()=>{Ue(u,{id:a(),"data-fs-error":R(o),"data-fs-field-errors":"","aria-live":"assertive",...n})}),oe(()=>R(o),()=>{Ue(l,{"data-fs-field-error":"","data-fs-error":R(o)})}),En(),Tt();var m=le(),w=ce(m);ga(w,b,A=>{var B=le(),U=ce(B);Je(U,Qe(t),{get errors(){return i()},get fieldErrorsAttrs(){return R(u)},get errorAttrs(){return R(l)}},null),W(A,B)},A=>{var B=Mm();va(B,Ie=>y(Ie),()=>y());let U;var Ce=br(B);Je(Ce,Qe(t),{get errors(){return i()},get fieldErrorsAttrs(){return R(u)},get errorAttrs(){return R(l)}},Ie=>{var G=le(),_e=ce(G);ba(_e,1,i,_a,(ke,Vr,Ur)=>{var fe=zm();let J;var Dn=br(fe);vr(()=>{J=nn(fe,J,{...R(l)},!0,""),ya(Dn,ma(Vr))}),W(ke,fe)}),W(Ie,G)}),vr(()=>U=nn(B,U,{...R(u)},!0,"")),W(A,B)}),W(e,m),At()}function hg(e,t){const r=Ye(t,["children","$$slots","$$events"]),n=Ye(r,["class"]);Et(t,!1);const s={};Dr(s);const i=()=>ge(o,"$labelAttrs",s);let a=$e(t,"class",8,()=>{});const{labelAttrs:o}=Am();Tt();var u=le(),l=ce(u),d=rt(()=>_r("data-[fs-error]:text-destructive",a()));sl(l,An(i,{get class(){return R(d)}},()=>n,{children:(h,x)=>{var g=le(),b=ce(g);Je(b,Qe(t),{labelAttrs:o},null),W(h,g)},$$slots:{default:!0}})),W(e,u),At()}var jm=Lr("<div> </div>");function pg(e,t){const r=Ye(t,["children","$$slots","$$events"]),n=Ye(r,["class","errorClasses"]);Et(t,!1);let s=$e(t,"class",8,()=>{}),i=$e(t,"errorClasses",8,()=>{});Tt();var a=le(),o=ce(a),u=rt(()=>_r("text-[0.8rem] font-medium text-destructive",s()));Pm(o,An({get class(){return R(u)}},()=>n,{children:(l,d)=>{const h=rt(()=>d.errors),x=rt(()=>d.fieldErrorsAttrs),g=rt(()=>d.errorAttrs);var b=le(),y=ce(b);Je(y,Qe(t),{get errors(){return R(h)},get fieldErrorsAttrs(){return R(x)},get errorAttrs(){return R(g)}},m=>{var w=le(),A=ce(w);ba(A,1,()=>R(h),_a,(B,U,Ce)=>{var Ie=jm();let G;var _e=br(Ie);vr(()=>{G=nn(Ie,G,{...R(g),class:_r(i())},!0,""),ya(_e,ma(U))}),W(B,Ie)}),W(m,w)}),W(l,b)},$$slots:{default:!0}})),W(e,a),At()}var Lm=Lr("<div><!></div>");function mg(e,t){Et(t,!1);let r=$e(t,"form"),n=$e(t,"name"),s=$e(t,"class",8,()=>{});Tt();var i=le(),a=ce(i);Nm(a,{get form(){return r()},get name(){return n()},children:(o,u)=>{const l=rt(()=>u.constraints),d=rt(()=>u.errors),h=rt(()=>u.tainted),x=rt(()=>u.value);var g=Lm();vr(()=>Uu(g,_r("space-y-2",s())));var b=br(g);Je(b,Qe(t),{get constraints(){return R(l)},get errors(){return R(d)},get tainted(){return R(h)},get value(){return R(x)}},null),W(o,g)},$$slots:{default:!0}}),W(e,i),At()}const yg=Rm;function gg(e,t){const r=Ye(t,["children","$$slots","$$events"]),n=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];var s=le(),i=ce(s);Zu(i,An({name:"loader-circle"},()=>r,{iconNode:n,children:(a,o)=>{var u=le(),l=ce(u);Je(l,Qe(t),{},null),W(a,u)},$$slots:{default:!0}})),W(e,s)}export{yg as C,mg as F,gg as L,cg as a,hg as b,pg as c,lg as d,fg as e,ig as s,dg as v,ag as z};
